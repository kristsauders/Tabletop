{"ts":1347042987731,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<!DOCTYPE HTML>\n<html>\n<head>\n<title>Krists Auders Photography (Beta)</title>\n<script type=\"text/javascript\" >\n</script>\n<script src=\"http://code.jquery.com/jquery-1.7.1.min.js\"></script>\n    \t<meta name=\"viewport\" content=\"width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;\"/>\n\t\t<style type=\"text/css\">\n\t\t\t*\n\t\t\t{\n\t\t\t\tcolor: #444;\n\t\t\t\tfont-family: Monospace;\n\t\t\t\tfont-size: 12px;\n\t\t\t}\n\t\t\t\n\t\t\tbody\n\t\t\t{\n\t\t\t\tmargin: 0px;\n\t\t\t\toverflow: scroll;\n\t\t\t}\n\t\t\t\n\t\t\tselect\n\t\t\t{\n\t\t\t\ttext-transform: uppercase;\n\t\t\t\tfont-size: 11px;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\t\t\t\n\t\t\thr\n\t\t\t{\n\t\t\t\tborder: 0;\n\t\t\t\theight: 1px;\n\t\t\t\tbackground-color: #ccc;\n\t\t\t\tmargin: 20px 0px;\n\t\t\t}\n\t\t\t\n\t\t\t.gui\n\t\t\t{\n\t\t\t\tcolor: black;\n\t\t\t\twidth: 350px;\n\t\t\t\tbackground-color: gray;\n\t\t\t\t//border-bottom: 1px solid #ddd;\n\t\t\t\t//padding: 5px 10px;\n\t\t\t\ttext-align: center;\n\t\t\t\t//text-transform: uppercase;\n\t\t\t\tline-height: 18px;\n\t\t\t\tcursor: default;\n                opacity:0.95;\n                z-index:13000;\n                    -moz-box-shadow: 1px 1px 25px #999;\n                \t-webkit-box-shadow: 1px 1px 25px #999;\n                    box-shadow: 1px 1px 25px #999;\n\t\t\t}\n\t\t\t\n\t\t\t.button\n\t\t\t{\n\t\t\t\tpadding: 2px;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t\t\n\t\t\t.key\n\t\t\t{\n\t\t\t\tpadding: 0px 8px;\n\t\t\t\tmargin-left: 1px;\n\t\t\t\tbackground-color: #eee;\n\t\t\t}\n            img {\n                opacity: 1;\n            }\n            img:hover {\n                opacity: 1;\n                /*Reflection*/ \n                /*-webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(.7, transparent), to(rgba(0,0,0,0.4)));   */\n                /*Glow*/ \n                -webkit-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); -moz-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); box-shadow: 0px 0px 5px rgba(255,255,255,0.8); \n            }\n            .no-hover {\n                opacity: 1;  \n                -webkit-box-shadow: 0px 0px 0px; -moz-box-shadow: 0px 0px 0px; box-shadow: 0px 0px 0px;\n            }\n            .no-hover:hover {\n                opacity: 1;  \n                -webkit-box-shadow: 0px 0px 0px; -moz-box-shadow: 0px 0px 0px; box-shadow: 0px 0px 0px;\n            }\n\t\t</style>\n<script type=\"text/javascript\" >\nvar ddpp=null;\nfunction getScrollXY() {\n\t  var scrOfX = 0, scrOfY = 0;\n\t  if( typeof( window.pageYOffset ) == 'number' ) {\n\t    //Netscape compliant\n\t    scrOfY = window.pageYOffset;\n\t    scrOfX = window.pageXOffset;\n\t  } else if( document.body && ( document.body.scrollLeft || document.body.scrollTop ) ) {\n\t    //DOM compliant\n\t    scrOfY = document.body.scrollTop;\n\t    scrOfX = document.body.scrollLeft;\n\t  } else if( document.documentElement && ( document.documentElement.scrollLeft || document.documentElement.scrollTop ) ) {\n\t    //IE6 standards compliant mode\n\t    scrOfY = document.documentElement.scrollTop;\n\t    scrOfX = document.documentElement.scrollLeft;\n\t  }\n\t  return [ scrOfX, scrOfY ];\n\t}\nfunction get_cookie(Name) {\n\t  var search = Name + \"=\"\n\t  var returnvalue = \"\";\n\t  if (document.cookie.length > 0) {\n\t    offset = document.cookie.indexOf(search)\n\t    // if cookie exists\n\t    if (offset != -1) { \n\t      offset += search.length\n\t      // set index of beginning of value\n\t      end = document.cookie.indexOf(\";\", offset);\n\t      // set index of end of cookie value\n\t      if (end == -1) end = document.cookie.length;\n\t      returnvalue=unescape(document.cookie.substring(offset, end))\n\t      }\n\t   }\n\t  return returnvalue;\n\t}\nfunction pageScroll() {\n\tvar scrollY = get_cookie(\"scrollY\");\n\tvar scrollX = get_cookie(\"scrollX\");\n\twindow.scrollBy(scrollX,scrollY); \n}\n\nfunction setPageScroll() {\n\tvar exp = new Date( );\n\tvar nowPlus = exp.getTime( ) + (5000);\n\texp.setTime(nowPlus);\n\tdocument.cookie = \"scrollY=\" + getScrollXY()[1] + \"; expires=\" + exp.toGMTString( );\n\tdocument.cookie = \"scrollX=\" + getScrollXY()[0] + \"; expires=\" + exp.toGMTString( );\n}\nfunction showUpload() {\n\tdocument.getElementById(\"upload\").style.visibility = 'visible';\n\tif(!document.getElementById(\"overlay\")){\n\t\tx = document.getElementsByTagName(\"img\");\n\t\tfor (i=0;i<x.length;i++)\n\t\t{\n\t\t\tx[i].style.visibility = 'hidden';\n\t\t}\n\t} else {\n\t\tdocument.getElementById(\"overlay\").style.visibility = 'visible';\n\t}\n}\nfunction hideUpload() {\n\tdocument.getElementById(\"upload\").style.visibility = 'hidden';\n\tif(!document.getElementById(\"overlay\")){\n\t\tx = document.getElementsByTagName(\"img\");\n\t\tfor (i=0;i<x.length;i++)\n\t\t{\n\t\t\tx[i].style.visibility = 'visible';\n\t\t}\n\t} else {\n\tdocument.getElementById(\"overlay\").style.visibility = 'hidden';\n\t}\n}\nfunction showLinkUpload() {\n\tdocument.getElementById(\"uploadLink\").style.visibility = 'visible';\n\tif(!document.getElementById(\"overlay\")){\n\t\tx = document.getElementsByTagName(\"img\");\n\t\tfor (i=0;i<x.length;i++)\n\t\t{\n\t\t\tx[i].style.visibility = 'hidden';\n\t\t}\n\t} else {\n\t\tdocument.getElementById(\"overlay\").style.visibility = 'visible';\n\t}\n}\nfunction hideLinkUpload() {\n\tdocument.getElementById(\"uploadLink\").style.visibility = 'hidden';\n\tif(!document.getElementById(\"overlay\")){\n\t\tx = document.getElementsByTagName(\"img\");\n\t\tfor (i=0;i<x.length;i++)\n\t\t{\n\t\t\tx[i].style.visibility = 'visible';\n\t\t}\n\t} else {\n\tdocument.getElementById(\"overlay\").style.visibility = 'hidden';\n\t}\n}\n</script>\n<style type=\"text/css\">\n.drag {position: absolute;}\n//img {\n//\t-moz-box-shadow: 1px 1px 12px #999;\n//\t-webkit-box-shadow: 1px 1px 12px #999;\n//        box-shadow: 1px 1px 12px #999;\n//        }\n//img:hover {\n//\t-moz-box-shadow: 1px 1px 24px #999;\n//\t-webkit-box-shadow: 1px 1px 24px #999;\n//        box-shadow: 1px 1px 24px #999;\n//}\n.toolbar {\nbottom:0px;\nleft:-10%;\nwidth:110%;\nheight:25px;\nbackground-color:gray; \nopacity:0.95;\nposition:fixed;\nz-index:13000;\n\t-moz-box-shadow: 1px 1px 25px #999;\n\t-webkit-box-shadow: 1px 1px 25px #999;\n        box-shadow: 1px 1px 25px #999;\n}\n.titlebar {\nvisibility:hidden;\ntop:0px;\nleft:-10%;\nwidth:110%;\nheight:25px;\nbackground-color:gray; \nopacity:0.95;\nposition:fixed;\nfont-family:Arial;\nfont-size:16px;\nz-index:5000;\n\t-moz-box-shadow: 1px 1px 25px #999;\n\t-webkit-box-shadow: 1px 1px 25px #999;\n        box-shadow: 1px 1px 25px #999;\n}\n\t</style>\n\t\n\t<script type=\"text/javascript\">\n\tfunction getWindowSize() {\n         var viewportwidth;\n         var viewportheight;\n        \n         if (typeof window.innerWidth != 'undefined')\n         {\n              viewportwidth = window.innerWidth;\n              viewportheight = window.innerHeight;\n         } else if (typeof document.documentElement != 'undefined'\n             && typeof document.documentElement.clientWidth !=\n             'undefined' && document.documentElement.clientWidth != 0)\n         {\n               viewportwidth = document.documentElement.clientWidth;\n               viewportheight = document.documentElement.clientHeight;\n         } else {\n               viewportwidth = document.getElementsByTagName('body')[0].clientWidth;\n               viewportheight = document.getElementsByTagName('body')[0].clientHeight\n         }\n         if(viewportwidth==0) {\n        \t viewportwidth = document.getElementsByTagName('body')[0].clientWidth;}\n         if(viewportheight==0) {\n             viewportheight = document.getElementsByTagName('body')[0].clientWidth;}\n         return [viewportwidth, viewportheight];\n\t}\n</script>\n<script type=\"text/javascript\">\nfunction resizeFirst() {\n\tx = document.getElementsByTagName(\"img\");\n\tvar viewportwidth = getWindowSize()[0];\n\tfor (i=0;i<x.length;i++)\n\t{\n\t\tx[i].style.width = x[i].width*(viewportwidth/1366)+\"px\";\n\t\tx[i].style.height = x[i].height*(viewportwidth/1366)+\"px\";\n\t\tx[i].style.left = parseInt(x[i].style.left)*(viewportwidth/1366)+\"px\";\n\t\tx[i].style.top = parseInt(x[i].style.top)*(viewportwidth/1366)+\"px\";\n\t}\n}\n\nfunction showDelete() {\n\tx = document.getElementsByTagName(\"img\");\n\tfor (i=0;i<x.length;i++)\n\t{\n\tif(x[i].name.split(\"jpgdivNI\")[1]==\"mG\" || x[i].name.split(\"pngdivNI\")[1]==\"mG\") {\n\tvar element = document.createElement(\"input\");\n\telement.setAttribute(\"type\",\"button\");\n\telement.setAttribute(\"value\",\"x\");\n\telement.setAttribute(\"onclick\",\"javascript:deleteImage(this)\");\n\telement.onclick = function() {deleteImage(this);};\n\telement.style.position = 'absolute';\n\telement.style.left = '0px';\n\telement.style.top = '0px';\n\tx[i].parentNode.appendChild(element);\n\t}\n}\n\tdocument.getElementById(\"adminDeleteButton\").onclick = hideDelete;\n\tdocument.getElementById(\"adminDeleteButton\").value = \"Done deleting\";\n\t\n}\n\nfunction hideDelete() {\n\tx = document.getElementsByTagName(\"img\");\n\tfor (i=0;i<x.length;i++)\n\t{\n\t\tif(x[i].name.split(\"jpgdivNI\")[1]==\"mG\" || x[i].name.split(\"pngdivNI\")[1]==\"mG\") {\n\t\t\tx[i].parentNode.removeChild(x[i].parentNode.lastChild);\n\t\t}\n}\n\tdocument.getElementById(\"adminDeleteButton\").onclick = showDelete;\n\tdocument.getElementById(\"adminDeleteButton\").value = \"Delete image\";\n}\n\n function fullScreen(el) {\n\t if(document.getElementById(el.src.split(\"/\").pop().replace('-small','').replace('-medium','').replace('-large','')+\"link\")) {\n\t\t var linkObj = document.getElementById(el.src.split(\"/\").pop().replace('-small','').replace('-medium','').replace('-large','')+\"link\");\n         var t = '';\n\t\t if(linkObj.innerText){\n\t\t\t t = linkObj.innerText;\n\t\t } else if(linkObj.textContent) {\n\t\t\t t = linkObj.textContent;\n\t\t }\n         if(t.indexOf('javascript:')==-1) {\n             window.location = t;\n         } else {\n             eval(t);\n         }\n\t } else {\n        document.getElementById(\"fullScreenImage\").src = el.src;\n        var ih = document.getElementById(el.id).firstChild.height;\n        var iw = document.getElementById(el.id).firstChild.width;\n        document.getElementById(\"fullScreenImage\").style.width = getWindowSize()[0] + 'px';\n           var rs = getWindowSize()[1]/getWindowSize()[0];\n           var ri = ih/iw;\n           var rsi = rs/ri;\n           if(rsi>1) {\n               document.getElementById(\"fullScreenImg\").style.width = 0.9*getWindowSize()[0] + 'px';\n               document.getElementById(\"fullScreenImg\").style.left = 0.05*getWindowSize()[0] + 'px';\n               document.getElementById(\"fullScreenImage\").style.width = 0.9*getWindowSize()[0] + 'px';\n           } else {\n               var rsic = rsi*0.9*getWindowSize()[0];\n               document.getElementById(\"fullScreenImg\").style.width = rsic + 'px';\n               document.getElementById(\"fullScreenImg\").style.left = (getWindowSize()[0]-rsic)/2 + 'px';\n               document.getElementById(\"fullScreenImage\").style.width = rsic + 'px';\n           }\n\n       if(document.getElementById(\"overlay\")){\n       \t\tdocument.getElementById(\"overlay\").style.visibility = 'visible';\n       }\n       if(document.getElementById(\"fullScreenImage\").complete) {\n           document.getElementById(\"closeFullscreenButton\").style.visibility = 'visible';\n           document.getElementById(\"fullScreenImg\").style.visibility = 'visible';\n           document.getElementById(\"fullScreenImage\").style.visibility = 'visible';\n       }\n       document.getElementById(\"fullScreenImage\").onload = function() {\n               document.getElementById(\"closeFullscreenButton\").style.visibility = 'visible';\n               document.getElementById(\"fullScreenImg\").style.visibility = 'visible';\n               document.getElementById(\"fullScreenImage\").style.visibility = 'visible';\n       }\n       var hiResImg = new Image();\n       hiResImg.src = el.src.substring(0,el.src.lastIndexOf('-')) + '-large' + el.src.substring(el.src.lastIndexOf('.'));\n       if(hiResImg.complete) {\n           if((document.getElementById(\"fullScreenImage\").style.visibility=='visible') && (document.getElementById(\"fullScreenImage\").src==el.src)) {\n                document.getElementById(\"fullScreenImage\").src = hiResImg.src;\n           }\n       }\n       hiResImg.onload = function() {\n           if((document.getElementById(\"fullScreenImage\").style.visibility=='visible') && (document.getElementById(\"fullScreenImage\").src==el.src)) {\n               document.getElementById(\"fullScreenImage\").src = hiResImg.src;\n           }\n       }\n     }\n    ddpp = dd;\n    dd.obj=null;\n    dd.evt=function(d_e) {};\n}\n\nfunction closeFullscreen() {\n    dd=ddpp;\n    dd.evt = function(d_e)\n    {\n        this.but = (this.e = d_e || window.event).which || this.e.button || 0;\n        this.button = (this.e.type == 'mousedown')? this.but\n    \t\t: (dd.e && dd.e.button)? dd.e.button\n    \t\t: 0;\n    \tthis.src = this.e.target || this.e.srcElement || null;\n    \tthis.src.tag = (\"\" + (this.src.tagName || this.src)).toLowerCase();\n    \tthis.x = dd.Int(this.e.pageX || this.e.clientX || 0);\n    \tthis.y = dd.Int(this.e.pageY || this.e.clientY || 0);\n    \tif(dd.ie)\n    \t{\n    \t\tthis.x += dd.getScrollX() - (dd.ie && !dd.iemac)*1;\n    \t\tthis.y += dd.getScrollY() - (dd.ie && !dd.iemac)*1;\n    \t}\n    \t//this.modifKey = this.e.modifiers? this.e.modifiers&Event.SHIFT_MASK : (this.e.shiftKey || false);\n    \tif((this.but==3) || (this.but==2)){\n    \t\tthis.modifKey = true;\n    \t} else {\n    \t\tthis.modifKey = false;\n    \t}\n    };\n\tdocument.getElementById(\"fullScreenImage\").style.visibility = 'hidden';\n   document.getElementById(\"fullScreenImg\").style.visibility = 'hidden';\n   if(document.getElementById(\"overlay\")){\n   \t\tdocument.getElementById(\"overlay\").style.visibility = 'hidden';\n   }\n   document.getElementById(\"closeFullscreenButton\").style.visibility = 'hidden';\n}\n\nfunction deleteImage(el) {\n\tsaveToLocalStorage();\n\tsetPageScroll();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"post\" ;\n  myForm.action = \"/<%=data.params.user + '/' + data.params.gallery%>/photos/delete\";\n    var myInput = document.createElement(\"input\") ;\n    myInput.setAttribute(\"name\", \"file\") ;\n    myInput.setAttribute(\"value\", el.parentNode.id.substring(0,el.parentNode.id.length-3));\n    myForm.appendChild(myInput) ;\n    var myInput5 = document.createElement(\"input\") ;\n    myInput5.setAttribute(\"name\", \"deleteIsOn\") ;\n    myInput5.setAttribute(\"value\", \"false\");\n    myForm.appendChild(myInput5) ;\n  document.body.appendChild(myForm) ;\n  myForm.submit() ;\n  document.body.removeChild(myForm) ;\n}\n\nfunction success() {\n    \n}\nfunction saveCoords() {\n    saveToLocalStorage();\n    setPageScroll();\n    \n    var data = new Object();\n    data.side = dd.obj.x*(1366/getWindowSize()[0]);\n    data.top = dd.obj.y*(1366/getWindowSize()[0]);\n    data.image = dd.obj.name;\n    data.width = dd.obj.w*(1366/getWindowSize()[0]);\n    data.height = dd.obj.h*(1366/getWindowSize()[0]);\n    data.deleteIsOn = '';\n    data.z = dd.z;\n    $.ajax({\n      type: 'POST',\n      url: '/<%=data.params.user + '/' + data.params.gallery%>/upsert',\n      data: data,\n      success: success(),\n      dataType: 'json'\n    });\n}\n\nfunction logout() {\n  saveToLocalStorage();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"post\" ;\n  myForm.action = \"/\";\n  document.body.appendChild(myForm);\n  myForm.submit();\n  document.body.removeChild(myForm);\n}\n\nfunction goHome() {\n  saveToLocalStorage();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"get\" ;\n  myForm.action = '/<%=data.params.user%>/galleries/list';\n  document.body.appendChild(myForm);\n  myForm.submit();\n  document.body.removeChild(myForm);\n}\nfunction shortClick(src) {\n\talert(src);\n}\nfunction fullScreenButton(el) {\n\tvar fullScreenButton = document.createElement(\"img\");\n\tfullScreenButton.setAttribute(\"id\", \"fullScreenButton\");\n\tfullScreenButton.setAttribute(\"src\",\"/images/upArrow.png\");\n\tel.parentNode.appendChild(fullScreenButton);\n\tfullScreenButton = document.getElementById(\"fullScreenButton\");\n\tfullScreenButton.style.position = 'absolute';\n\tfullScreenButton.style.left = '0px';\n\tfullScreenButton.style.top = '0px';\n\tfullScreenButton.style.width = el.width*0.05+\"px\";\n\tfullScreenButton.style.height = fullScreenButton.style.width;\n\tfullScreenButton.style.visibility = 'visible';\n\t\n\tvar fullScreenButton2 = document.createElement(\"img\");\n\tfullScreenButton2.setAttribute(\"id\", \"fullScreenButton2\");\n\tfullScreenButton2.setAttribute(\"src\",\"/images/downArrow.png\");\n\tel.parentNode.appendChild(fullScreenButton2);\n\tfullScreenButton2 = document.getElementById(\"fullScreenButton2\");\n\tfullScreenButton2.style.position = 'absolute';\n\tfullScreenButton2.style.right = '0px';\n\tfullScreenButton2.style.bottom = '0px';\n\tfullScreenButton2.style.width = el.width*0.05+\"px\";\n\tfullScreenButton2.style.height = fullScreenButton2.style.width;\n\tfullScreenButton2.style.visibility = 'visible';\n}\nfunction deleteFullScreenButton(el) {\n\tvar fullScreenButton = document.getElementById(\"fullScreenButton\");\n\tfullScreenButton.parentNode.removeChild(fullScreenButton);\n\tvar fullScreenButton2 = document.getElementById(\"fullScreenButton2\");\n\tfullScreenButton2.parentNode.removeChild(fullScreenButton2);\n}\n</script>\n\t\n</head>\n\n<body oncontextmenu=\"return false;\" >\n\n  <div align=\"center\" class=\"toolbar\" id=\"toolbar\" style=\"z-index:13000;\">\n   &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \n  <input type=\"button\" onclick=\"goHome();\" value=\"Home\" />\n  <input type=\"button\" onclick=\"logout();\" value=\"Log out\" />\n  <input type=\"button\" onclick=\"showUpload();\" value=\"Upload new images\" />\n  <input type=\"button\" onclick=\"showLinkUpload();\" value=\"Upload link image\" />\n  <input type=\"button\" onclick=\"window.open(document.URL.split('#')[0] + '/draw','_blank','location=0,width=900,height=600');\" value=\"Draw image\" />\n  <input type=\"button\" id=\"adminDeleteButton\" onclick=\"showDelete();\" value=\"Delete image\" />\n  </div>\n\n<script type=\"text/javascript\" src=\"/js/wz_dragdrop.js\"></script>\n\n\n<table width=\"100%\" height=\"100%\">\n  <tr>\n    <td align=\"center\" valign=\"middle\">\n\t\t<div name=\"upload\" id=\"upload\" style=\"position:fixed;visibility:hidden;left:30%;top:40%;width:40%;z-index:12000;font-family:Arial;font-size:18px;\" align=\"center\">\n\t\t<form name=\"upload\" action=\"/<%=data.params.user + '/' + data.params.gallery%>/photos/new\" enctype=\"multipart/form-data\" method=\"post\">\n\t\t<b>Select files to upload:</b><br/>\n\t\t<input type=\"file\" name=\"image\" multiple/>\n\t\t<input type=\"submit\" name=\"Upload\" value=\"Upload\"/><input type=\"button\" onclick=\"hideUpload();\" value=\"Cancel\" />\n\t\t</form></div><br/>\t\t\n\t</td>\n  </tr>\n  <tr>\n    <td align=\"center\" valign=\"middle\">\n\t\t<div name=\"uploadLink\" id=\"uploadLink\" style=\"position:fixed;visibility:hidden;left:30%;top:40%;width:40%;z-index:12000;font-family:Arial;font-size:18px;\" align=\"center\">\n\t\t<form name=\"uploadLink\" action=\"/<%=data.params.user + '/' + data.params.gallery%>/photos/newlink\" enctype=\"multipart/form-data\" method=\"post\">\n\t\tLink: <input type=\"text\" name=\"link\" length=\"50\" /><br/>\n\t\t<b>Select file to upload:</b><br/>\n\t\t<input type=\"file\" name=\"image\" /><br/>\n\t\t<input type=\"submit\" name=\"uploadLink\" value=\"Upload file\"/><input type=\"button\" onclick=\"hideLinkUpload();\" value=\"Cancel\" />\n\t\t</form></div><br/>\t\t\n\t</td>\n  </tr>\n</table>\n\n<div name=\"overlay\" id=\"overlay\" style=\"left:-50px;top:-50px;position:fixed;visibility:hidden;width:150%;height:150%;z-index:11000;background-color:gray;opacity:0.95;\" ></div>\n\n<% var il = \"\";\nfor(var i in data.images) { \n    if(data.images[i].link.length>2) {\n          %>\n    \t  <div style=\"visibility:hidden;\" id=\"<%=data.images[i].source.split('/').pop()%>link\"><%=data.images[i].link%></div>\n    \t  <%\n    }\n    if((data.images[i].width<400) && (data.images[i].height<400)) {\n%>\n<img src=\"<%=data.images[i].source.split('.')[0]+'-small.'+data.images[i].source.split('.')[1]%>\" style=\"z-index:<%=data.images[i].z%>;width:<%=Math.round(data.images[i].width)%>px;height:<%=Math.round(data.images[i].height)%>px;left:<%=Math.round(data.images[i].left)%>px;top:<%=Math.round(data.images[i].top)%>px;\" class=\"drag\" id=\"<%=data.images[i].source.split('/').pop()%>\" />\n<% \n} else if((data.images[i].width<900) && (data.images[i].height<900)) {\n%>\n<img src=\"<%=data.images[i].source.split('.')[0]+'-medium.'+data.images[i].source.split('.')[1]%>\" style=\"z-index:<%=data.images[i].z%>;width:<%=Math.round(data.images[i].width)%>px;height:<%=Math.round(data.images[i].height)%>px;left:<%=Math.round(data.images[i].left)%>px;top:<%=Math.round(data.images[i].top)%>px;\" class=\"drag\" id=\"<%=data.images[i].source.split('/').pop()%>\" />\n<%\n} else {\n%>\n<img src=\"<%=data.images[i].source.split('.')[0]+'-large.'+data.images[i].source.split('.')[1]%>\" style=\"z-index:<%=data.images[i].z%>;width:<%=Math.round(data.images[i].width)%>px;height:<%=Math.round(data.images[i].height)%>px;left:<%=Math.round(data.images[i].left)%>px;top:<%=Math.round(data.images[i].top)%>px;\" class=\"drag\" id=\"<%=data.images[i].source.split('/').pop()%>\" />\n<%\n}\nil += data.images[i].source.split('/').pop() + '\",\"';\n} %>\n\n<script type=\"text/javascript\">\nfunction setDraggables() {\n\tSET_DHTML(SCALABLE, SCROLL, \"<%- il.substring(0, il.length-3)%>\");\n}\nresizeFirst();\nsetDraggables(); \npageScroll();\nif(false) showDelete();\nfunction setHover() {\n\tx = document.getElementsByTagName(\"img\");\n\tfor (i=0;i<x.length;i++)\n\t{\n\t\tif(x[i].name.split(\"jpgdivNI\")[1]==\"mG\") {\n\t\t\tx[i].onmouseover = function() {fullScreenButton(this);};\n\t\t\tx[i].onmouseout = function() {deleteFullScreenButton(this);};\n\t\t}\n\t}\n}\n//setHover();\n\n  </script>\n\n\n<div id=\"fullScreenImg\" style=\"top:4%;visibility:hidden;z-index:12000;position:fixed;\">\n<img class=\"no-hover\" id =\"fullScreenImage\" style=\"top:0px;left:0px;position:absolute;z-index:12001;visibility:hidden;\" src=\"\" />\n<img class=\"no-hover\" id=\"closeFullscreenButton\" src=\"/images/close.png\" style=\"cursor:pointer;visibility:hidden;position:absolute;left:-40px;top:0px;z-index:10000;\" onclick=\"closeFullscreen();\"/>\n</div>\n<img src=\"/images/upArrow.png\" style=\"visibility:hidden\" />\n<img src=\"/images/downArrow.png\" style=\"visibility:hidden\" />\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/circles.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/chrome.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/fur.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/grid.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/longfur.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/ribbon.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/shaded.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/simple.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/sketchy.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/squares.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/web.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/colorutils.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/colorselector.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/palette.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/menu.js\"></script>\n\t\t<!--<script type=\"text/javascript\" src=\"js/about.js\"></script>-->\t\n\t\t<script type=\"text/javascript\" src=\"/js/main.js\"></script>\n\t\t<script type=\"text/javascript\">\n\t\tcontext.clearRect(0,0,canvas.width,canvas.height);\n\t\t\tvar img     = new Image();\n\t    \timg.onload  = function() {\n\t        \tcontext.drawImage(img, 0, 0, canvas.width, (img.height/img.width)*canvas.width);\n\t    \t}\n\t    \timg.src     = \"/images/<%=data.params.user + '-' + data.params.gallery%>-bg.png\";\n\t\t</script>\n</body>\n</html>"]],"start1":0,"start2":0,"length1":0,"length2":23153}]],"length":23153}
{"contributors":[],"silentsave":false,"ts":1347043456631,"patch":[[{"diffs":[[0,"      }\n    "],[-1," }\n"],[0,"    ddpp = d"]],"start1":11993,"start2":11993,"length1":27,"length2":24},{"diffs":[[0,"dd;\n    "],[1,"  "],[1,"  "],[0,"dd.obj=n"]],"start1":12016,"start2":12016,"length1":16,"length2":20},{"diffs":[[0,"j=null;\n    "],[1,"  "],[1,"  "],[0,"dd.evt=funct"]],"start1":12033,"start2":12033,"length1":24,"length2":28},{"diffs":[[0,"_e) {};\n"],[1,"     }\n"],[0,"}\n\nfunct"]],"start1":12066,"start2":12066,"length1":16,"length2":23}]],"length":23165,"saved":false}
{"ts":1347048068097,"patch":[[{"diffs":[[0,"Link"],[-1,": <input type=\"text\" name=\"link\" length"],[1," or Javascript: <textarea name=\"link\" rows=\"10\" columns"],[0,"=\"50"]],"start1":18484,"start2":18484,"length1":47,"length2":63}]],"length":23181,"saved":false}
{"ts":1347048291730,"patch":[[{"diffs":[[0,"mns=\"50\""],[-1," /"],[1,"></textarea"],[0,"><br/>\n\t"]],"start1":18540,"start2":18540,"length1":18,"length2":27}]],"length":23190,"saved":false}
{"ts":1347048321790,"patch":[[{"diffs":[[0,"ows="],[-1,"\""],[0,"10"],[-1,"\""],[0," col"]],"start1":18527,"start2":18527,"length1":12,"length2":10},{"diffs":[[0,"mns="],[-1,"\""],[0,"50"],[-1,"\""],[0,"></t"]],"start1":18538,"start2":18538,"length1":12,"length2":10}]],"length":23186,"saved":false}
{"ts":1347048360900,"patch":[[{"diffs":[[0,"ows="],[1,"\""],[0,"10"],[1,"\""],[0," col"],[-1,"umn"],[0,"s="],[1,"\""],[0,"50"],[1,"\""],[0,"></t"]],"start1":18527,"start2":18527,"length1":21,"length2":22}]],"length":23187,"saved":false}
{"contributors":[],"silentsave":false,"ts":1347320205193,"patch":[[{"diffs":[[0,"ript\" >\n"],[1,"function login(username,password) {\n    var data = new Object();\n    data.user = prompt(\"Enter username\",\"\");\n    data.password = prompt(\"Enter password\",\"\");\n    function loginSuccess() {\n        setTimeout(function(){window.location.reload(true);}, 1000);\n    }\n    $.ajax({\n       type: 'POST',\n       url: '/users/list/login',\n       data: data,\n       success: loginSuccess(),\n       dataType: 'json'\n    });\n}\n\nfunction logoutSuccess() {\n        setTimeout(function(){window.location.reload(true);}, 1000);\n    }\n\nfunction logout() {\n    $.ajax({\n       type: 'POST',\n       url: '/users/list/logout',\n       data: '',\n       success: logoutSuccess(),\n       dataType: 'json'\n    });\n}\n\n"],[0,"var ddpp"]],"start1":2216,"start2":2216,"length1":16,"length2":709}]],"length":23880,"saved":false}
{"ts":1347320434971,"patch":[[{"diffs":[[0,"ript\" >\n"],[1,"function loginSuccess() {\n    setTimeout(function(){window.location.reload(true);}, 1000);\n}\n    \n"],[0,"function"]],"start1":2216,"start2":2216,"length1":16,"length2":114},{"diffs":[[0,"\");\n"],[-1,"    function loginSuccess() {\n        setTimeout(function(){window.location.reload(true);}, 1000);\n    }\n"],[0,"    "]],"start1":2477,"start2":2477,"length1":113,"length2":8}]],"length":23873,"saved":false}
{"ts":1347321247679,"patch":[[{"diffs":[[0,"gin("],[-1,"username,password"],[0,") {\n"]],"start1":2333,"start2":2333,"length1":25,"length2":8}]],"length":23856,"saved":false}
{"ts":1347321337349,"patch":[[{"diffs":[[0,"on login"],[1,"Ajax"],[0,"() {\n   "]],"start1":2328,"start2":2328,"length1":16,"length2":20},{"diffs":[[0,"ction logout"],[1,"Ajax"],[0,"() {\n    $.a"]],"start1":2727,"start2":2727,"length1":24,"length2":28}]],"length":23864,"saved":false}
{"ts":1347321372821,"patch":[[{"diffs":[[0,"on login"],[-1,"Ajax"],[0,"() {\n   "]],"start1":2328,"start2":2328,"length1":20,"length2":16},{"diffs":[[0,"gout"],[-1,"Ajax"],[0,"() {"]],"start1":2731,"start2":2731,"length1":12,"length2":8},{"diffs":[[0,"\n}\n\n"],[-1,"function logout() {\n  saveToLocalStorage();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"post\" ;\n  myForm.action = \"/\";\n  document.body.appendChild(myForm);\n  myForm.submit();\n  document.body.removeChild(myForm);\n}\n\n"],[0,"func"]],"start1":15322,"start2":15322,"length1":243,"length2":8}]],"length":23621,"saved":false}
{"ts":1347321858212,"patch":[[{"diffs":[[0," />\n"],[-1,"  <input type=\"button\" onclick=\"logout();\" value=\"Log out\" />\n"],[0,"  <i"]],"start1":17385,"start2":17385,"length1":70,"length2":8}]],"length":23559,"saved":false}
{"contributors":[],"silentsave":false,"ts":1347568258013,"patch":[[{"diffs":[[0,"d);\n\t\t}\n"],[1,"    "],[0,"}\n\tdocum"]],"start1":9313,"start2":9313,"length1":16,"length2":20},{"diffs":[[0,"son'\n    });\n}\n\n"],[1,"function hideLinkUpdate() {\n    x = document.getElementsByTagName(\"img\");\n\tfor (i=0;i<x.length;i++)\n\t{\n\t\tif(x[i].name.split(\"jpgdivNI\")[1]==\"mG\" || x[i].name.split(\"pngdivNI\")[1]==\"mG\") {\n\t\t\tx[i].parentNode.removeChild(x[i].parentNode.lastChild);\n\t\t}\n    }\n\tdocument.getElementById(\"updateLinkButton\").onclick = showLinkUpdate;\n\tdocument.getElementById(\"updateLinkButton\").value = \"Update Image Link\";\n}\n\nfunction showLinkUpdate() {\n    x = document.getElementsByTagName(\"img\");\n\tfor (i=0;i<x.length;i++)\n\t{\n    \tif(x[i].name.split(\"jpgdivNI\")[1]==\"mG\" || x[i].name.split(\"pngdivNI\")[1]==\"mG\") {\n    \tvar element = document.createElement(\"input\");\n    \telement.setAttribute(\"type\",\"button\");\n    \telement.setAttribute(\"value\",\"This\");\n    \telement.setAttribute(\"onclick\",\"javascript:updateLink(this)\");\n    \telement.onclick = function() {updateLink(this);};\n    \telement.style.position = 'absolute';\n    \telement.style.left = '0px';\n    \telement.style.top = '0px';\n    \tx[i].parentNode.appendChild(element);\n    \t}\n    }\n\tdocument.getElementById(\"updateLinkButton\").onclick = hideLinkUpdate;\n\tdocument.getElementById(\"updateLinkButton\").value = \"Cancel\";\n\t\n}\n\n"],[0,"function goHome("]],"start1":15314,"start2":15314,"length1":32,"length2":1192}]],"length":24723,"saved":false}
{"ts":1347568359250,"patch":[[{"diffs":[[0,"son'\n    });\n}\n\n"],[1,"function updateLink(el) {\n    saveToLocalStorage();\n\tsetPageScroll();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"post\" ;\n  myForm.action = \"/<%=data.params.user + '/' + data.params.gallery%>/updateLink\";\n    var myInput = document.createElement(\"input\") ;\n    myInput.setAttribute(\"name\", \"file\") ;\n    myInput.setAttribute(\"value\", el.parentNode.id.substring(0,el.parentNode.id.length-3));\n    myForm.appendChild(myInput) ;\n    var myInput5 = document.createElement(\"input\") ;\n    myInput5.setAttribute(\"name\", \"deleteIsOn\") ;\n    myInput5.setAttribute(\"value\", \"false\");\n    myForm.appendChild(myInput5) ;\n  document.body.appendChild(myForm) ;\n  myForm.submit() ;\n  document.body.removeChild(myForm) ;\n}\n\n"],[0,"function hideLin"]],"start1":15314,"start2":15314,"length1":32,"length2":760}]],"length":25451,"saved":false}
{"ts":1347568621956,"patch":[[{"diffs":[[0,"te(\"name\", \""],[-1,"deleteIsOn"],[1,"link"],[0,"\") ;\n    myI"]],"start1":15852,"start2":15852,"length1":34,"length2":28},{"diffs":[[0,"ribute(\"value\", "],[-1,"\"false\""],[1,"prompt(\"Link\", \"\")"],[0,");\n    myForm.ap"]],"start1":15892,"start2":15892,"length1":39,"length2":50}]],"length":25456,"saved":false}
{"ts":1347568657692,"patch":[[{"diffs":[[0,"age\" />\n"],[1,"  <input type=\"button\" id=\"updateLinkButton\" onclick=\"showUpdateLink();\" value=\"Update Image Link\" />\n"],[0,"  </div>"]],"start1":19677,"start2":19677,"length1":16,"length2":118}]],"length":25558,"saved":false}
{"ts":1347568701089,"patch":[[{"diffs":[[0,"show"],[1,"Link"],[0,"Update"],[-1,"Link"],[0,"();\""]],"start1":19739,"start2":19739,"length1":18,"length2":18}]],"length":25558,"saved":false}
{"ts":1347569725668,"patch":[[{"diffs":[[0,"nk\")) {\n"],[1,"         alert('has link');\n"],[0,"\t\t var l"]],"start1":9615,"start2":9615,"length1":16,"length2":44}]],"length":25586,"saved":false}
{"ts":1347569922823,"patch":[[{"diffs":[[0,"n(el) {\n"],[1,"     alert(el.src.split(\"/\").pop().replace('-small','').replace('-medium','').replace('-large','')+\"link\");\n"],[0,"\t if(doc"]],"start1":9487,"start2":9487,"length1":16,"length2":124}]],"length":25694,"saved":false}
{"ts":1347570513523,"patch":[[{"diffs":[[0,") {\n"],[-1,"     alert(el.src.split(\"/\").pop().replace('-small','').replace('-medium','').replace('-large','')+\"link\");\n"],[0,"\t if"]],"start1":9491,"start2":9491,"length1":116,"length2":8},{"diffs":[[0,") {\n"],[-1,"         alert('has link');\n"],[0,"\t\t v"]],"start1":9619,"start2":9619,"length1":36,"length2":8}]],"length":25558,"saved":false}
{"contributors":[],"silentsave":false,"ts":1347855594737,"patch":[[{"diffs":[[0,"script>\n"],[-1,"    \t"],[0,"<meta na"]],"start1":180,"start2":180,"length1":21,"length2":16},{"diffs":[[0,"\"/>\n"],[-1,"\t\t<style type=\"text/css\">\n\t\t\t*\n\t\t\t{\n\t\t\t\tcolor: #444;\n\t\t\t\tfont-family: Monospace;\n\t\t\t\tfont-size: 12px;\n\t\t\t}\n\t\t\t\n\t\t\tbody\n\t\t\t{\n\t\t\t\tmargin: 0px;\n\t\t\t\toverflow: scroll;\n\t\t\t}\n\t\t\t\n\t\t\tselect\n\t\t\t{\n\t\t\t\ttext-transform: uppercase;\n\t\t\t\tfont-size: 11px;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\t\t\t\n\t\t\thr\n\t\t\t{\n\t\t\t\tborder: 0;\n\t\t\t\theight: 1px;\n\t\t\t\tbackground-color: #ccc;\n\t\t\t\tmargin: 20px 0px;\n\t\t\t}\n\t\t\t\n\t\t\t.gui\n\t\t\t{\n\t\t\t\tcolor: black;\n\t\t\t\twidth: 350px;\n\t\t\t\tbackground-color: gray;\n\t\t\t\t//border-bottom: 1px solid #ddd;\n\t\t\t\t//padding: 5px 10px;\n\t\t\t\ttext-align: center;\n\t\t\t\t//text-transform: uppercase;\n\t\t\t\tline-height: 18px;\n\t\t\t\tcursor: default;\n                opacity:0.95;\n                z-index:13000;\n                    -moz-box-shadow: 1px 1px 25px #999;\n                \t-webkit-box-shadow: 1px 1px 25px #999;\n                    box-shadow: 1px 1px 25px #999;\n\t\t\t}\n\t\t\t\n\t\t\t.button\n\t\t\t{\n\t\t\t\tpadding: 2px;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t\t\n\t\t\t.key\n\t\t\t{\n\t\t\t\tpadding: 0px 8px;\n\t\t\t\tmargin-left: 1px;\n\t\t\t\tbackground-color: #eee;\n\t\t\t}\n            img {\n                opacity: 1;\n            }\n            img:hover {\n                opacity: 1;\n                /*Reflection*/ \n                /*-webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(.7, transparent), to(rgba(0,0,0,0.4)));   */\n                /*Glow*/ \n                -webkit-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); -moz-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); box-shadow: 0px 0px 5px rgba(255,255,255,0.8); \n            }\n            .no-hover {\n                opacity: 1;  \n                -webkit-box-shadow: 0px 0px 0px; -moz-box-shadow: 0px 0px 0px; box-shadow: 0px 0px 0px;\n            }\n            .no-hover:hover {\n                opacity: 1;  \n                -webkit-box-shadow: 0px 0px 0px; -moz-box-shadow: 0px 0px 0px; box-shadow: 0px 0px 0px;\n            }\n\t\t</style"],[1,"<LINK REL=StyleSheet HREF=\"css/main.css\" TYPE=\"text/css\" MEDIA=screen"],[0,">\n<s"]],"start1":293,"start2":293,"length1":1895,"length2":77}]],"length":23735,"saved":false}
{"ts":1347855659549,"patch":[[{"diffs":[[0,"t HREF=\""],[1,"/"],[0,"css/main"]],"start1":316,"start2":316,"length1":16,"length2":17}]],"length":23736,"saved":false}
{"ts":1347855797039,"patch":[[{"diffs":[[0,"script>\n"],[1,"    \t"],[0,"<meta na"]],"start1":180,"start2":180,"length1":16,"length2":21},{"diffs":[[0,"\"/>\n"],[-1,"<LINK REL=StyleSheet HREF=\"/css/main.css\" TYPE=\"text/css\" MEDIA=screen"],[1,"\t\t<style type=\"text/css\">\n\t\t\t*\n\t\t\t{\n\t\t\t\tcolor: #444;\n\t\t\t\tfont-family: Monospace;\n\t\t\t\tfont-size: 12px;\n\t\t\t}\n\t\t\t\n\t\t\tbody\n\t\t\t{\n\t\t\t\tmargin: 0px;\n\t\t\t\toverflow: scroll;\n\t\t\t}\n\t\t\t\n\t\t\tselect\n\t\t\t{\n\t\t\t\ttext-transform: uppercase;\n\t\t\t\tfont-size: 11px;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\t\t\t\n\t\t\thr\n\t\t\t{\n\t\t\t\tborder: 0;\n\t\t\t\theight: 1px;\n\t\t\t\tbackground-color: #ccc;\n\t\t\t\tmargin: 20px 0px;\n\t\t\t}\n\t\t\t\n\t\t\t.gui\n\t\t\t{\n\t\t\t\tcolor: black;\n\t\t\t\twidth: 350px;\n\t\t\t\tbackground-color: gray;\n\t\t\t\t//border-bottom: 1px solid #ddd;\n\t\t\t\t//padding: 5px 10px;\n\t\t\t\ttext-align: center;\n\t\t\t\t//text-transform: uppercase;\n\t\t\t\tline-height: 18px;\n\t\t\t\tcursor: default;\n                opacity:0.95;\n                z-index:13000;\n                    -moz-box-shadow: 1px 1px 25px #999;\n                \t-webkit-box-shadow: 1px 1px 25px #999;\n                    box-shadow: 1px 1px 25px #999;\n\t\t\t}\n\t\t\t\n\t\t\t.button\n\t\t\t{\n\t\t\t\tpadding: 2px;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t\t\n\t\t\t.key\n\t\t\t{\n\t\t\t\tpadding: 0px 8px;\n\t\t\t\tmargin-left: 1px;\n\t\t\t\tbackground-color: #eee;\n\t\t\t}\n            img {\n                opacity: 1;\n            }\n            img:hover {\n                opacity: 1;\n                /*Reflection*/ \n                /*-webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(.7, transparent), to(rgba(0,0,0,0.4)));   */\n                /*Glow*/ \n                -webkit-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); -moz-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); box-shadow: 0px 0px 5px rgba(255,255,255,0.8); \n            }\n            .no-hover {\n                opacity: 1;  \n                -webkit-box-shadow: 0px 0px 0px; -moz-box-shadow: 0px 0px 0px; box-shadow: 0px 0px 0px;\n            }\n            .no-hover:hover {\n                opacity: 1;  \n                -webkit-box-shadow: 0px 0px 0px; -moz-box-shadow: 0px 0px 0px; box-shadow: 0px 0px 0px;\n            }\n\t\t</style"],[0,">\n<s"]],"start1":298,"start2":298,"length1":78,"length2":1895}]],"length":25558,"saved":false}
{"ts":1347855953444,"patch":[[{"diffs":[[0,"ipt "],[-1,"type=\"text/javascript\" >\nfunction loginSuccess() {\n    setTimeout(function(){window.location.reload(true);}, 1000);\n}\n    \nfunction login() {\n    var data = new Object();\n    data.user = prompt(\"Enter username\",\"\");\n    data.password = prompt(\"Enter password\",\"\");\n    $.ajax({\n       type: 'POST',\n       url: '/users/list/login',\n       data: data,\n       success: loginSuccess(),\n       dataType: 'json'\n    });\n}\n\nfunction logoutSuccess() {\n        setTimeout(function(){window.location.reload(true);}, 1000);\n    }\n\nfunction logout() {\n    $.ajax({\n       type: 'POST',\n       url: '/users/list/logout',\n       data: '',\n       success: logoutSuccess(),\n       dataType: 'json'\n    });\n}\n\nvar ddpp=null;\nfunction getScrollXY() {\n\t  var scrOfX = 0, scrOfY = 0;\n\t  if( typeof( window.pageYOffset ) == 'number' ) {\n\t    //Netscape compliant\n\t    scrOfY = window.pageYOffset;\n\t    scrOfX = window.pageXOffset;\n\t  } else if( document.body && ( document.body.scrollLeft || document.body.scrollTop ) ) {\n\t    //DOM compliant\n\t    scrOfY = document.body.scrollTop;\n\t    scrOfX = document.body.scrollLeft;\n\t  } else if( document.documentElement && ( document.documentElement.scrollLeft || document.documentElement.scrollTop ) ) {\n\t    //IE6 standards compliant mode\n\t    scrOfY = document.documentElement.scrollTop;\n\t    scrOfX = document.documentElement.scrollLeft;\n\t  }\n\t  return [ scrOfX, scrOfY ];\n\t}\nfunction get_cookie(Name) {\n\t  var search = Name + \"=\"\n\t  var returnvalue = \"\";\n\t  if (document.cookie.length > 0) {\n\t    offset = document.cookie.indexOf(search)\n\t    // if cookie exists\n\t    if (offset != -1) { \n\t      offset += search.length\n\t      // set index of beginning of value\n\t      end = document.cookie.indexOf(\";\", offset);\n\t      // set index of end of cookie value\n\t      if (end == -1) end = document.cookie.length;\n\t      returnvalue=unescape(document.cookie.substring(offset, end))\n\t      }\n\t   }\n\t  return returnvalue;\n\t}\nfunction pageScroll() {\n\tvar scrollY = get_cookie(\"scrollY\");\n\tvar scrollX = get_cookie(\"scrollX\");\n\twindow.scrollBy(scrollX,scrollY); \n}\n\nfunction setPageScroll() {\n\tvar exp = new Date( );\n\tvar nowPlus = exp.getTime( ) + (5000);\n\texp.setTime(nowPlus);\n\tdocument.cookie = \"scrollY=\" + getScrollXY()[1] + \"; expires=\" + exp.toGMTString( );\n\tdocument.cookie = \"scrollX=\" + getScrollXY()[0] + \"; expires=\" + exp.toGMTString( );\n}\nfunction showUpload() {\n\tdocument.getElementById(\"upload\").style.visibility = 'visible';\n\tif(!document.getElementById(\"overlay\")){\n\t\tx = document.getElementsByTagName(\"img\");\n\t\tfor (i=0;i<x.length;i++)\n\t\t{\n\t\t\tx[i].style.visibility = 'hidden';\n\t\t}\n\t} else {\n\t\tdocument.getElementById(\"overlay\").style.visibility = 'visible';\n\t}\n}\nfunction hideUpload() {\n\tdocument.getElementById(\"upload\").style.visibility = 'hidden';\n\tif(!document.getElementById(\"overlay\")){\n\t\tx = document.getElementsByTagName(\"img\");\n\t\tfor (i=0;i<x.length;i++)\n\t\t{\n\t\t\tx[i].style.visibility = 'visible';\n\t\t}\n\t} else {\n\tdocument.getElementById(\"overlay\").style.visibility = 'hidden';\n\t}\n}\nfunction showLinkUpload() {\n\tdocument.getElementById(\"uploadLink\").style.visibility = 'visible';\n\tif(!document.getElementById(\"overlay\")){\n\t\tx = document.getElementsByTagName(\"img\");\n\t\tfor (i=0;i<x.length;i++)\n\t\t{\n\t\t\tx[i].style.visibility = 'hidden';\n\t\t}\n\t} else {\n\t\tdocument.getElementById(\"overlay\").style.visibility = 'visible';\n\t}\n}\nfunction hideLinkUpload() {\n\tdocument.getElementById(\"uploadLink\").style.visibility = 'hidden';\n\tif(!document.getElementById(\"overlay\")){\n\t\tx = document.getElementsByTagName(\"img\");\n\t\tfor (i=0;i<x.length;i++)\n\t\t{\n\t\t\tx[i].style.visibility = 'visible';\n\t\t}\n\t} else {\n\tdocument.getElementById(\"overlay\").style.visibility = 'hidden';\n\t}\n}\n"],[1,"src=\"/js/functions.js\">"],[0,"</sc"]],"start1":2195,"start2":2195,"length1":3706,"length2":31}]],"length":21883,"saved":false}
{"ts":1347856176039,"patch":[[{"diffs":[[0,"  }\n"],[-1,"\t\t</style>\n<script src=\"/js/functions.js\"></script>\n<style type=\"text/css\">\n"],[0,".dra"]],"start1":2176,"start2":2176,"length1":84,"length2":8},{"diffs":[[0,"}\n//img {\n//"],[-1,"\t"],[1,"    "],[0,"-moz-box-sha"]],"start1":2206,"start2":2206,"length1":25,"length2":28},{"diffs":[[0,"\n}\n\t"],[-1,"</style>\n\t\n\t<script type=\"text/javascript\">\n\tfunction getWindowSize() {\n         var viewportwidth;\n         var viewportheight;\n        \n         if (typeof window.innerWidth != 'undefined')\n         {\n              viewportwidth = window.innerWidth;\n              viewportheight = window.innerHeight;\n         } else if (typeof document.documentElement != 'undefined'\n             && typeof document.documentElement.clientWidth !=\n             'undefined' && document.documentElement.clientWidth != 0)\n         {\n               viewportwidth = document.documentElement.clientWidth;\n               viewportheight = document.documentElement.clientHeight;\n         } else {\n               viewportwidth = document.getElementsByTagName('body')[0].clientWidth;\n               viewportheight = document.getElementsByTagName('body')[0].clientHeight\n         }\n         if(viewportwidth==0) {\n        \t viewportwidth = document.getElementsByTagName('body')[0].clientWidth;}\n         if(viewportheight==0) {\n             viewportheight = document.getElementsByTagName('body')[0].clientWidth;}\n         return [viewportwidth, viewportheight];\n\t}\n</script>\n<script type=\"text/javascript\">\nfunction resizeFirst() {\n\tx = document.getElementsByTagName(\"img\");\n\tvar viewportwidth = getWindowSize()[0];\n\tfor (i=0;i<x.length;i++)\n\t{\n\t\tx[i].style.width = x[i].width*(viewportwidth/1366)+\"px\";\n\t\tx[i].style.height = x[i].height*(viewportwidth/1366)+\"px\";\n\t\tx[i].style.left = parseInt(x[i].style.left)*(viewportwidth/1366)+\"px\";\n\t\tx[i].style.top = parseInt(x[i].style.top)*(viewportwidth/1366)+\"px\";\n\t}\n}\n\nfunction showDelete() {\n\tx = document.getElementsByTagName(\"img\");\n\tfor (i=0;i<x.length;i++)\n\t{\n\tif(x[i].name.split(\"jpgdivNI\")[1]==\"mG\" || x[i].name.split(\"pngdivNI\")[1]==\"mG\") {\n\tvar element = document.createElement(\"input\");\n\telement.setAttribute(\"type\",\"button\");\n\telement.setAttribute(\"value\",\"x\");\n\telement.setAttribute(\"onclick\",\"javascript:deleteImage(this)\");\n\telement.onclick = function() {deleteImage(this);};\n\telement.style.position = 'absolute';\n\telement.style.left = '0px';\n\telement.style.top = '0px';\n\tx[i].parentNode.appendChild(element);\n\t}\n}\n\tdocument.getElementById(\"adminDeleteButton\").onclick = hideDelete;\n\tdocument.getElementById(\"adminDeleteButton\").value = \"Done deleting\";\n\t\n}\n\nfunction hideDelete() {\n\tx = document.getElementsByTagName(\"img\");\n\tfor (i=0;i<x.length;i++)\n\t{\n\t\tif(x[i].name.split(\"jpgdivNI\")[1]==\"mG\" || x[i].name.split(\"pngdivNI\")[1]==\"mG\") {\n\t\t\tx[i].parentNode.removeChild(x[i].parentNode.lastChild);\n\t\t}\n    }\n\tdocument.getElementById(\"adminDeleteButton\").onclick = showDelete;\n\tdocument.getElementById(\"adminDeleteButton\").value = \"Delete image\";\n}\n\n function fullScreen(el) {\n\t if(document.getElementById(el.src.split(\"/\").pop().replace('-small','').replace('-medium','').replace('-large','')+\"link\")) {\n\t\t var linkObj = document.getElementById(el.src.split(\"/\").pop().replace('-small','').replace('-medium','').replace('-large','')+\"link\");\n         var t = '';\n\t\t if(linkObj.innerText){\n\t\t\t t = linkObj.innerText;\n\t\t } else if(linkObj.textContent) {\n\t\t\t t = linkObj.textContent;\n\t\t }\n         if(t.indexOf('javascript:')==-1) {\n             window.location = t;\n         } else {\n             eval(t);\n         }\n\t } else {\n        document.getElementById(\"fullScreenImage\").src = el.src;\n        var ih = document.getElementById(el.id).firstChild.height;\n        var iw = document.getElementById(el.id).firstChild.width;\n        document.getElementById(\"fullScreenImage\").style.width = getWindowSize()[0] + 'px';\n           var rs = getWindowSize()[1]/getWindowSize()[0];\n           var ri = ih/iw;\n           var rsi = rs/ri;\n           if(rsi>1) {\n               document.getElementById(\"fullScreenImg\").style.width = 0.9*getWindowSize()[0] + 'px';\n               document.getElementById(\"fullScreenImg\").style.left = 0.05*getWindowSize()[0] + 'px';\n               document.getElementById(\"fullScreenImage\").style.width = 0.9*getWindowSize()[0] + 'px';\n           } else {\n               var rsic = rsi*0.9*getWindowSize()[0];\n               document.getElementById(\"fullScreenImg\").style.width = rsic + 'px';\n               document.getElementById(\"fullScreenImg\").style.left = (getWindowSize()[0]-rsic)/2 + 'px';\n               document.getElementById(\"fullScreenImage\").style.width = rsic + 'px';\n           }\n\n       if(document.getElementById(\"overlay\")){\n       \t\tdocument.getElementById(\"overlay\").style.visibility = 'visible';\n       }\n       if(document.getElementById(\"fullScreenImage\").complete) {\n           document.getElementById(\"closeFullscreenButton\").style.visibility = 'visible';\n           document.getElementById(\"fullScreenImg\").style.visibility = 'visible';\n           document.getElementById(\"fullScreenImage\").style.visibility = 'visible';\n       }\n       document.getElementById(\"fullScreenImage\").onload = function() {\n               document.getElementById(\"closeFullscreenButton\").style.visibility = 'visible';\n               document.getElementById(\"fullScreenImg\").style.visibility = 'visible';\n               document.getElementById(\"fullScreenImage\").style.visibility = 'visible';\n       }\n       var hiResImg = new Image();\n       hiResImg.src = el.src.substring(0,el.src.lastIndexOf('-')) + '-large' + el.src.substring(el.src.lastIndexOf('.'));\n       if(hiResImg.complete) {\n           if((document.getElementById(\"fullScreenImage\").style.visibility=='visible') && (document.getElementById(\"fullScreenImage\").src==el.src)) {\n                document.getElementById(\"fullScreenImage\").src = hiResImg.src;\n           }\n       }\n       hiResImg.onload = function() {\n           if((document.getElementById(\"fullScreenImage\").style.visibility=='visible') && (document.getElementById(\"fullScreenImage\").src==el.src)) {\n               document.getElementById(\"fullScreenImage\").src = hiResImg.src;\n           }\n       }\n        ddpp = dd;\n        dd.obj=null;\n        dd.evt=function(d_e) {};\n     }\n}\n\nfunction closeFullscreen() {\n    dd=ddpp;\n    dd.evt = function(d_e)\n    {\n        this.but = (this.e = d_e || window.event).which || this.e.button || 0;\n        this.button = (this.e.type == 'mousedown')? this.but\n    \t\t: (dd.e && dd.e.button)? dd.e.button\n    \t\t: 0;\n    \tthis.src = this.e.target || this.e.srcElement || null;\n    \tthis.src.tag = (\"\" + (this.src.tagName || this.src)).toLowerCase();\n    \tthis.x = dd.Int(this.e.pageX || this.e.clientX || 0);\n    \tthis.y = dd.Int(this.e.pageY || this.e.clientY || 0);\n    \tif(dd.ie)\n    \t{\n    \t\tthis.x += dd.getScrollX() - (dd.ie && !dd.iemac)*1;\n    \t\tthis.y += dd.getScrollY() - (dd.ie && !dd.iemac)*1;\n    \t}\n    \t//this.modifKey = this.e.modifiers? this.e.modifiers&Event.SHIFT_MASK : (this.e.shiftKey || false);\n    \tif((this.but==3) || (this.but==2)){\n    \t\tthis.modifKey = true;\n    \t} else {\n    \t\tthis.modifKey = false;\n    \t}\n    };\n\tdocument.getElementById(\"fullScreenImage\").style.visibility = 'hidden';\n   document.getElementById(\"fullScreenImg\").style.visibility = 'hidden';\n   if(document.getElementById(\"overlay\")){\n   \t\tdocument.getElementById(\"overlay\").style.visibility = 'hidden';\n   }\n   document.getElementById(\"closeFullscreenButton\").style.visibility = 'hidden';\n}\n\nfunction deleteImage(el) {\n\tsaveToLocalStorage();\n\tsetPageScroll();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"post\" ;\n  myForm.action = \"/<%=data.params.user + '/' + data.params.gallery%>/photos/delete\";\n    var myInput = document.createElement(\"input\") ;\n    myInput.setAttribute(\"name\", \"file\") ;\n    myInput.setAttribute(\"value\", el.parentNode.id.substring(0,el.parentNode.id.length-3));\n    myForm.appendChild(myInput) ;\n    var myInput5 = document.createElement(\"input\") ;\n    myInput5.setAttribute(\"name\", \"deleteIsOn\") ;\n    myInput5.setAttribute(\"value\", \"false\");\n    myForm.appendChild(myInput5) ;\n  document.body.appendChild(myForm) ;\n  myForm.submit() ;\n  document.body.removeChild(myForm) ;\n}\n\nfunction success() {\n    \n}\nfunction saveCoords() {\n    saveToLocalStorage();\n    setPageScroll();\n    \n    var data = new Object();\n    data.side = dd.obj.x*(1366/getWindowSize()[0]);\n    data.top = dd.obj.y*(1366/getWindowSize()[0]);\n    data.image = dd.obj.name;\n    data.width = dd.obj.w*(1366/getWindowSize()[0]);\n    data.height = dd.obj.h*(1366/getWindowSize()[0]);\n    data.deleteIsOn = '';\n    data.z = dd.z;\n    $.ajax({\n      type: 'POST',\n      url: '/<%=data.params.user + '/' + data.params.gallery%>/upsert',\n      data: data,\n      success: success(),\n      dataType: 'json'\n    });\n}\n\nfunction updateLink(el) {\n    saveToLocalStorage();\n\tsetPageScroll();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"post\" ;\n  myForm.action = \"/<%=data.params.user + '/' + data.params.gallery%>/updateLink\";\n    var myInput = document.createElement(\"input\") ;\n    myInput.setAttribute(\"name\", \"file\") ;\n    myInput.setAttribute(\"value\", el.parentNode.id.substring(0,el.parentNode.id.length-3));\n    myForm.appendChild(myInput) ;\n    var myInput5 = document.createElement(\"input\") ;\n    myInput5.setAttribute(\"name\", \"link\") ;\n    myInput5.setAttribute(\"value\", prompt(\"Link\", \"\"));\n    myForm.appendChild(myInput5) ;\n  document.body.appendChild(myForm) ;\n  myForm.submit() ;\n  document.body.removeChild(myForm) ;\n}\n\nfunction hideLinkUpdate() {\n    x = document.getElementsByTagName(\"img\");\n\tfor (i=0;i<x.length;i++)\n\t{\n\t\tif(x[i].name.split(\"jpgdivNI\")[1]==\"mG\" || x[i].name.split(\"pngdivNI\")[1]==\"mG\") {\n\t\t\tx[i].parentNode.removeChild(x[i].parentNode.lastChild);\n\t\t}\n    }\n\tdocument.getElementById(\"updateLinkButton\").onclick = showLinkUpdate;\n\tdocument.getElementById(\"updateLinkButton\").value = \"Update Image Link\";\n}\n\nfunction showLinkUpdate() {\n    x = document.getElementsByTagName(\"img\");\n\tfor (i=0;i<x.length;i++)\n\t{\n    \tif(x[i].name.split(\"jpgdivNI\")[1]==\"mG\" || x[i].name.split(\"pngdivNI\")[1]==\"mG\") {\n    \tvar element = document.createElement(\"input\");\n    \telement.setAttribute(\"type\",\"button\");\n    \telement.setAttribute(\"value\",\"This\");\n    \telement.setAttribute(\"onclick\",\"javascript:updateLink(this)\");\n    \telement.onclick = function() {updateLink(this);};\n    \telement.style.position = 'absolute';\n    \telement.style.left = '0px';\n    \telement.style.top = '0px';\n    \tx[i].parentNode.appendChild(element);\n    \t}\n    }\n\tdocument.getElementById(\"updateLinkButton\").onclick = hideLinkUpdate;\n\tdocument.getElementById(\"updateLinkButton\").value = \"Cancel\";\n\t\n}\n\nfunction goHome() {\n  saveToLocalStorage();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"get\" ;\n  myForm.action = '/<%=data.params.user%>/galleries/list';\n  document.body.appendChild(myForm);\n  myForm.submit();\n  document.body.removeChild(myForm);\n}\nfunction shortClick(src) {\n\talert(src);\n}\nfunction fullScreenButton(el) {\n\tvar fullScreenButton = document.createElement(\"img\");\n\tfullScreenButton.setAttribute(\"id\", \"fullScreenButton\");\n\tfullScreenButton.setAttribute(\"src\",\"/images/upArrow.png\");\n\tel.parentNode.appendChild(fullScreenButton);\n\tfullScreenButton = document.getElementById(\"fullScreenButton\");\n\tfullScreenButton.style.position = 'absolute';\n\tfullScreenButton.style.left = '0px';\n\tfullScreenButton.style.top = '0px';\n\tfullScreenButton.style.width = el.width*0.05+\"px\";\n\tfullScreenButton.style.height = fullScreenButton.style.width;\n\tfullScreenButton.style.visibility = 'visible';\n\t\n\tvar fullScreenButton2 = document.createElement(\"img\");\n\tfullScreenButton2.setAttribute(\"id\", \"fullScreenButton2\");\n\tfullScreenButton2.setAttribute(\"src\",\"/images/downArrow.png\");\n\tel.parentNode.appendChild(fullScreenButton2);\n\tfullScreenButton2 = document.getElementById(\"fullScreenButton2\");\n\tfullScreenButton2.style.position = 'absolute';\n\tfullScreenButton2.style.right = '0px';\n\tfullScreenButton2.style.bottom = '0px';\n\tfullScreenButton2.style.width = el.width*0.05+\"px\";\n\tfullScreenButton2.style.height = fullScreenButton2.style.width;\n\tfullScreenButton2.style.visibility = 'visible';\n}\nfunction deleteFullScreenButton(el) {\n\tvar fullScreenButton = document.getElementById(\"fullScreenButton\");\n\tfullScreenButton.parentNode.removeChild(fullScreenButton);\n\tvar fullScreenButton2 = document.getElementById(\"fullScreenButton2\");\n\tfullScreenButton2.parentNode.removeChild(fullScreenButton2);\n}\n</script>\n\t"],[1,"\t</style>\n<script src=\"/js/functions.js\"></script>"],[0,"\n</h"]],"start1":3033,"start2":3033,"length1":12266,"length2":58}]],"length":9602,"saved":false}
{"contributors":[],"silentsave":false,"ts":1347918713793,"patch":[[{"diffs":[[0,"script>\n"],[1,"<script type=\"text/javascript\">\nfunction deleteImage(el) {\n    saveToLocalStorage();\n\tsetPageScroll();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"post\" ;\n  myForm.action = \"/<%=data.params.user + '/' + data.params.gallery%>/photos/delete\";\n    var myInput = document.createElement(\"input\") ;\n    myInput.setAttribute(\"name\", \"file\") ;\n    myInput.setAttribute(\"value\", el.parentNode.id.substring(0,el.parentNode.id.length-3));\n    myForm.appendChild(myInput) ;\n    var myInput5 = document.createElement(\"input\") ;\n    myInput5.setAttribute(\"name\", \"deleteIsOn\") ;\n    myInput5.setAttribute(\"value\", \"false\");\n    myForm.appendChild(myInput5) ;\n  document.body.appendChild(myForm) ;\n  myForm.submit() ;\n  document.body.removeChild(myForm) ;\n}\nfunction saveCoords() {\n    saveToLocalStorage();\n    setPageScroll();\n    \n    var data = new Object();\n    data.side = dd.obj.x*(1366/getWindowSize()[0]);\n    data.top = dd.obj.y*(1366/getWindowSize()[0]);\n    data.image = dd.obj.name;\n    data.width = dd.obj.w*(1366/getWindowSize()[0]);\n    data.height = dd.obj.h*(1366/getWindowSize()[0]);\n    data.deleteIsOn = '';\n    data.z = dd.z;\n    $.ajax({\n      type: 'POST',\n      url: '/<%=data.params.user + '/' + data.params.gallery%>/upsert',\n      data: data,\n      success: success(),\n      dataType: 'json'\n    });\n}\n\n</script>\n"],[0,"</head>\n"]],"start1":3080,"start2":3080,"length1":16,"length2":1362}]],"length":10948,"saved":false}
{"ts":1347918733172,"patch":[[{"diffs":[[0,"  });\n}\n"],[1,"function updateLink(el) {\n    saveToLocalStorage();\n    setPageScroll();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"post\" ;\n  myForm.action = \"/<%=data.params.user + '/' + data.params.gallery%>/updateLink\";\n    var myInput = document.createElement(\"input\") ;\n    myInput.setAttribute(\"name\", \"file\") ;\n    myInput.setAttribute(\"value\", el.parentNode.id.substring(0,el.parentNode.id.length-3));\n    myForm.appendChild(myInput) ;\n    var myInput5 = document.createElement(\"input\") ;\n    myInput5.setAttribute(\"name\", \"link\") ;\n    myInput5.setAttribute(\"value\", prompt(\"Link\", \"\"));\n    myForm.appendChild(myInput5) ;\n  document.body.appendChild(myForm) ;\n  myForm.submit() ;\n  document.body.removeChild(myForm) ;\n}"],[0,"\n</scrip"]],"start1":4415,"start2":4415,"length1":16,"length2":750}]],"length":11682,"saved":false}
{"ts":1347918762387,"patch":[[{"diffs":[[0,"rm) ;\n}\n"],[1,"function goHome() {\n  saveToLocalStorage();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"get\" ;\n  myForm.action = '/<%=data.params.user%>/galleries/list';\n  document.body.appendChild(myForm);\n  myForm.submit();\n  document.body.removeChild(myForm);\n}\n"],[0,"</script"]],"start1":5150,"start2":5150,"length1":16,"length2":285}]],"length":11951,"saved":false}
{"ts":1347919442692,"patch":[[{"diffs":[[0,";\n} %>\n\n"],[1,"<%\n    if(data.params.gallery=='galleries') {\n        var c = 0;\n        for(var i in data.galleries) {\n            var source = data.galleries[i][0];\n            if(source) source = source.source;\n            else source = \"\";\n            c++;\n%>\n            <a href=\"<%='/' + data.params.user + '/' + i%>\">\n                <img src=\"<%=source.split('.')[0]+'-small.'+source.split('.')[1]%>\" style=\"position:absolute;left:<%=300+250*(c % 3)%>px;top:<%=150+150*Math.floor((c-1)/3)%>px;width:210px;height:140px;\" />\n            </a>\n<%\n        }\n    }\n%>\n\n"],[0,"<script "]],"start1":9364,"start2":9364,"length1":16,"length2":571}]],"length":12506,"saved":false}
{"ts":1347919530156,"patch":[[{"diffs":[[0,"ext/javascript\">"],[1,"alert(\"<%data.params.gallery=='galleries'%>\");"],[0,"\nfunction setDra"]],"start1":9942,"start2":9942,"length1":32,"length2":78}]],"length":12552,"saved":false}
{"ts":1347919543442,"patch":[[{"diffs":[[0,".gallery"],[-1,"=='galleries'"],[0,"%>\");\nfu"]],"start1":9978,"start2":9978,"length1":29,"length2":16}]],"length":12539,"saved":false}
{"ts":1347919578793,"patch":[[{"diffs":[[0,"a.params"],[-1,".gallery"],[0,"%>\");\nfu"]],"start1":9970,"start2":9970,"length1":24,"length2":16}]],"length":12531,"saved":false}
{"ts":1347919594165,"patch":[[{"diffs":[[0,"lert(\"<%"],[1,"JSON.stringify("],[0,"data.par"]],"start1":9959,"start2":9959,"length1":16,"length2":31},{"diffs":[[0,"a.params"],[1,")"],[0,"%>\");\nfu"]],"start1":9985,"start2":9985,"length1":16,"length2":17}]],"length":12547,"saved":false}
{"ts":1347919727835,"patch":[[{"diffs":[[0,"pt\">"],[-1,"alert(\"<%JSON.stringify(data.params)%>\");"],[0,"\nfun"]],"start1":9954,"start2":9954,"length1":49,"length2":8}]],"length":12506,"saved":false}
{"ts":1347919851325,"patch":[[{"diffs":[[0,"')[1]%>\" style=\""],[1,"z-index:10000;"],[0,"position:absolut"]],"start1":9756,"start2":9756,"length1":32,"length2":46}]],"length":12520,"saved":false}
{"ts":1347921854316,"patch":[[{"diffs":[[0,"0px;"],[-1,"height:140px;"],[0,"\" />"]],"start1":9879,"start2":9879,"length1":21,"length2":8}]],"length":12507,"saved":false}
{"ts":1347921884777,"patch":[[{"diffs":[[0,"h:210px;"],[1,"height:140px;"],[0,"\" />\n   "]],"start1":9875,"start2":9875,"length1":16,"length2":29}]],"length":12520,"saved":false}
{"ts":1347922015085,"patch":[[{"diffs":[[0,"0px;"],[-1,"height:140px;"],[0,"\" />"]],"start1":9879,"start2":9879,"length1":21,"length2":8}]],"length":12507,"saved":false}
{"ts":1347922146032,"patch":[[{"diffs":[[0,"h:210px;"],[1,"height:140px;"],[0,"\" />\n   "]],"start1":9875,"start2":9875,"length1":16,"length2":29}]],"length":12520,"saved":false}
{"ts":1347922173464,"patch":[[{"diffs":[[0,"' + i%>\""],[1," width=\"200px\""],[0,">\n      "]],"start1":9671,"start2":9671,"length1":16,"length2":30},{"diffs":[[0,"0px;"],[-1,"height:140px;"],[0,"\" />"]],"start1":9893,"start2":9893,"length1":21,"length2":8}]],"length":12521,"saved":false}
{"ts":1347922321645,"patch":[[{"diffs":[[0,"i%>\""],[-1," width=\"200px\""],[0,">\n  "]],"start1":9675,"start2":9675,"length1":22,"length2":8},{"diffs":[[0,"h:210px;"],[1,"height:140px;"],[0,"\" />\n   "]],"start1":9875,"start2":9875,"length1":16,"length2":29}]],"length":12520,"saved":false}
{"ts":1347922348883,"patch":[[{"diffs":[[0,"')[1]%>\" style=\""],[1,"visibility:visible;"],[0,"z-index:10000;po"]],"start1":9756,"start2":9756,"length1":32,"length2":51},{"diffs":[[0,"0px;"],[-1,"height:140px;"],[0,"\" />"]],"start1":9898,"start2":9898,"length1":21,"length2":8}]],"length":12526,"saved":false}
{"ts":1347922997322,"patch":[[{"diffs":[[0,"le=\""],[-1,"visibility:visible;"],[0,"z-in"]],"start1":9768,"start2":9768,"length1":27,"length2":8},{"diffs":[[0,"h:210px;"],[1,"height:140px;"],[0,"\" />\n   "]],"start1":9875,"start2":9875,"length1":16,"length2":29}]],"length":12520,"saved":false}
{"ts":1347923035709,"patch":[[{"diffs":[[0,"0px;"],[-1,"height:140px;"],[0,"\" />"]],"start1":9879,"start2":9879,"length1":21,"length2":8}]],"length":12507,"saved":false}
{"ts":1347923055701,"patch":[[{"diffs":[[0,"    "],[-1,"-webkit-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); -moz-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); box-shadow: 0px 0px 5px rgba(255,255,255,0.8); "],[0,"\n   "]],"start1":1657,"start2":1657,"length1":162,"length2":8}]],"length":12353,"saved":false}
{"ts":1347923072004,"patch":[[{"diffs":[[0,"            "],[1,"-webkit-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); -moz-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); box-shadow: 0px 0px 5px rgba(255,255,255,0.8); "],[0,"\n           "]],"start1":1649,"start2":1649,"length1":24,"length2":178}]],"length":12507,"saved":false}
{"ts":1347923153688,"patch":[[{"diffs":[[0,"h:210px;"],[1,"height:140px;"],[0,"\" />\n   "]],"start1":9875,"start2":9875,"length1":16,"length2":29}]],"length":12520,"saved":false}
{"ts":1347923295557,"patch":[[{"diffs":[[0,"i%>\""],[-1,">\n                <img src=\"<%=source.split('.')[0]+'-small.'+source.split('.')[1]%>\" style=\""],[1," style=\"height:140px;overflow:hidden;visibility:visible;"],[0,"z-in"]],"start1":9675,"start2":9675,"length1":101,"length2":64},{"diffs":[[0,">px;"],[-1,"width:210px;height:14"],[1,"\">\n                <img src=\"<%=source.split('.')[0]+'-small.'+source.split('.')[1]%>\" style=\"width:21"],[0,"0px;"]],"start1":9830,"start2":9830,"length1":29,"length2":110}]],"length":12564,"saved":false}
{"ts":1347923340637,"patch":[[{"diffs":[[0,"dth:"],[-1,"2"],[0,"10"],[-1,"px;"],[1,"0%"],[0,"\" />"]],"start1":9930,"start2":9930,"length1":14,"length2":12}]],"length":12562,"saved":false}
{"ts":1347923376529,"patch":[[{"diffs":[[0,"=\"width:"],[1,"2"],[0,"10"],[-1,"0%"],[1,"px;"],[0,"\" />\n   "]],"start1":9926,"start2":9926,"length1":20,"length2":22}]],"length":12564,"saved":false}
{"ts":1347923399935,"patch":[[{"diffs":[[0,"visible;"],[1,"\">\n                <img src=\"<%=source.split('.')[0]+'-small.'+source.split('.')[1]%>\" style=\""],[0,"z-index:"]],"start1":9727,"start2":9727,"length1":16,"length2":110},{"diffs":[[0,">px;"],[-1,"\">\n                <img src=\"<%=source.split('.')[0]+'-small.'+source.split('.')[1]%>\" style=\""],[0,"widt"]],"start1":9924,"start2":9924,"length1":102,"length2":8}]],"length":12564,"saved":false}
{"ts":1347923428340,"patch":[[{"diffs":[[0," style=\""],[1,"width:210px;"],[0,"height:1"]],"start1":9679,"start2":9679,"length1":16,"length2":28}]],"length":12576,"saved":false}
{"ts":1347923447847,"patch":[[{"diffs":[[0,"visible;"],[1,"z-index:10000;position:absolute;"],[0,"\">\n     "]],"start1":9739,"start2":9739,"length1":16,"length2":48}]],"length":12608,"saved":false}
{"ts":1347923459311,"patch":[[{"diffs":[[0,"x:10000;"],[-1,"position:absolute;"],[0,"\">\n     "]],"start1":9753,"start2":9753,"length1":34,"length2":16}]],"length":12590,"saved":false}
{"ts":1347923888374,"patch":[[{"diffs":[[0,"%>\" "],[-1,"style=\"width:210px;height:140px;overflow:hidden;visibility:visible;z-index:10000;\""],[0,">\n  "]],"start1":9676,"start2":9676,"length1":90,"length2":8}]],"length":12508,"saved":false}
{"ts":1347923895663,"patch":[[{"diffs":[[0,"' + i%>\""],[-1," "],[0,">\n      "]],"start1":9671,"start2":9671,"length1":17,"length2":16}]],"length":12507,"saved":false}
{"ts":1347923904821,"patch":[[{"diffs":[[0,"h:210px;"],[1,"height:140px;"],[0,"\" />\n   "]],"start1":9875,"start2":9875,"length1":16,"length2":29}]],"length":12520,"saved":false}
{"ts":1347924474793,"patch":[[{"diffs":[[0,"        <img"],[1," alt=\"Empty Gallery\""],[0," src=\"<%=sou"]],"start1":9689,"start2":9689,"length1":24,"length2":44}]],"length":12540,"saved":false}
{"ts":1347925132635,"patch":[[{"diffs":[[0,"ries"],[-1,"/list"],[0,"';\n "]],"start1":5320,"start2":5320,"length1":13,"length2":8}]],"length":12535,"saved":false}
{"ts":1347925214480,"patch":[[{"diffs":[[0,"e=\"Home\" />\n"],[1,"  <input type=\"button\" onclick=\"newGallery();\" value=\"New Gallery\" />\n  <input type=\"button\" onclick=\"deleteGallery();\" value=\"Delete Gallery\" />\n  <input type=\"button\" onclick=\"login();\" value=\"Log In\" />\n  <input type=\"button\" onclick=\"logout();\" value=\"Log Out\" />\n  <input type=\"button\" onclick=\"signup();\" value=\"Sign Up\" />\n  <input type=\"button\" onclick=\"deleteAccount();\" value=\"Delete Account\" />\n"],[0,"  <input typ"]],"start1":5662,"start2":5662,"length1":24,"length2":430}]],"length":12941,"saved":false}
{"ts":1347925377528,"patch":[[{"diffs":[[0,"ck=\""],[-1,"window.open(document.URL.split('#')[0] + '/draw','_blank','location=0,width=900,height=600'"],[1,"drawImage("],[0,");\" "]],"start1":6264,"start2":6264,"length1":99,"length2":18}]],"length":12860,"saved":false}
{"ts":1347992436154,"patch":[[{"diffs":[[0,"  }\n%>\n\n"],[1,"<%\n    if((data.params.gallery=='users') && (data.params.user=='home')) {\n        var c = 0;\n        for(var i in data.users) {\n            c++;\n%>\n            <a href=\"<%='/' + data.users[i] + '/galleries'%>\">\n                <img alt=\"<%data.users[i]%>\" src=\"\" style=\"z-index:100000;position:absolute;left:<%=300+250*(c % 3)%>px;top:<%=150+150*Math.floor((c-1)/3)%>px;width:210px;height:140px;\" />\n            </a>\n<%\n        }\n    }\n%>\n\n"],[0,"<script "]],"start1":10273,"start2":10273,"length1":16,"length2":456}]],"length":13300,"saved":false}
{"ts":1347993363042,"patch":[[{"diffs":[[0,"\n\n<%\n    if("],[1,"("],[0,"data.params."]],"start1":9690,"start2":9690,"length1":24,"length2":25},{"diffs":[[0,"lery"],[-1,"=='galleries'"],[1,"!='users') && (data.params.user=='home')"],[0,") {\n"]],"start1":9718,"start2":9718,"length1":21,"length2":48},{"diffs":[[0,"-index:10000"],[1,"0"],[0,";position:ab"]],"start1":10141,"start2":10141,"length1":24,"length2":25},{"diffs":[[0,"  <a href=\"<%='/"],[1,"home/"],[0,"' + data.users[i"]],"start1":10468,"start2":10468,"length1":32,"length2":37},{"diffs":[[0,"s[i]"],[-1," + '/galleries'"],[0,"%>\">"]],"start1":10502,"start2":10502,"length1":23,"length2":8}]],"length":13319,"saved":false}
{"ts":1347994127872,"patch":[[{"diffs":[[0,"ams."],[-1,"gallery!='users"],[1,"user=='home"],[0,"') &"]],"start1":9711,"start2":9711,"length1":23,"length2":19},{"diffs":[[0,"data.params."],[-1,"user=='home"],[1,"gallery!='users"],[0,"')) {\n      "]],"start1":9733,"start2":9733,"length1":35,"length2":39},{"diffs":[[0,"ams."],[-1,"gall"],[1,"us"],[0,"er"],[-1,"y"],[0,"=='"],[-1,"users"],[1,"home"],[0,"') &"]],"start1":10329,"start2":10329,"length1":23,"length2":19},{"diffs":[[0,".params."],[-1,"us"],[1,"gall"],[0,"er"],[1,"y"],[0,"=='"],[-1,"home"],[1,"users"],[0,"')) {\n  "]],"start1":10355,"start2":10355,"length1":27,"length2":31}]],"length":13319,"saved":false}
{"ts":1347994143904,"patch":[[{"diffs":[[0,"      var c = 0;"],[1," %>ha<%"],[0,"\n        for(var"]],"start1":10386,"start2":10386,"length1":32,"length2":39}]],"length":13326,"saved":false}
{"ts":1347994328421,"patch":[[{"diffs":[[0,"r c = 0;"],[1," %>ha<%"],[0,"\n       "]],"start1":9776,"start2":9776,"length1":16,"length2":23},{"diffs":[[0,"      var c = 0;"],[-1," %>ha<%"],[0,"\n        for(var"]],"start1":10393,"start2":10393,"length1":39,"length2":32}]],"length":13326,"saved":false}
{"ts":1347995778325,"patch":[[{"diffs":[[0," + data.params.u"],[-1,"ser"],[0," + '/' + i%>\">\n "]],"start1":10002,"start2":10002,"length1":35,"length2":32}]],"length":13323,"saved":false}
{"contributors":[],"silentsave":false,"ts":1348002996738,"patch":[[{"diffs":[[0," alt=\"<%"],[1,"=data.users[i]%>\" title=\"<%="],[0,"data.use"]],"start1":10535,"start2":10535,"length1":16,"length2":44}]],"length":13351,"saved":false}
{"ts":1348003236730,"patch":[[{"diffs":[[0," \n            }\n"],[1,"            img[title] {\n                font-size: 4em;\n            }\n"],[0,"            .no-"]],"start1":1814,"start2":1814,"length1":32,"length2":103}]],"length":13422,"saved":false}
{"ts":1348003283675,"patch":[[{"diffs":[[0,"img "],[-1,"alt=\"Empty Gallery"],[1,"title=\"<%=i%>"],[0,"\" sr"]],"start1":10121,"start2":10121,"length1":26,"length2":21}]],"length":13417,"saved":false}
{"ts":1348003929842,"patch":[[{"diffs":[[0,"tyle=\"z-index:10"],[-1,"0000"],[0,";position:absolu"]],"start1":10204,"start2":10204,"length1":36,"length2":32},{"diffs":[[0,"index:10"],[-1,"0000"],[0,";positio"]],"start1":10666,"start2":10666,"length1":20,"length2":16}]],"length":13409,"saved":false}
{"ts":1348004259493,"patch":[[{"diffs":[[0,"= '/"],[-1,"<%=data.params.user%>/gallerie"],[1,"home/user"],[0,"s';\n"]],"start1":5360,"start2":5360,"length1":38,"length2":17}]],"length":13388,"saved":false}
{"ts":1348004354671,"patch":[[{"diffs":[[0,"'/' + i%>\">\n"],[1,"            <!--\n"],[0,"            "]],"start1":10071,"start2":10071,"length1":24,"length2":41},{"diffs":[[0,"ight:140px;\" />\n"],[1,"            -->\n                <img title=\"<%=i%>\" src=\"\" style=\"z-index:10;position:absolute;left:<%=300+250*(c % 3)%>px;top:<%=150+150*Math.floor((c-1)/3)%>px;width:210px;height:140px;\" />\n"],[0,"            </a>"]],"start1":10316,"start2":10316,"length1":32,"length2":224}]],"length":13597,"saved":false}
{"ts":1348004595905,"patch":[[{"diffs":[[0,"e=\"<%=i%>\" src=\""],[1,"<%=source.split('.')[0]+'-small.'+source.split('.')[1]%>\"\n                    onMouseOver=\"var osrc=this.src; this.src=''\" onMouseOut=\"this.src=osrc"],[0,"\" style=\"z-index"]],"start1":10373,"start2":10373,"length1":32,"length2":180}]],"length":13745,"saved":false}
{"ts":1348004607270,"patch":[[{"diffs":[[0,"er=\""],[-1,"var osrc=this.src; "],[0,"this"]],"start1":10476,"start2":10476,"length1":27,"length2":8}]],"length":13726,"saved":false}
{"ts":1348004660364,"patch":[[{"diffs":[[0,"')[1]%>\""],[-1,"\n                   "],[0," onMouse"]],"start1":10438,"start2":10438,"length1":36,"length2":16},{"diffs":[[0,"=''\""],[-1," onMouseOut=\"this.src=osrc\""],[0," sty"]],"start1":10468,"start2":10468,"length1":35,"length2":8}]],"length":13679,"saved":false}
{"ts":1348004678168,"patch":[[{"diffs":[[0,"er=\""],[-1,"this.src=''"],[1,"alert('hey');"],[0,"\" st"]],"start1":10456,"start2":10456,"length1":19,"length2":21}]],"length":13681,"saved":false}
{"ts":1348004684986,"patch":[[{"diffs":[[0,"t('hey')"],[-1,";"],[0,"\" style="]],"start1":10464,"start2":10464,"length1":17,"length2":16}]],"length":13680,"saved":false}
{"ts":1348004701832,"patch":[[{"diffs":[[0,"er=\""],[-1,"alert('hey')"],[1,"this.src='f';"],[0,"\" st"]],"start1":10456,"start2":10456,"length1":20,"length2":21}]],"length":13681,"saved":false}
{"ts":1348004763292,"patch":[[{"diffs":[[0,"er=\""],[1,"alert("],[0,"this.src"],[-1,"='f'"],[1,")"],[0,";\" s"]],"start1":10456,"start2":10456,"length1":20,"length2":23}]],"length":13684,"saved":false}
{"ts":1348004927259,"patch":[[{"diffs":[[0,"er=\""],[-1,"alert(this.src"],[1,"$(this).attr('src', ''"],[0,");\" "]],"start1":10456,"start2":10456,"length1":22,"length2":30}]],"length":13692,"saved":false}
{"ts":1348004966642,"patch":[[{"diffs":[[0,"is)."],[-1,"attr('src', '');"],[1,"remove"],[0,"\" st"]],"start1":10464,"start2":10464,"length1":24,"length2":14}]],"length":13682,"saved":false}
{"ts":1348005027248,"patch":[[{"diffs":[[0,"]%>\""],[-1," onMouseOver=\"$(this).remove\""],[0," sty"]],"start1":10442,"start2":10442,"length1":37,"length2":8}]],"length":13653,"saved":false}
{"ts":1348005039404,"patch":[[{"diffs":[[0,"rc=\""],[-1,"<%=source.split('.')[0]+'-small.'+source.split('.')[1]%>"],[0,"\" st"]],"start1":10385,"start2":10385,"length1":64,"length2":8}]],"length":13597,"saved":false}
{"ts":1348005131474,"patch":[[{"diffs":[[0,"e=\"<%=i%>\" src=\""],[1,"<%=source.split('.')[0]+'-small.'+source.split('.')[1]%>"],[0,"\" style=\"z-index"]],"start1":10373,"start2":10373,"length1":32,"length2":88}]],"length":13653,"saved":false}
{"ts":1348005286192,"patch":[[{"diffs":[[0,"orm);\n}\n"],[1,"$(\"img\").hover(\n  function () {\n      alert('hey');\n    $(this).src=\"\";\n  }, \n  function () {\n    $(this).src=\"\";\n  }\n);\n"],[0,"</script"]],"start1":5464,"start2":5464,"length1":16,"length2":137}]],"length":13774,"saved":false}
{"ts":1348005462427,"patch":[[{"diffs":[[0,");\n}\n$(\""],[1,"."],[0,"img\").ho"]],"start1":5467,"start2":5467,"length1":16,"length2":17}]],"length":13775,"saved":false}
{"ts":1348005501826,"patch":[[{"diffs":[[0,"}\n$("],[-1,"\".img\").hover(\n  function () {\n      alert('hey');\n    $(this).src=\"\";\n  }, \n  "],[1,"document).ready("],[0,"function"],[-1," "],[0,"()"],[-1," "],[0,"{\n  "],[-1,"  $(this).src=\"\";\n  }\n"],[1,"$('img').imghover();\n}"],[0,");\n<"]],"start1":5470,"start2":5470,"length1":125,"length2":60}]],"length":13710,"saved":false}
{"ts":1348005537460,"patch":[[{"diffs":[[0,"  $("],[-1,"'img'"],[1,"\".img\""],[0,")."],[-1,"img"],[0,"hover("],[1,"\n      function () {\n          alert('hey');\n        $(this).src=\"\";\n      }, \n      function () {\n        $(this).src=\"\";\n      }\n    "],[0,");\n}"]],"start1":5502,"start2":5502,"length1":24,"length2":157}]],"length":13843,"saved":false}
{"ts":1348005550840,"patch":[[{"diffs":[[0,"){\n  $(\""],[-1,"."],[0,"img\").ho"]],"start1":5499,"start2":5499,"length1":17,"length2":16}]],"length":13842,"saved":false}
{"ts":1348005559154,"patch":[[{"diffs":[[0,") {\n"],[-1,"          alert('hey');\n"],[0,"    "]],"start1":5536,"start2":5536,"length1":32,"length2":8}]],"length":13818,"saved":false}
{"ts":1348005573033,"patch":[[{"diffs":[[0,"   $(this).src=\""],[1,"http://www.google.com"],[0,"\";\n      }, \n   "]],"start1":5545,"start2":5545,"length1":32,"length2":53}]],"length":13839,"saved":false}
{"ts":1348005586566,"patch":[[{"diffs":[[0,"is)."],[-1,"src=\"http://www.google.com\""],[1,"visibility='hidden'"],[0,";\n  "]],"start1":5552,"start2":5552,"length1":35,"length2":27}]],"length":13831,"saved":false}
{"ts":1348005598323,"patch":[[{"diffs":[[0,"$(this)."],[-1,"src=\"\""],[1,"visibility='hidden'"],[0,";\n      "]],"start1":5615,"start2":5615,"length1":22,"length2":35}]],"length":13844,"saved":false}
{"ts":1348005609287,"patch":[[{"diffs":[[0,"        $(this)."],[1,"style."],[0,"visibility='hidd"]],"start1":5540,"start2":5540,"length1":32,"length2":38},{"diffs":[[0,"$(this)."],[1,"style."],[0,"visibili"]],"start1":5621,"start2":5621,"length1":16,"length2":22}]],"length":13856,"saved":false}
{"ts":1348005620268,"patch":[[{"diffs":[[0,"        $(this)."],[-1,"style."],[0,"visibility='hidd"]],"start1":5540,"start2":5540,"length1":38,"length2":32},{"diffs":[[0,"is)."],[-1,"style."],[0,"visi"]],"start1":5619,"start2":5619,"length1":14,"length2":8}]],"length":13844,"saved":false}
{"ts":1348005633476,"patch":[[{"diffs":[[0,"  function () {\n"],[1,"          alert($(this).src);\n"],[0,"        $(this)."]],"start1":5524,"start2":5524,"length1":32,"length2":62}]],"length":13874,"saved":false}
{"ts":1348005656136,"patch":[[{"diffs":[[0,"($(this)"],[-1,".src"],[0,");\n     "]],"start1":5555,"start2":5555,"length1":20,"length2":16}]],"length":13870,"saved":false}
{"ts":1348005663174,"patch":[[{"diffs":[[0,"($(this)"],[1,".name"],[0,");\n     "]],"start1":5555,"start2":5555,"length1":16,"length2":21}]],"length":13875,"saved":false}
{"ts":1348005685116,"patch":[[{"diffs":[[0,"$(this)."],[-1,"name"],[1,"attr(\"src\")"],[0,");\n     "]],"start1":5556,"start2":5556,"length1":20,"length2":27}]],"length":13882,"saved":false}
{"ts":1348005706809,"patch":[[{"diffs":[[0,"$(this)."],[-1,"visibility='hidden'"],[1,"attr('src', '')"],[0,";\n      "]],"start1":5586,"start2":5586,"length1":35,"length2":31}]],"length":13878,"saved":false}
{"ts":1348005722616,"patch":[[{"diffs":[[0,") {\n"],[-1,"          alert($(this).attr(\"src\"));\n"],[0,"    "]],"start1":5536,"start2":5536,"length1":46,"length2":8},{"diffs":[[0,"src'"],[-1,", "],[1,")="],[0,"''"],[-1,")"],[0,";\n  "]],"start1":5562,"start2":5562,"length1":13,"length2":12}]],"length":13839,"saved":false}
{"ts":1348005738431,"patch":[[{"diffs":[[0,"src'"],[-1,")="],[1,", "],[0,"''"],[1,")"],[0,";\n  "]],"start1":5562,"start2":5562,"length1":12,"length2":13}]],"length":13840,"saved":false}
{"ts":1348005768494,"patch":[[{"diffs":[[0,"'src', '"],[1,"http://www.kidostore.com/images/uploads/P-SAM-rocket-blk.jpg"],[0,"');\n    "]],"start1":5561,"start2":5561,"length1":16,"length2":76}]],"length":13900,"saved":false}
{"ts":1348005783879,"patch":[[{"diffs":[[0,"', '"],[-1,"http://www.kidostore.com/images/uploads/P-SAM-rocket-blk.jpg"],[0,"');\n"]],"start1":5565,"start2":5565,"length1":68,"length2":8},{"diffs":[[0,"is)."],[-1,"visibility='hidden'"],[1,"attr('src', '')"],[0,";\n  "]],"start1":5615,"start2":5615,"length1":27,"length2":23}]],"length":13836,"saved":false}
{"ts":1348005807712,"patch":[[{"diffs":[[0,"s).attr('src', '"],[1,"http://www.kidostore.com/images/uploads/P-SAM-rocket-blk.jpg"],[0,"');\n      }\n    "]],"start1":5616,"start2":5616,"length1":32,"length2":92}]],"length":13896,"saved":false}
{"ts":1348005835540,"patch":[[{"diffs":[[0,"g\")."],[-1,"hover(\n      function () {\n        $(this).attr('src', '');\n      }, \n      function () {\n        $(this).attr('src', 'http://www.kidostore.com/images/uploads/P-SAM-rocket-blk.jpg"],[1,"onmouseover(\n      function () {\n        $(this).attr('src', '"],[0,"');\n"]],"start1":5509,"start2":5509,"length1":187,"length2":70}]],"length":13779,"saved":false}
{"ts":1348005846604,"patch":[[{"diffs":[[0,"'src', '"],[1,"http://www.kidostore.com/images/uploads/P-SAM-rocket-blk.jpg"],[0,"');\n    "]],"start1":5567,"start2":5567,"length1":16,"length2":76}]],"length":13839,"saved":false}
{"ts":1348005863219,"patch":[[{"diffs":[[0,"(\"img\")."],[-1,"on"],[0,"mouseove"]],"start1":5505,"start2":5505,"length1":18,"length2":16}]],"length":13837,"saved":false}
{"ts":1348005874381,"patch":[[{"diffs":[[0,"', '"],[-1,"http://www.kidostore.com/images/uploads/P-SAM-rocket-blk.jpg"],[0,"');\n"]],"start1":5569,"start2":5569,"length1":68,"length2":8}]],"length":13777,"saved":false}
{"ts":1348005892711,"patch":[[{"diffs":[[0,"tr('"],[-1,"src', '"],[1,"visibility', 'hidden"],[0,"');\n"]],"start1":5562,"start2":5562,"length1":15,"length2":28}]],"length":13790,"saved":false}
{"ts":1348005915087,"patch":[[{"diffs":[[0,"is)."],[-1,"attr('visibility', 'hidden'"],[1,"remove("],[0,");\n "]],"start1":5556,"start2":5556,"length1":35,"length2":15}]],"length":13770,"saved":false}
{"ts":1348005927423,"patch":[[{"diffs":[[0,"$(this)."],[-1,"remov"],[1,"hid"],[0,"e();\n   "]],"start1":5552,"start2":5552,"length1":21,"length2":19}]],"length":13768,"saved":false}
{"ts":1348005961125,"patch":[[{"diffs":[[0,"     -->"],[1,"HELLO"],[0,"\n       "]],"start1":10454,"start2":10454,"length1":16,"length2":21}]],"length":13773,"saved":false}
{"ts":1348006088133,"patch":[[{"diffs":[[0,"$(this)."],[1,"find(':first-child')."],[0,"hide();\n"]],"start1":5552,"start2":5552,"length1":16,"length2":37}]],"length":13794,"saved":false}
{"ts":1348006108355,"patch":[[{"diffs":[[0,"is)."],[-1,"find(':first-child'"],[1,"parent("],[0,").hi"]],"start1":5556,"start2":5556,"length1":27,"length2":15}]],"length":13782,"saved":false}
{"ts":1348006194341,"patch":[[{"diffs":[[0,"    "],[1,"alert("],[0,"$(this)."],[-1,"parent().hide("],[1,"find(':first-child')"],[0,");\n "]],"start1":5548,"start2":5548,"length1":30,"length2":42}]],"length":13794,"saved":false}
{"ts":1348006202439,"patch":[[{"diffs":[[0,"-child')"],[1,".src"],[0,");\n     "]],"start1":5578,"start2":5578,"length1":16,"length2":20}]],"length":13798,"saved":false}
{"ts":1348006227326,"patch":[[{"diffs":[[0,"    "],[-1,"alert($(this).find(':first-child').src);"],[0,"\n   "]],"start1":5548,"start2":5548,"length1":48,"length2":8},{"diffs":[[0," -->"],[-1,"HELLO"],[0,"\n   "]],"start1":10443,"start2":10443,"length1":13,"length2":8}]],"length":13753,"saved":false}
{"ts":1348006246315,"patch":[[{"diffs":[[0,") {\n        "],[1,"$(this).append('hi');"],[0,"\n      }\n   "]],"start1":5540,"start2":5540,"length1":24,"length2":45}]],"length":13774,"saved":false}
{"ts":1348013172705,"patch":[[{"diffs":[[0,"    "],[-1,"$(this).append('hi');"],[0,"\n   "]],"start1":5548,"start2":5548,"length1":29,"length2":8}]],"length":13753,"saved":false}
{"ts":1348013181235,"patch":[[{"diffs":[[0,"rc=\""],[-1,"<%=source.split('.')[0]+'-small.'+source.split('.')[1]%>"],[0,"\" st"]],"start1":10485,"start2":10485,"length1":64,"length2":8}]],"length":13697,"saved":false}
{"contributors":[],"silentsave":false,"ts":1348706718063,"patch":[[{"diffs":[[0,"t-size: "],[-1,"4"],[1,"2"],[0,"em;\n    "]],"start1":1874,"start2":1874,"length1":17,"length2":17},{"diffs":[[0,"%>\");\n}\n"],[1,"//"],[0,"resizeFi"]],"start1":11239,"start2":11239,"length1":16,"length2":18},{"diffs":[[0,"ody>\n</html>"],[1,"\n"]],"start1":13687,"start2":13687,"length1":12,"length2":13}]],"length":13700,"saved":false}
{"ts":1348706758081,"patch":[[{"diffs":[[0,"%>\");\n}\n"],[-1,"//"],[0,"resizeFi"]],"start1":11239,"start2":11239,"length1":18,"length2":16}]],"length":13698,"saved":false}
{"ts":1348706923045,"patch":[[{"diffs":[[0,"   \t}\n\t    \t"],[1,"//"],[0,"img.src     "]],"start1":13576,"start2":13576,"length1":24,"length2":26}]],"length":13700,"saved":false}
{"ts":1348706959852,"patch":[[{"diffs":[[0,"}\n\t    \t"],[-1,"//"],[0,"img.src "]],"start1":13580,"start2":13580,"length1":18,"length2":16}]],"length":13698,"saved":false}
{"contributors":[],"silentsave":false,"ts":1348870657551,"patch":[[{"diffs":[[0,"\" src=\"\" style=\""],[1,"border:2px solid white;"],[0,"z-index:10;posit"]],"start1":10482,"start2":10482,"length1":32,"length2":55},{"diffs":[[0,"\" src=\"\" style=\""],[1,"border:2px solid white;"],[0,"z-index:10;posit"]],"start1":10959,"start2":10959,"length1":32,"length2":55}]],"length":13744,"saved":false}
{"ts":1348870729748,"patch":[[{"diffs":[[0,"            <img"],[1," alt=\"<%=i%>\""],[0," title=\"<%=i%>\" "]],"start1":10452,"start2":10452,"length1":32,"length2":45}]],"length":13757,"saved":false}
{"ts":1348870997630,"patch":[[{"diffs":[[0,";\n}\n"],[-1,"$(document).ready(function(){\n  $(\"img\").mouseover(\n      function () {\n        \n      }\n    );\n});\n"],[0,"</sc"]],"start1":5468,"start2":5468,"length1":108,"length2":8}]],"length":13657,"saved":false}
{"ts":1348871042091,"patch":[[{"diffs":[[0," #999;\n}"],[1,"\n\nul li img{\n    position:relative;\n}\n\n.title{\n    position:absolute;\n    z-index:1000;\n    top:50%;\n    bottom:50%;\n    right:50%;\n    left:50%;\n    width:100px;\n    border-radius:5px;\n    background:red;\n}"],[0,"\n\t\t</sty"]],"start1":3098,"start2":3098,"length1":16,"length2":223},{"diffs":[[0,"Form);\n}"],[1,"\n\n$('ul li img').hover(\n    function(){\n        $(this).css('opacity','.5');\n        var a = $(this).attr('alt');\n        $(this).parent().append('<div class=\"title\">' + a + '</div>');\n    },\n    function(){\n        $(this).css('opacity','1');\n        $(this).next().remove('.title');\n    }\n);"],[0,"\n</scrip"]],"start1":5670,"start2":5670,"length1":16,"length2":309}]],"length":14157,"saved":false}
{"ts":1348871091622,"patch":[[{"diffs":[[0,";\n}\n\n$('"],[-1,"ul li "],[0,"img').ho"]],"start1":5675,"start2":5675,"length1":22,"length2":16}]],"length":14151,"saved":false}
{"ts":1348871155047,"patch":[[{"diffs":[[0,"9;\n}"],[-1,"\n\nul li img{\n    position:relative;\n}\n\n.title{\n    position:absolute;\n    z-index:1000;\n    top:50%;\n    bottom:50%;\n    right:50%;\n    left:50%;\n    width:100px;\n    border-radius:5px;\n    background:red;\n}"],[0,"\n\t\t<"]],"start1":3102,"start2":3102,"length1":215,"length2":8},{"diffs":[[0,";\n}\n"],[-1,"\n$('img').h"],[1,"$(document).ready(function(){\n  $(\"img\").mouse"],[0,"over(\n"],[1,"  "],[0,"    "]],"start1":5468,"start2":5468,"length1":25,"length2":62},{"diffs":[[0,"(\n      function"],[1," "],[0,"()"],[1," "],[0,"{\n        $(this"]],"start1":5522,"start2":5522,"length1":34,"length2":36},{"diffs":[[0,"    "],[-1,"},\n    function(){\n        $(this).css('opacity','1');\n        $(this).next().remove('.title');\n    }\n"],[1,"  }\n    );\n}"],[0,");\n<"]],"start1":5689,"start2":5689,"length1":110,"length2":20}]],"length":13893,"saved":false}
{"ts":1348871301315,"patch":[[{"diffs":[[0,"e=\"<%=i%>\" src=\""],[1,"<%=source.split('.')[0]+'-small.'+source.split('.')[1]%>"],[0,"\" style=\"border:"]],"start1":10622,"start2":10622,"length1":32,"length2":88}]],"length":13949,"saved":false}
{"ts":1348871459468,"patch":[[{"diffs":[[0," #999;\n}"],[1,"\n\n.title{\n    position:absolute;\n    z-index:1000;\n    top:50%;\n    bottom:50%;\n    right:50%;\n    left:50%;\n    width:100px;\n    border-radius:5px;\n    background:red;\n}"],[0,"\n\t\t</sty"]],"start1":3098,"start2":3098,"length1":16,"length2":186}]],"length":14119,"saved":false}
{"ts":1348871482586,"patch":[[{"diffs":[[0,"osition:"],[-1,"absolut"],[1,"relativ"],[0,"e;\n    z"]],"start1":3121,"start2":3121,"length1":23,"length2":23}]],"length":14119,"saved":false}
{"ts":1348871868645,"patch":[[{"diffs":[[0,"9;\n}"],[-1,"\n\n.title{\n    position:relative;\n    z-index:1000;\n    top:50%;\n    bottom:50%;\n    right:50%;\n    left:50%;\n    width:100px;\n    border-radius:5px;\n    background:red;\n}"],[0,"\n\t\t<"]],"start1":3102,"start2":3102,"length1":178,"length2":8},{"diffs":[[0,"div "],[-1,"class=\"title"],[1,"style=\"position:absolute;left:' + $(this).style.left + 'px;"],[0,"\">' "]],"start1":5652,"start2":5652,"length1":20,"length2":67}]],"length":13996,"saved":false}
{"ts":1348871877245,"patch":[[{"diffs":[[0,"nd('<div style=\""],[1,"z-index:1000;"],[0,"position:absolut"]],"start1":5647,"start2":5647,"length1":32,"length2":45}]],"length":14009,"saved":false}
{"ts":1348871926410,"patch":[[{"diffs":[[0,"is)."],[-1,"style."],[1,"getAttr('"],[0,"left"],[1,"')"],[0," + '"]],"start1":5707,"start2":5707,"length1":18,"length2":23}]],"length":14014,"saved":false}
{"ts":1348871944822,"patch":[[{"diffs":[[0,"is)."],[-1,"getAttr('"],[0,"left"],[-1,"')"],[0," + '"]],"start1":5707,"start2":5707,"length1":23,"length2":12}]],"length":14003,"saved":false}
{"ts":1348871971624,"patch":[[{"diffs":[[0,"-index:1000;"],[1,"font-size:2em;"],[0,"position:abs"]],"start1":5664,"start2":5664,"length1":24,"length2":38}]],"length":14017,"saved":false}
{"ts":1348871998826,"patch":[[{"diffs":[[0,"nction () {\n"],[1,"          alert($(this).style);\n"],[0,"        $(th"]],"start1":5532,"start2":5532,"length1":24,"length2":56}]],"length":14049,"saved":false}
{"ts":1348872042704,"patch":[[{"diffs":[[0,"$(this)."],[-1,"style"],[1,"css"],[0,");\n     "]],"start1":5560,"start2":5560,"length1":21,"length2":19}]],"length":14047,"saved":false}
{"ts":1348872052165,"patch":[[{"diffs":[[0,"his).css"],[1,".left"],[0,");\n     "]],"start1":5563,"start2":5563,"length1":16,"length2":21}]],"length":14052,"saved":false}
{"ts":1348872118435,"patch":[[{"diffs":[[0,"his).css"],[-1,".left"],[0,");\n     "]],"start1":5563,"start2":5563,"length1":21,"length2":16}]],"length":14047,"saved":false}
{"ts":1348872146949,"patch":[[{"diffs":[[0,"his).css"],[1,"('left')"],[0,");\n     "]],"start1":5563,"start2":5563,"length1":16,"length2":24}]],"length":14055,"saved":false}
{"ts":1348872166206,"patch":[[{"diffs":[[0,") {\n"],[-1,"          alert($(this).css('left'));\n"],[0,"    "]],"start1":5540,"start2":5540,"length1":46,"length2":8},{"diffs":[[0,"$(this)."],[1,"css('"],[0,"left"],[1,"')"],[0," + 'px;\""]],"start1":5717,"start2":5717,"length1":20,"length2":27}]],"length":14024,"saved":false}
{"ts":1348872183592,"patch":[[{"diffs":[[0,"ft') + '"],[-1,"px"],[0,";\">' + a"]],"start1":5732,"start2":5732,"length1":18,"length2":16}]],"length":14022,"saved":false}
{"ts":1348872200356,"patch":[[{"diffs":[[0,"city','."],[-1,"5"],[1,"1"],[0,"');\n    "]],"start1":5568,"start2":5568,"length1":17,"length2":17}]],"length":14022,"saved":false}
{"ts":1348872266943,"patch":[[{"diffs":[[0,"acity','"],[-1,".1"],[1,"0"],[0,"');\n    "]],"start1":5567,"start2":5567,"length1":18,"length2":17},{"diffs":[[0,"nt-size:"],[-1,"2"],[1,"3"],[0,"em;posit"]],"start1":5677,"start2":5677,"length1":17,"length2":17}]],"length":14021,"saved":false}
{"ts":1348872288415,"patch":[[{"diffs":[[0,"(\"img\")."],[-1,"mouse"],[1,"h"],[0,"over(\n  "]],"start1":5505,"start2":5505,"length1":21,"length2":17}]],"length":14017,"saved":false}
{"ts":1348872325794,"patch":[[{"diffs":[[0," '</div>');\n"],[1,"      }, function() {\n          $(this).css('opacity', '1');\n"],[0,"      }\n    "]],"start1":5745,"start2":5745,"length1":24,"length2":85}]],"length":14078,"saved":false}
{"ts":1348872421623,"patch":[[{"diffs":[[0,"append('<div"],[1," class=\"imgTitle\""],[0," style=\"z-in"]],"start1":5638,"start2":5638,"length1":24,"length2":41},{"diffs":[[0,"ity', '1');\n"],[1,"          $(this).next().remove('.imgTitle');\n"],[0,"      }\n    "]],"start1":5823,"start2":5823,"length1":24,"length2":70}]],"length":14141,"saved":false}
{"ts":1348872468323,"patch":[[{"diffs":[[0,"left') +"],[1," ';top:' + $(this).css('top') +"],[0," ';\">' +"]],"start1":5742,"start2":5742,"length1":16,"length2":47}]],"length":14172,"saved":false}
{"ts":1348873404021,"patch":[[{"diffs":[[0,"z-index:"],[-1,"1000"],[1,"9"],[0,";font-si"]],"start1":5675,"start2":5675,"length1":20,"length2":17},{"diffs":[[0,"unction() {\n"],[1,"          \n"],[0,"          $("]],"start1":5812,"start2":5812,"length1":24,"length2":35}]],"length":14180,"saved":false}
{"ts":1348873483397,"patch":[[{"diffs":[[0,"' + i%>\""],[1," style=\"border:2px solid white;\""],[0,">\n      "]],"start1":10540,"start2":10540,"length1":16,"length2":48}]],"length":14212,"saved":false}
{"ts":1348873496135,"patch":[[{"diffs":[[0,"i%>\""],[-1," style=\"border:2px solid white;\""],[0,">\n  "]],"start1":10544,"start2":10544,"length1":40,"length2":8}]],"length":14180,"saved":false}
{"ts":1348873549769,"patch":[[{"diffs":[[0,";\n}\n"],[-1,"$(document).ready(function(){\n  $(\"img\").hover(\n      function () {\n        $(this).css('opacity','0');\n        var a = $(this).attr('alt');\n        $(this).parent().append('<div class=\"imgTitle\" style=\"z-index:9;font-size:3em;position:absolute;left:' + $(this).css('left') + ';top:' + $(this).css('top') + ';\">' + a + '</div>');\n      }, function() {\n          \n          $(this).css('opacity', '1');\n          $(this).next().remove('.imgTitle');\n      }\n    );\n});\n"],[0,"</sc"]],"start1":5468,"start2":5468,"length1":475,"length2":8}]],"length":13713,"saved":false}
{"ts":1348873688587,"patch":[[{"diffs":[[0,"            <img"],[1," class=\"gridImg\""],[0," alt=\"<%=i%>\" ti"]],"start1":10352,"start2":10352,"length1":32,"length2":48}]],"length":13729,"saved":false}
{"ts":1348873917087,"patch":[[{"diffs":[[0,"\"log"],[-1,"in();\" value=\"Log In\" />\n  <input type=\"button\" onclick=\"logout();\" value=\"Log Out\" />\n  <input type=\"button\" onclick=\"signup();\" value=\"Sign Up\" />\n  <input type=\"button\" onclick=\"deleteAccount();\" value=\"Delete Account\" />\n  <input type=\"button\" onclick=\"showUpload();\" value=\"Upload new images\" />\n  <input type=\"button\" onclick=\"showLinkUpload();\" value=\"Upload link image"],[1,"out();\" value=\"Log Out\" />\n  <input type=\"button\" onclick=\"showUpload();\" value=\"Upload new images"],[0,"\" />"]],"start1":5901,"start2":5901,"length1":384,"length2":106}]],"length":13451,"saved":false}
{"ts":1348873965668,"patch":[[{"diffs":[[0,"  </tr>\n"],[1,"  <!--\n"],[0,"  <tr>\n "]],"start1":6964,"start2":6964,"length1":16,"length2":23},{"diffs":[[0,"  </tr>\n"],[1,"  -->\n"],[0,"</table>"]],"start1":7664,"start2":7664,"length1":16,"length2":22}]],"length":13464,"saved":false}
{"ts":1348874000169,"patch":[[{"diffs":[[0," />\n"],[-1,"  <input type=\"button\" onclick=\"newGallery();\" value=\"New Gallery\" />\n  <input type=\"button\" onclick=\"deleteGallery();\" value=\"Delete Gallery\" />\n"],[0,"  <i"]],"start1":5720,"start2":5720,"length1":154,"length2":8}]],"length":13318,"saved":false}
{"ts":1348875078177,"patch":[[{"diffs":[[0,"height: "],[-1,"1"],[1,"2"],[0,"8px;\n\t\t\t"]],"start1":881,"start2":881,"length1":17,"length2":17}]],"length":13318,"saved":false}
{"ts":1348875107931,"patch":[[{"diffs":[[0,"height: "],[-1,"1"],[1,"3"],[0,"px;\n\t\t\t\t"]],"start1":604,"start2":604,"length1":17,"length2":17}]],"length":13318,"saved":false}
{"ts":1348875117695,"patch":[[{"diffs":[[0,"height: "],[-1,"3"],[1,"1"],[0,"px;\n\t\t\t\t"]],"start1":604,"start2":604,"length1":17,"length2":17},{"diffs":[[0,"height: "],[-1,"2"],[1,"1"],[0,"8px;\n\t\t\t"]],"start1":881,"start2":881,"length1":17,"length2":17}]],"length":13318,"saved":false}
{"ts":1348875127320,"patch":[[{"diffs":[[0,"height: "],[-1,"1"],[1,"2"],[0,"8px;\n\t\t\t"]],"start1":881,"start2":881,"length1":17,"length2":17}]],"length":13318,"saved":false}
{"ts":1348875137937,"patch":[[{"diffs":[[0,"ight: 28px;\n"],[1,"                font-size: 1em;\n"],[0,"\t\t\t\tcursor: "]],"start1":883,"start2":883,"length1":24,"length2":56}]],"length":13350,"saved":false}
{"ts":1348875195593,"patch":[[{"diffs":[[0,"t-size: "],[-1,"1"],[1,"3"],[0,"em;\n\t\t\t\t"]],"start1":914,"start2":914,"length1":17,"length2":17}]],"length":13350,"saved":false}
{"ts":1348875202699,"patch":[[{"diffs":[[0,"t-size: "],[-1,"3"],[1,"2"],[0,"em;\n\t\t\t\t"]],"start1":914,"start2":914,"length1":17,"length2":17}]],"length":13350,"saved":false}
{"ts":1348875209539,"patch":[[{"diffs":[[0," font-size: "],[-1,"2"],[1,"1.5"],[0,"em;\n\t\t\t\tcurs"]],"start1":910,"start2":910,"length1":25,"length2":27}]],"length":13352,"saved":false}
{"ts":1348875220882,"patch":[[{"diffs":[[0,"size: 1."],[-1,"5"],[1,"3"],[0,"em;\n\t\t\t\t"]],"start1":916,"start2":916,"length1":17,"length2":17}]],"length":13352,"saved":false}
{"ts":1348875228563,"patch":[[{"diffs":[[0,"\twidth: "],[-1,"3"],[1,"4"],[0,"50px;\n\t\t"]],"start1":710,"start2":710,"length1":17,"length2":17}]],"length":13352,"saved":false}
{"ts":1348875261466,"patch":[[{"diffs":[[0,"rgin-left: 1px;\n"],[1,"                font-size: 3em;\n"],[0,"\t\t\t\tbackground-c"]],"start1":1288,"start2":1288,"length1":32,"length2":64}]],"length":13384,"saved":false}
{"ts":1348875275098,"patch":[[{"diffs":[[0,"px;\n"],[-1,"                font-size: 3em;\n"],[0,"\t\t\t\t"]],"start1":1300,"start2":1300,"length1":40,"length2":8}]],"length":13352,"saved":false}
{"ts":1348875342791,"patch":[[{"diffs":[[0," #999;\n\t\t\t}\n"],[1,"            \n            span\n            {\n                font-size: 3em;\n            }\n"],[0,"\t\t\t\n\t\t\t.butt"]],"start1":1167,"start2":1167,"length1":24,"length2":114}]],"length":13442,"saved":false}
{"ts":1348875373490,"patch":[[{"diffs":[[0,"t-size: "],[-1,"3"],[1,"1.5em;\n            }\n            \n            Clear\n            {\n                font-size: 1.5"],[0,"em;\n    "]],"start1":1242,"start2":1242,"length1":17,"length2":112}]],"length":13537,"saved":false}
{"ts":1348875392373,"patch":[[{"diffs":[[0,"th: "],[-1,"4"],[0,"5"],[1,"0"],[0,"0px;"]],"start1":714,"start2":714,"length1":10,"length2":10}]],"length":13537,"saved":false}
{"ts":1348877071288,"patch":[[{"diffs":[[0,"r: pointer;\n"],[1,"                font-size:1.5em;\n"],[0,"\t\t\t}\n\t\t\t\n\t\t\t"]],"start1":1411,"start2":1411,"length1":24,"length2":57}]],"length":13570,"saved":false}
{"ts":1348877074649,"patch":[[{"diffs":[[0,"nt-size:"],[1," "],[0,"1.5em;\n\t"]],"start1":1441,"start2":1441,"length1":16,"length2":17}]],"length":13571,"saved":false}
{"ts":1348877083701,"patch":[[{"diffs":[[0," font-size: "],[-1,"1.5"],[1,"2"],[0,"em;\n\t\t\t}\n\t\t\t"]],"start1":1438,"start2":1438,"length1":27,"length2":25}]],"length":13569,"saved":false}
{"ts":1348877095608,"patch":[[{"diffs":[[0,"er;\n"],[-1,"                font-size: 2em;\n"],[0,"\t\t\t}"]],"start1":1419,"start2":1419,"length1":40,"length2":8}]],"length":13537,"saved":false}
{"ts":1348877114706,"patch":[[{"diffs":[[0,"\t\t}\n"],[-1,"            \n            span\n            {\n                font-size: 1.5em;\n            }\n            \n            Clear\n            {\n                font-size: 1.5em;\n            }\n"],[0,"\t\t\t\n"]],"start1":1175,"start2":1175,"length1":193,"length2":8},{"diffs":[[0,"r: pointer;\n"],[1,"                font-size:1.5em;\n"],[0,"\t\t\t}\n\t\t\t\n\t\t\t"]],"start1":1226,"start2":1226,"length1":24,"length2":57}]],"length":13385,"saved":false}
{"ts":1348877156805,"patch":[[{"diffs":[[0,"olbar {\n"],[1,"    font-size: 2em;\n"],[0,"bottom:0"]],"start1":2634,"start2":2634,"length1":16,"length2":36}]],"length":13405,"saved":false}
{"ts":1348877166172,"patch":[[{"diffs":[[0,"olbar {\n"],[-1,"    font-size: 2em;\n"],[0,"bottom:0"]],"start1":2634,"start2":2634,"length1":36,"length2":16}]],"length":13385,"saved":false}
{"ts":1348877343590,"patch":[[{"diffs":[[0,"\"<%=i%>\""],[-1," title=\"<%=i%>\""],[0," src=\"<%"]],"start1":10045,"start2":10045,"length1":31,"length2":16}]],"length":13370,"saved":false}
{"ts":1348877444037,"patch":[[{"diffs":[[0,"    img["],[-1,"title"],[1,"alt"],[0,"] {\n    "]],"start1":1905,"start2":1905,"length1":21,"length2":19},{"diffs":[[0,"]%>\""],[-1," title=\"<%=data.users[i]%>\""],[0," src"]],"start1":10553,"start2":10553,"length1":35,"length2":8}]],"length":13341,"saved":false}
{"contributors":[],"silentsave":false,"ts":1348946273572,"patch":[[{"diffs":[[0,"tle>"],[-1,"Krists Auders Photography"],[1,"Photo"],[0," (Be"]],"start1":33,"start2":33,"length1":33,"length2":13}]],"length":13321,"saved":false}
{"contributors":[],"silentsave":false,"ts":1349211935834,"patch":[[{"diffs":[[0,"ink\" />\n"],[1,"  <input type=\"button\" id=\"publishGallery\" onclick=\"publishGallery();\" value=\"Publish Gallery\" />\n"],[0,"  </div>"]],"start1":6163,"start2":6163,"length1":16,"length2":114}]],"length":13419,"saved":false}
{"ts":1349214401596,"patch":[[{"diffs":[[0,"ery\" />\n"],[1,"  <input type=\"button\" id=\"unpublishGallery\" onclick=\"unpublishGallery();\" value=\"Unpublish Gallery\" />\n"],[0,"  </div>"]],"start1":6261,"start2":6261,"length1":16,"length2":120}]],"length":13523,"saved":false}
{"contributors":[],"silentsave":false,"ts":1350082583107,"patch":[[{"diffs":[[0,"e>\n<"],[-1,"script type=\"text/javascript\" >\n</script"],[1,"link rel=\"stylesheet\" href=\"http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css\" /"],[0,">\n<s"]],"start1":55,"start2":55,"length1":48,"length2":96}]],"length":13571,"saved":false}
{"ts":1350082615948,"patch":[[{"diffs":[[0,"y-1."],[-1,"7.1.min"],[1,"8.2.js\"></script>\n<script src=\"http://code.jquery.com/ui/1.9.0/jquery-ui"],[0,".js\""]],"start1":190,"start2":190,"length1":15,"length2":80}]],"length":13636,"saved":false}
{"contributors":[],"silentsave":false,"ts":1350335676059,"patch":[[{"diffs":[[0,"orm);\n}\n"],[1,"    $(function() {\n        $( \".drag\" ).resizable({\n            aspectRatio: true\n        });\n        $(\".ui-wrapper\").draggable({\n            zIndex: 15000,\n            stop: function(event) {\n                var elements = document.getElementsByTagName(\"*\");\n                var highest_index = 0;\n                for (var i = 0; i < elements.length - 1; i++) {\n                    if (parseInt(elements[i].style.zIndex) > highest_index) {\n                        if(elements[i]!=event.target)\n                            highest_index = parseInt(elements[i].style.zIndex);\n                    }\n                }\n                event.target.style.zIndex = highest_index + 1;\n            }\n        }).click(function(event) {\n            fullScreen(event.target);\n        });\n    });\n"],[0,"</script"]],"start1":5622,"start2":5622,"length1":16,"length2":802},{"diffs":[[0,"irst();\n"],[1,"//"],[0,"setDragg"]],"start1":11978,"start2":11978,"length1":16,"length2":18}]],"length":14424,"saved":false}
{"ts":1350335976885,"patch":[[{"diffs":[[0,"/table>\n"],[1,"<!--"],[0,"\n<div na"]],"start1":8679,"start2":8679,"length1":16,"length2":20},{"diffs":[[0,"></div>\n"],[1,"-->"],[0,"\n<% var "]],"start1":8860,"start2":8860,"length1":16,"length2":19}]],"length":14431,"saved":false}
{"ts":1350336106844,"patch":[[{"diffs":[[0,"cript\">\n"],[1,"//"],[0,"\t\tcontex"]],"start1":14092,"start2":14092,"length1":16,"length2":18},{"diffs":[[0,"eight);\n"],[1,"//"],[0,"\t\t\tvar i"]],"start1":14147,"start2":14147,"length1":16,"length2":18},{"diffs":[[0,"mage();\n"],[1,"//"],[0,"\t    \tim"]],"start1":14179,"start2":14179,"length1":16,"length2":18},{"diffs":[[0,"ion() {\n"],[1,"//"],[0,"\t       "]],"start1":14214,"start2":14214,"length1":16,"length2":18},{"diffs":[[0,"h);\n"],[1,"//"],[0,"\t    \t}\n"],[1,"//"],[0,"\t   "]],"start1":14311,"start2":14311,"length1":16,"length2":20}]],"length":14443,"saved":false}
{"ts":1350336122952,"patch":[[{"diffs":[[0,">-->\t\n\t\t"],[1,"<!--"],[0,"<script "]],"start1":13999,"start2":13999,"length1":16,"length2":20},{"diffs":[[0,"in.js\"></script>"],[1,"-->"],[0,"\n\t\t<script type="]],"start1":14053,"start2":14053,"length1":32,"length2":35},{"diffs":[[0,"cript\">\n"],[-1,"//"],[0,"\t\tcontex"]],"start1":14099,"start2":14099,"length1":18,"length2":16},{"diffs":[[0,"eight);\n"],[-1,"//"],[0,"\t\t\tvar i"]],"start1":14152,"start2":14152,"length1":18,"length2":16},{"diffs":[[0,"mage();\n"],[-1,"//"],[0,"\t    \tim"]],"start1":14182,"start2":14182,"length1":18,"length2":16},{"diffs":[[0,"ion() {\n"],[-1,"//"],[0,"\t       "]],"start1":14215,"start2":14215,"length1":18,"length2":16},{"diffs":[[0,"h);\n"],[-1,"//"],[0,"\t    \t}\n"],[-1,"//"],[0,"\t   "]],"start1":14310,"start2":14310,"length1":20,"length2":16}]],"length":14438,"saved":false}
{"ts":1350336136511,"patch":[[{"diffs":[[0,">-->\t\n\t\t"],[-1,"<!--"],[0,"<script "]],"start1":13999,"start2":13999,"length1":20,"length2":16},{"diffs":[[0,"/script>"],[-1,"-->"],[0,"\n\t\t<scri"]],"start1":14057,"start2":14057,"length1":19,"length2":16}]],"length":14431,"saved":false}
{"ts":1350336420359,"patch":[[{"diffs":[[0,"    });\n"],[1,"    \n    $(\"ui.wrapper\").each(function() {\n        $(this).style.zIndex = $(this).find('img')[0].style.zIndex;\n    });\n"],[0,"</script"]],"start1":6408,"start2":6408,"length1":16,"length2":135}]],"length":14550,"saved":false}
{"ts":1350336462913,"patch":[[{"diffs":[[0,"\n    $(\""],[1,"."],[0,"ui"],[-1,"."],[1,"-"],[0,"wrapper\""]],"start1":6420,"start2":6420,"length1":19,"length2":20}]],"length":14551,"saved":false}
{"ts":1350336533247,"patch":[[{"diffs":[[0,"ch(function() {\n"],[1,"        alert($(this).style.zIndex);\n"],[0,"        $(this)."]],"start1":6444,"start2":6444,"length1":32,"length2":69}]],"length":14588,"saved":false}
{"ts":1350336585523,"patch":[[{"diffs":[[0,"    "],[-1,"});\n    \n"],[0,"    "]],"start1":6408,"start2":6408,"length1":17,"length2":8},{"diffs":[[0,"        "],[1,"    "],[0,"alert($("]],"start1":6451,"start2":6451,"length1":16,"length2":20},{"diffs":[[0,".style.zIndex);\n"],[1,"    "],[0,"        $(this)."]],"start1":6476,"start2":6476,"length1":32,"length2":36},{"diffs":[[0,"zIndex;\n"],[1,"        });\n"],[0,"    });\n"]],"start1":6556,"start2":6556,"length1":16,"length2":28}]],"length":14599,"saved":false}
{"ts":1350336633914,"patch":[[{"diffs":[[0,"});\n"],[-1,"        $(\".ui-wrapper\").each(function() {\n            alert($(this).style.zIndex);\n            $(this).style.zIndex = $(this).find('img')[0].style.zIndex;\n        });\n"],[0,"    "]],"start1":6404,"start2":6404,"length1":176,"length2":8},{"diffs":[[0,"ver();\n\n"],[1,"$(\".ui-wrapper\").each(function() {\n    alert($(this).style.zIndex);\n    $(this).style.zIndex = $(this).find('img')[0].style.zIndex;\n});\n\n"],[0,"  </scri"]],"start1":12331,"start2":12331,"length1":16,"length2":153}]],"length":14568,"saved":false}
{"ts":1350336678918,"patch":[[{"diffs":[[0,"\n$(\".ui-"],[-1,"wrapper"],[1,"draggable"],[0,"\").each("]],"start1":12338,"start2":12338,"length1":23,"length2":25}]],"length":14570,"saved":false}
{"ts":1350336721098,"patch":[[{"diffs":[[0,"$(\"."],[-1,"ui-"],[0,"drag"],[-1,"gable"],[0,"\").e"]],"start1":12339,"start2":12339,"length1":20,"length2":12}]],"length":14562,"saved":false}
{"ts":1350336735099,"patch":[[{"diffs":[[0,"();\n"],[-1,"\n$(\".drag\").each(function() {\n    alert($(this).style.zIndex);\n    $(this).style.zIndex = $(this).find('img')[0].style.zIndex;\n});\n\n  "],[0,"</sc"]],"start1":12334,"start2":12334,"length1":142,"length2":8}]],"length":14428,"saved":false}
{"ts":1350336748307,"patch":[[{"diffs":[[0,"    });\n"],[1,"    \n$(\".drag\").each(function() {\n    alert($(this).style.zIndex);\n    $(this).style.zIndex = $(this).find('img')[0].style.zIndex;\n});\n"],[0,"</script"]],"start1":6408,"start2":6408,"length1":16,"length2":151}]],"length":14563,"saved":false}
{"ts":1350336763816,"patch":[[{"diffs":[[0,"    \n$(\""],[-1,".drag"],[1,"div"],[0,"\").each("]],"start1":6416,"start2":6416,"length1":21,"length2":19}]],"length":14561,"saved":false}
{"ts":1350336884490,"patch":[[{"diffs":[[0,"});\n"],[-1,"    \n$(\"div\").each(function() {\n    alert($(this).style.zIndex);\n    $(this).style.zIndex = $(this).find('img')[0].style.zIndex;\n});\n"],[0,"</sc"]],"start1":6412,"start2":6412,"length1":141,"length2":8}]],"length":14428,"saved":false}
{"ts":1350336899403,"patch":[[{"diffs":[[0,"g.png\";\n"],[1,"$(\"div\").each(function() {\n    alert($(this).style.zIndex);\n    $(this).style.zIndex = $(this).find('img')[0].style.zIndex;\n});\n"],[0,"\t\t</scri"]],"start1":14392,"start2":14392,"length1":16,"length2":144}]],"length":14556,"saved":false}
{"ts":1350336912055,"patch":[[{"diffs":[[0,").each(function("],[1,"index"],[0,") {\n    alert($("]],"start1":14407,"start2":14407,"length1":32,"length2":37}]],"length":14561,"saved":false}
{"ts":1350337021861,"patch":[[{"diffs":[[0,"g\";\n"],[1,"$.each("],[0,"$(\"div\")"],[-1,".each("],[1,", "],[0,"func"]],"start1":14396,"start2":14396,"length1":22,"length2":25},{"diffs":[[0,"unction("],[-1,"index"],[0,") {\n    "]],"start1":14418,"start2":14418,"length1":21,"length2":16},{"diffs":[[0,"ert("],[-1,"$(this).style.zIndex);\n    $(this).style.zIndex = $(this).find('img')[0].style.zIndex"],[1,"'hi')"],[0,";\n})"]],"start1":14436,"start2":14436,"length1":93,"length2":13}]],"length":14479,"saved":false}
{"ts":1350337050990,"patch":[[{"diffs":[[0,"each($(\""],[-1,"div"],[1,".ui-wrapper"],[0,"\"), func"]],"start1":14402,"start2":14402,"length1":19,"length2":27},{"diffs":[[0,"ert("],[-1,"'hi'"],[1,"$(this).style.zIndex"],[0,");\n}"]],"start1":14444,"start2":14444,"length1":12,"length2":28}]],"length":14503,"saved":false}
{"ts":1350337070054,"patch":[[{"diffs":[[0,"each($(\""],[-1,".ui-wrapper"],[1,"div"],[0,"\"), func"]],"start1":14402,"start2":14402,"length1":27,"length2":19}]],"length":14495,"saved":false}
{"ts":1350337109918,"patch":[[{"diffs":[[0,") {\n    "],[1,"alert('hi');\n    //"],[0,"alert($("]],"start1":14426,"start2":14426,"length1":16,"length2":35}]],"length":14514,"saved":false}
{"ts":1350337121557,"patch":[[{"diffs":[[0,"each($(\""],[-1,"div"],[1,".ui-wrapper"],[0,"\"), func"]],"start1":14402,"start2":14402,"length1":19,"length2":27}]],"length":14522,"saved":false}
{"ts":1350337136220,"patch":[[{"diffs":[[0,"ach($(\"."],[-1,"ui-wrapper"],[1,"drag"],[0,"\"), func"]],"start1":14403,"start2":14403,"length1":26,"length2":20}]],"length":14516,"saved":false}
{"ts":1350337149147,"patch":[[{"diffs":[[0,") {\n    "],[1,"//"],[0,"alert('h"]],"start1":14428,"start2":14428,"length1":16,"length2":18},{"diffs":[[0,"('hi');\n    "],[-1,"//"],[0,"alert($(this"]],"start1":14443,"start2":14443,"length1":26,"length2":24}]],"length":14516,"saved":false}
{"ts":1350337158208,"patch":[[{"diffs":[[0,"ert("],[-1,"$("],[0,"this"],[-1,")"],[0,".sty"]],"start1":14457,"start2":14457,"length1":15,"length2":12}]],"length":14513,"saved":false}
{"ts":1350337192605,"patch":[[{"diffs":[[0,"    "],[-1,"alert(this"],[1,"$(this).parent()"],[0,".sty"]],"start1":14451,"start2":14451,"length1":18,"length2":24},{"diffs":[[0,"e.zIndex"],[-1,")"],[1," = 15000"],[0,";\n});\n\t\t"]],"start1":14476,"start2":14476,"length1":17,"length2":24}]],"length":14526,"saved":false}
{"ts":1350337218825,"patch":[[{"diffs":[[0,"    "],[-1,"$("],[0,"this"],[-1,")"],[0,".parent"],[-1,"()"],[0,".sty"]],"start1":14451,"start2":14451,"length1":24,"length2":19}]],"length":14521,"saved":false}
{"ts":1350337278785,"patch":[[{"diffs":[[0,"    "],[-1,"//"],[0,"alert("],[-1,"'hi');\n    this.parent.style.zIndex = 15000"],[1,"$(this))"],[0,";\n})"]],"start1":14432,"start2":14432,"length1":59,"length2":22}]],"length":14484,"saved":false}
{"ts":1350337291365,"patch":[[{"diffs":[[0,"($(this)"],[1,".parent()"],[0,");\n});\n\t"]],"start1":14441,"start2":14441,"length1":16,"length2":25}]],"length":14493,"saved":false}
{"ts":1350337300597,"patch":[[{"diffs":[[0,"parent()"],[1,".style.zIndex"],[0,");\n});\n\t"]],"start1":14450,"start2":14450,"length1":16,"length2":29}]],"length":14506,"saved":false}
{"ts":1350337307547,"patch":[[{"diffs":[[0,"().style"],[-1,".zIndex"],[0,");\n});\n\t"]],"start1":14456,"start2":14456,"length1":23,"length2":16}]],"length":14499,"saved":false}
{"ts":1350337319099,"patch":[[{"diffs":[[0,"arent()."],[-1,"style"],[1,"zIndex"],[0,");\n});\n\t"]],"start1":14451,"start2":14451,"length1":21,"length2":22}]],"length":14500,"saved":false}
{"ts":1350337399921,"patch":[[{"diffs":[[0,"arent()."],[-1,"zI"],[1,"css('z-i"],[0,"ndex"],[1,"')"],[0,");\n});\n\t"]],"start1":14451,"start2":14451,"length1":22,"length2":30}]],"length":14508,"saved":false}
{"contributors":[],"silentsave":false,"ts":1350337491301,"patch":[[{"diffs":[[0,"    "],[-1,"alert("],[0,"$(th"]],"start1":14432,"start2":14432,"length1":14,"length2":8},{"diffs":[[0,"z-index'"],[1,", $(this).css('z-index'"],[0,"));\n});\n"]],"start1":14458,"start2":14458,"length1":16,"length2":39}]],"length":14525,"saved":false}
{"ts":1350337580001,"patch":[[{"diffs":[[0,"unction() {\n"],[1,"    alert($(this).css('z-index'));\n"],[0,"    $(this)."]],"start1":14420,"start2":14420,"length1":24,"length2":59}]],"length":14560,"saved":false}
{"ts":1350337608270,"patch":[[{"diffs":[[0,"    "],[-1,"alert("],[0,"$(this)."],[1,"parent()."],[0,"css("]],"start1":14432,"start2":14432,"length1":22,"length2":25},{"diffs":[[0,"z-index'"],[-1,"));\n   "],[1,","],[0," $(this)"]],"start1":14458,"start2":14458,"length1":23,"length2":17},{"diffs":[[0,"x', $(this)."],[-1,"parent()."],[0,"css('z-index"]],"start1":14464,"start2":14464,"length1":33,"length2":24},{"diffs":[[0,"ss('z-index'"],[-1,", $(this"],[1,"));\n    alert($(this).parent("],[0,").css('z-ind"]],"start1":14477,"start2":14477,"length1":32,"length2":53}]],"length":14569,"saved":false}
{"ts":1350337625440,"patch":[[{"diffs":[[0,"z-index'"],[-1,","],[1,") ="],[0," $(this)"]],"start1":14458,"start2":14458,"length1":17,"length2":19},{"diffs":[[0,"-index')"],[-1,")"],[0,";\n    al"]],"start1":14484,"start2":14484,"length1":17,"length2":16}]],"length":14570,"saved":false}
{"ts":1350337683146,"patch":[[{"diffs":[[0,"dex'"],[-1,") = $(this).css('z-index');\n    aler"],[1,", parseIn"],[0,"t($("]],"start1":14462,"start2":14462,"length1":44,"length2":17},{"diffs":[[0,"Int($(this)."],[-1,"parent()."],[0,"css('z-index"]],"start1":14473,"start2":14473,"length1":33,"length2":24},{"diffs":[[0,"index'))"],[1,")"],[0,";\n});\n\t\t"]],"start1":14492,"start2":14492,"length1":16,"length2":17}]],"length":14535,"saved":false}
{"ts":1350337700894,"patch":[[{"diffs":[[0,"index', "],[-1,"parseInt("],[0,"$(this)."]],"start1":14460,"start2":14460,"length1":25,"length2":16},{"diffs":[[0,"index'))"],[-1,")"],[0,";\n});\n\t\t"]],"start1":14483,"start2":14483,"length1":17,"length2":16}]],"length":14525,"saved":false}
{"ts":1350337737975,"patch":[[{"diffs":[[0,"    "],[-1,"$(this).parent("],[1,"var z = $(this"],[0,").cs"]],"start1":14432,"start2":14432,"length1":23,"length2":22},{"diffs":[[0,"z-index'"],[-1,","],[1,");\n   "],[0," $(this)"]],"start1":14457,"start2":14457,"length1":17,"length2":22},{"diffs":[[0,"');\n    $(this)."],[1,"parent()."],[0,"css('z-index'));"]],"start1":14464,"start2":14464,"length1":32,"length2":41},{"diffs":[[0,"z-index'"],[-1,")"],[1,", z"],[0,");\n});\n\t"]],"start1":14494,"start2":14494,"length1":17,"length2":19}]],"length":14540,"saved":false}
{"ts":1350337747951,"patch":[[{"diffs":[[0,"x', z);\n"],[1,"    alert(z);\n"],[0,"});\n\t\t</"]],"start1":14500,"start2":14500,"length1":16,"length2":30}]],"length":14554,"saved":false}
{"ts":1350337758064,"patch":[[{"diffs":[[0,"  alert("],[-1,"z"],[1,"parseInt(z)"],[0,");\n});\n\t"]],"start1":14510,"start2":14510,"length1":17,"length2":27}]],"length":14564,"saved":false}
{"ts":1350337827080,"patch":[[{"diffs":[[0,"g\";\n"],[-1,"$.each($(\".drag\"), function() {\n    var z = $(this).css('z-index');\n    $(this).parent().css('z-index', z);\n    alert(parseInt(z));\n});\n"],[0,"\t\t</"]],"start1":14396,"start2":14396,"length1":144,"length2":8}]],"length":14428,"saved":false}
{"ts":1350338093336,"patch":[[{"diffs":[[0,"alse;\" >"],[1,"\n    \t<script type=\"text/javascript\" src=\"/js/brushes/circles.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/chrome.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/fur.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/grid.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/longfur.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/ribbon.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/shaded.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/simple.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/sketchy.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/squares.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/web.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/colorutils.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/colorselector.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/palette.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/menu.js\"></script>\n\t\t<!--<script type=\"text/javascript\" src=\"js/about.js\"></script>-->\t\n\t\t<script type=\"text/javascript\" src=\"/js/main.js\"></script>\n\t\t<script type=\"text/javascript\">\n\t\tcontext.clearRect(0,0,canvas.width,canvas.height);\n\t\t\tvar img     = new Image();\n\t    \timg.onload  = function() {\n\t        \tcontext.drawImage(img, 0, 0, canvas.width, (img.height/img.width)*canvas.width);\n\t    \t}\n\t    \timg.src     = \"/images/<%=data.params.user + '-' + data.params.gallery%>-bg.png\";\n\t\t</script>"],[0,"\n\n  <div"]],"start1":6464,"start2":6464,"length1":16,"length2":1537},{"diffs":[[0,"\n</div>\n"],[1,"<!--"],[0,"<img src"]],"start1":14285,"start2":14285,"length1":16,"length2":20},{"diffs":[[0,"\" />"],[-1,"\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/circles.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/chrome.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/fur.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/grid.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/longfur.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/ribbon.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/shaded.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/simple.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/sketchy.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/squares.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/web.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/colorutils.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/colorselector.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/palette.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/menu.js\"></script>\n\t\t<!--<script type=\"text/javascript\" src=\"js/about.js\"></script>-->\t\n\t\t<script type=\"text/javascript\" src=\"/js/main.js\"></script>\n\t\t<script type=\"text/javascript\">\n\t\tcontext.clearRect(0,0,canvas.width,canvas.height);\n\t\t\tvar img     = new Image();\n\t    \timg.onload  = function() {\n\t        \tcontext.drawImage(img, 0, 0, canvas.width, (img.height/img.width)*canvas.width);\n\t    \t}\n\t    \timg.src     = \"/images/<%=data.params.user + '-' + data.params.gallery%>-bg.png\";\n\t\t</script>"],[1,"-->\n"],[0,"\n</b"]],"start1":14414,"start2":14414,"length1":1526,"length2":12}]],"length":14439,"saved":false}
{"ts":1350338146774,"patch":[[{"diffs":[[0,"        "],[-1,"img"],[1,".ui-wrapper"],[0," {\n     "]],"start1":1467,"start2":1467,"length1":19,"length2":27},{"diffs":[[0,"        "],[-1,"img"],[1,".ui-wrapper"],[0,":hover {"]],"start1":1535,"start2":1535,"length1":19,"length2":27},{"diffs":[[0,"alse;\" >"],[1,"\n\n    <!-- Background drawing code here -->"],[0,"\n    \t<s"]],"start1":6480,"start2":6480,"length1":16,"length2":59}]],"length":14498,"saved":false}
{"ts":1350338173344,"patch":[[{"diffs":[[0,"/table>\n"],[-1,"<!--"],[0,"\n<div na"]],"start1":10259,"start2":10259,"length1":20,"length2":16},{"diffs":[[0,"></div>\n"],[-1,"-->"],[0,"\n<% var "]],"start1":10436,"start2":10436,"length1":19,"length2":16}]],"length":14491,"saved":false}
{"ts":1350338275872,"patch":[[{"diffs":[[0,"_index + 1;\n"],[1,"                saveCoords();\n"],[0,"            "]],"start1":6313,"start2":6313,"length1":24,"length2":54}]],"length":14521,"saved":false}
{"ts":1350338333526,"patch":[[{"diffs":[[0,"eCoords("],[1,"$(this).find('img')[0]"],[0,");\n     "]],"start1":6344,"start2":6344,"length1":16,"length2":38}]],"length":14543,"saved":false}
{"ts":1350338356964,"patch":[[{"diffs":[[0,"eCoords("],[1,"dd"],[0,") {\n    "]],"start1":4108,"start2":4108,"length1":16,"length2":18}]],"length":14545,"saved":false}
{"ts":1350338377095,"patch":[[{"diffs":[[0," dd."],[-1,"obj.x"],[1,"style.left"],[0,"*(13"]],"start1":4218,"start2":4218,"length1":13,"length2":18}]],"length":14550,"saved":false}
{"ts":1350338414766,"patch":[[{"diffs":[[0," dd."],[-1,"obj.y"],[1,"style.top"],[0,"*(13"]],"start1":4274,"start2":4274,"length1":13,"length2":17},{"diffs":[[0,"ge = dd."],[-1,"obj."],[0,"name;\n  "]],"start1":4327,"start2":4327,"length1":20,"length2":16},{"diffs":[[0," dd."],[-1,"obj.w"],[1,"style.width"],[0,"*(13"]],"start1":4357,"start2":4357,"length1":13,"length2":19},{"diffs":[[0," dd."],[-1,"obj.h"],[1,"style.height"],[0,"*(13"]],"start1":4417,"start2":4417,"length1":13,"length2":20},{"diffs":[[0,".z = dd."],[-1,"z"],[1,"style.zIndex"],[0,";\n    $."]],"start1":4495,"start2":4495,"length1":17,"length2":28}]],"length":14574,"saved":false}
{"ts":1350338684654,"patch":[[{"diffs":[[0,"oords($("],[-1,"this"],[1,"event.target"],[0,").find('"]],"start1":6377,"start2":6377,"length1":20,"length2":28}]],"length":14582,"saved":false}
{"ts":1350338748179,"patch":[[{"diffs":[[0,"eCoords("],[-1,"$("],[0,"event.ta"]],"start1":6375,"start2":6375,"length1":18,"length2":16},{"diffs":[[0,"get)"],[-1,".find('img')[0])"],[0,";\n  "]],"start1":6392,"start2":6392,"length1":24,"length2":8}]],"length":14564,"saved":false}
{"ts":1350338867377,"patch":[[{"diffs":[[0,"();\n    "],[1,"alert($(dd).css('left'));"],[0,"\n    var"]],"start1":4165,"start2":4165,"length1":16,"length2":41}]],"length":14589,"saved":false}
{"ts":1350338948245,"patch":[[{"diffs":[[0,"dd)."],[-1,"css('left')"],[1,"name"],[0,");\n "]],"start1":4181,"start2":4181,"length1":19,"length2":12},{"diffs":[[0,"e = "],[-1,"dd.style."],[1,"$(dd).css('"],[0,"left"],[1,"')"],[0,"*(13"]],"start1":4233,"start2":4233,"length1":21,"length2":25},{"diffs":[[0,"p = "],[-1,"dd.style."],[1,"$(dd).css('"],[0,"top"],[1,"')"],[0,"*(13"]],"start1":4293,"start2":4293,"length1":20,"length2":24},{"diffs":[[0,"image = "],[1,"$("],[0,"dd"],[1,")"],[0,".name;\n "]],"start1":4350,"start2":4350,"length1":18,"length2":21},{"diffs":[[0,"h = "],[-1,"dd.style."],[1,"$(dd).css('"],[0,"width"],[1,"')"],[0,"*(13"]],"start1":4383,"start2":4383,"length1":22,"length2":26},{"diffs":[[0,"t = "],[-1,"dd.style."],[1,"$(dd).css('"],[0,"height"],[1,"')"],[0,"*(13"]],"start1":4447,"start2":4447,"length1":23,"length2":27},{"diffs":[[0,"z = "],[-1,"dd.style.zI"],[1,"$(dd).css('z-i"],[0,"ndex"],[1,"')"],[0,";\n  "]],"start1":4533,"start2":4533,"length1":23,"length2":28}]],"length":14606,"saved":false}
{"ts":1350339005341,"patch":[[{"diffs":[[0,"    "],[-1,"alert($(dd).name);"],[0,"\n   "]],"start1":4169,"start2":4169,"length1":26,"length2":8}]],"length":14588,"saved":false}
{"ts":1350339076442,"patch":[[{"diffs":[[0,"ft')"],[-1,"*(1366/getWindowSize()[0])"],[0,";\n  "]],"start1":4232,"start2":4232,"length1":34,"length2":8}]],"length":14562,"saved":false}
{"ts":1350339132718,"patch":[[{"diffs":[[0,"data.side = "],[1,"parseInt("],[0,"$(dd).css('l"]],"start1":4207,"start2":4207,"length1":24,"length2":33},{"diffs":[[0,"('left')"],[1,")*(1366/getWindowSize()[0])"],[0,";\n    da"]],"start1":4237,"start2":4237,"length1":16,"length2":43},{"diffs":[[0,"a.top = "],[1,"parseInt("],[0,"$(dd).cs"]],"start1":4281,"start2":4281,"length1":16,"length2":25},{"diffs":[[0,"s('top')"],[1,")"],[0,"*(1366/g"]],"start1":4306,"start2":4306,"length1":16,"length2":17},{"diffs":[[0,"width = "],[1,"parseInt("],[0,"$(dd).cs"]],"start1":4381,"start2":4381,"length1":16,"length2":25},{"diffs":[[0,"'width')"],[1,")"],[0,"*(1366/g"]],"start1":4408,"start2":4408,"length1":16,"length2":17},{"diffs":[[0,"eight = "],[1,"parseInt("],[0,"$(dd).cs"]],"start1":4455,"start2":4455,"length1":16,"length2":25},{"diffs":[[0,"height')"],[1,")"],[0,"*(1366/g"]],"start1":4483,"start2":4483,"length1":16,"length2":17}]],"length":14628,"saved":false}
{"ts":1350339210583,"patch":[[{"diffs":[[0,"= $(dd)."],[-1,"name"],[1,"find('img')[0].name;\n    alert(data.image)"],[0,";\n    da"]],"start1":4358,"start2":4358,"length1":20,"length2":58}]],"length":14666,"saved":false}
{"ts":1350339403380,"patch":[[{"diffs":[[0,"mg')[0]."],[-1,"name"],[1,"src"],[0,";\n    al"]],"start1":4373,"start2":4373,"length1":20,"length2":19}]],"length":14665,"saved":false}
{"ts":1350339496841,"patch":[[{"diffs":[[0,")[0].src"],[1,".split('/').pop().split('-small'"],[0,";\n    al"]],"start1":4376,"start2":4376,"length1":16,"length2":48}]],"length":14697,"saved":false}
{"ts":1350339534522,"patch":[[{"diffs":[[0,"lit("],[-1,"'/'"],[1,"\"/\""],[0,").pop()."],[-1,"split"],[1,"replace"],[0,"('-s"]],"start1":4387,"start2":4387,"length1":24,"length2":26},{"diffs":[[0,"'-small'"],[1,",'').replace('-medium','').replace('-large','')"],[0,";\n    al"]],"start1":4410,"start2":4410,"length1":16,"length2":63}]],"length":14746,"saved":false}
{"ts":1350339635645,"patch":[[{"diffs":[[0,"');\n"],[-1,"    alert(data.image);\n"],[0,"    "]],"start1":4463,"start2":4463,"length1":31,"length2":8}]],"length":14723,"saved":false}
{"ts":1350340058384,"patch":[[{"diffs":[[0,"agName(\""],[-1,"*"],[1,"img"],[0,"\");\n    "]],"start1":6084,"start2":6084,"length1":17,"length2":19}]],"length":14725,"saved":false}
{"ts":1350340132632,"patch":[[{"diffs":[[0,"sByTagName(\""],[-1,"img"],[1,"*"],[0,"\");\n        "]],"start1":6080,"start2":6080,"length1":27,"length2":25}]],"length":14723,"saved":false}
{"ts":1350346640022,"patch":[[{"diffs":[[0,"script>\n"],[1,"<script src=\"/js/jquery.ui.touch-punch.min.js\"></script>\n"],[0,"    \t<me"]],"start1":273,"start2":273,"length1":16,"length2":73}]],"length":14780,"saved":false}
{"ts":1350348342174,"patch":[[{"diffs":[[0,"io: true"],[1,",\n            stop: function(event) {\n                var elements = document.getElementsByTagName(\"*\");\n                var highest_index = 0;\n                for (var i = 0; i < elements.length - 1; i++) {\n                    if (parseInt(elements[i].style.zIndex) > highest_index) {\n                        if(elements[i]!=event.target)\n                            highest_index = parseInt(elements[i].style.zIndex);\n                    }\n                }\n                event.target.style.zIndex = highest_index + 1;\n                saveCoords(event.target);\n            }"],[0,"\n       "]],"start1":5966,"start2":5966,"length1":16,"length2":594}]],"length":15358,"saved":false}
{"ts":1350348518167,"patch":[[{"diffs":[[0,"             if("],[1,"("],[0,"elements[i]!=eve"]],"start1":6271,"start2":6271,"length1":32,"length2":33},{"diffs":[[0,"]!=event.target)"],[1," && (elements[i].id!='overlay'))"],[0,"\n               "]],"start1":6298,"start2":6298,"length1":32,"length2":64},{"diffs":[[0,"     if("],[1,"("],[0,"elements"]],"start1":6965,"start2":6965,"length1":16,"length2":17},{"diffs":[[0,".target)"],[1," && (elements[i].id!='overlay'))"],[0,"\n       "]],"start1":6992,"start2":6992,"length1":16,"length2":48}]],"length":15424,"saved":false}
{"ts":1350348777066,"patch":[[{"diffs":[[0,"etElementsBy"],[-1,"Tag"],[1,"Class"],[0,"Name(\""],[-1,"*"],[1,"ui-wrapper"],[0,"\");\n        "]],"start1":6053,"start2":6053,"length1":34,"length2":45},{"diffs":[[0,"             if("],[-1,"("],[0,"elements[i]!=eve"]],"start1":6282,"start2":6282,"length1":33,"length2":32},{"diffs":[[0,"get)"],[-1," && (elements[i].id!='overlay'))"],[0,"\n   "]],"start1":6320,"start2":6320,"length1":40,"length2":8},{"diffs":[[0,"tsBy"],[-1,"Tag"],[1,"Class"],[0,"Name(\""],[-1,"*"],[1,"ui-wrapper"],[0,"\");\n"]],"start1":6725,"start2":6725,"length1":18,"length2":29},{"diffs":[[0,"     if("],[-1,"("],[0,"elements"]],"start1":6954,"start2":6954,"length1":17,"length2":16},{"diffs":[[0,"get)"],[-1," && (elements[i].id!='overlay'))"],[0,"\n   "]],"start1":6984,"start2":6984,"length1":40,"length2":8}]],"length":15380,"saved":false}
{"contributors":[],"silentsave":false,"ts":1351538500000,"patch":[[{"diffs":[[1,"<!DOCTYPE HTML>\n<html>\n<head>\n<title>Photo (Beta)</title>\n<link rel=\"stylesheet\" href=\"http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css\" />\n<script src=\"http://code.jquery.com/jquery-1.8.2.js\"></script>\n<script src=\"http://code.jquery.com/ui/1.9.0/jquery-ui.js\"></script>\n<script src=\"/js/jquery.ui.touch-punch.min.js\"></script>\n    \t<meta name=\"viewport\" content=\"width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;\"/>\n\t\t<style type=\"text/css\">\n\t\t\t*\n\t\t\t{\n\t\t\t\tcolor: #444;\n\t\t\t\tfont-family: Monospace;\n\t\t\t\tfont-size: 12px;\n\t\t\t}\n\t\t\t\n\t\t\tbody\n\t\t\t{\n\t\t\t\tmargin: 0px;\n\t\t\t\toverflow: scroll;\n\t\t\t}\n\t\t\t\n\t\t\tselect\n\t\t\t{\n\t\t\t\ttext-transform: uppercase;\n\t\t\t\tfont-size: 11px;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\t\t\t\n\t\t\thr\n\t\t\t{\n\t\t\t\tborder: 0;\n\t\t\t\theight: 1px;\n\t\t\t\tbackground-color: #ccc;\n\t\t\t\tmargin: 20px 0px;\n\t\t\t}\n\t\t\t\n\t\t\t.gui\n\t\t\t{\n\t\t\t\tcolor: black;\n\t\t\t\twidth: 500px;\n\t\t\t\tbackground-color: gray;\n\t\t\t\t//border-bottom: 1px solid #ddd;\n\t\t\t\t//padding: 5px 10px;\n\t\t\t\ttext-align: center;\n\t\t\t\t//text-transform: uppercase;\n\t\t\t\tline-height: 28px;\n                font-size: 1.3em;\n\t\t\t\tcursor: default;\n                opacity:0.95;\n                z-index:13000;\n                    -moz-box-shadow: 1px 1px 25px #999;\n                \t-webkit-box-shadow: 1px 1px 25px #999;\n                    box-shadow: 1px 1px 25px #999;\n\t\t\t}\n\t\t\t\n\t\t\t.button\n\t\t\t{\n\t\t\t\tpadding: 2px;\n\t\t\t\tcursor: pointer;\n                font-size:1.5em;\n\t\t\t}\n\t\t\t\n\t\t\t.key\n\t\t\t{\n\t\t\t\tpadding: 0px 8px;\n\t\t\t\tmargin-left: 1px;\n\t\t\t\tbackground-color: #eee;\n\t\t\t}\n            .ui-wrapper {\n                opacity: 1;\n            }\n            .ui-wrapper:hover {\n                opacity: 1;\n                /*Reflection*/ \n                /*-webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(.7, transparent), to(rgba(0,0,0,0.4)));   */\n                /*Glow*/ \n                -webkit-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); -moz-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); box-shadow: 0px 0px 5px rgba(255,255,255,0.8); \n            }\n            img[alt] {\n                font-size: 2em;\n            }\n            .no-hover {\n                opacity: 1;  \n                -webkit-box-shadow: 0px 0px 0px; -moz-box-shadow: 0px 0px 0px; box-shadow: 0px 0px 0px;\n            }\n            .no-hover:hover {\n                opacity: 1;  \n                -webkit-box-shadow: 0px 0px 0px; -moz-box-shadow: 0px 0px 0px; box-shadow: 0px 0px 0px;\n            }\n            .ui-widget-overlay {\n               background: #111111;\n               opacity: .80;\n               filter: Alpha(Opacity=80);\n            }\n.drag {position: absolute;}\n//img {\n//    -moz-box-shadow: 1px 1px 12px #999;\n//\t-webkit-box-shadow: 1px 1px 12px #999;\n//        box-shadow: 1px 1px 12px #999;\n//        }\n//img:hover {\n//\t-moz-box-shadow: 1px 1px 24px #999;\n//\t-webkit-box-shadow: 1px 1px 24px #999;\n//        box-shadow: 1px 1px 24px #999;\n//}\n.toolbar {\nbottom:0px;\nleft:-10%;\nwidth:110%;\nheight:25px;\nbackground-color:gray; \nopacity:0.95;\nposition:fixed;\nz-index:13000;\n\t-moz-box-shadow: 1px 1px 25px #999;\n\t-webkit-box-shadow: 1px 1px 25px #999;\n        box-shadow: 1px 1px 25px #999;\n}\n.titlebar {\nvisibility:hidden;\ntop:0px;\nleft:-10%;\nwidth:110%;\nheight:25px;\nbackground-color:gray; \nopacity:0.95;\nposition:fixed;\nfont-family:Arial;\nfont-size:16px;\nz-index:5000;\n\t-moz-box-shadow: 1px 1px 25px #999;\n\t-webkit-box-shadow: 1px 1px 25px #999;\n        box-shadow: 1px 1px 25px #999;\n}\n\t\t</style>\n<script src=\"/js/functions.js\"></script>\n<script type=\"text/javascript\">\nfunction deleteImage(el) {\n    saveToLocalStorage();\n\tsetPageScroll();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"post\" ;\n  myForm.action = \"/<%=data.params.user + '/' + data.params.gallery%>/photos/delete\";\n    var myInput = document.createElement(\"input\") ;\n    myInput.setAttribute(\"name\", \"file\") ;\n    myInput.setAttribute(\"value\", el.parentNode.id.substring(0,el.parentNode.id.length-3));\n    myForm.appendChild(myInput) ;\n    var myInput5 = document.createElement(\"input\") ;\n    myInput5.setAttribute(\"name\", \"deleteIsOn\") ;\n    myInput5.setAttribute(\"value\", \"false\");\n    myForm.appendChild(myInput5) ;\n  document.body.appendChild(myForm) ;\n  myForm.submit() ;\n  document.body.removeChild(myForm) ;\n}\nfunction saveCoords(dd) {\n    saveToLocalStorage();\n    setPageScroll();\n    \n    var data = new Object();\n    data.side = parseInt($(dd).css('left'))*(1366/getWindowSize()[0]);\n    data.top = parseInt($(dd).css('top'))*(1366/getWindowSize()[0]);\n    data.image = $(dd).find('img')[0].src.split(\"/\").pop().replace('-small','').replace('-medium','').replace('-large','');\n    data.width = parseInt($(dd).css('width'))*(1366/getWindowSize()[0]);\n    data.height = parseInt($(dd).css('height'))*(1366/getWindowSize()[0]);\n    data.deleteIsOn = '';\n    data.z = $(dd).css('z-index');\n    $.ajax({\n      type: 'POST',\n      url: '/<%=data.params.user + '/' + data.params.gallery%>/upsert',\n      data: data,\n      success: success(),\n      dataType: 'json'\n    });\n}\nfunction updateLink(el) {\n    saveToLocalStorage();\n    setPageScroll();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"post\" ;\n  myForm.action = \"/<%=data.params.user + '/' + data.params.gallery%>/updateLink\";\n    var myInput = document.createElement(\"input\") ;\n    myInput.setAttribute(\"name\", \"file\") ;\n    myInput.setAttribute(\"value\", el.parentNode.id.substring(0,el.parentNode.id.length-3));\n    myForm.appendChild(myInput) ;\n    var myInput5 = document.createElement(\"input\") ;\n    myInput5.setAttribute(\"name\", \"link\") ;\n    myInput5.setAttribute(\"value\", prompt(\"Link\", \"\"));\n    myForm.appendChild(myInput5) ;\n  document.body.appendChild(myForm) ;\n  myForm.submit() ;\n  document.body.removeChild(myForm) ;\n}\nfunction goHome() {\n  saveToLocalStorage();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"get\" ;\n  myForm.action = '/home/users';\n  document.body.appendChild(myForm);\n  myForm.submit();\n  document.body.removeChild(myForm);\n}\n    $(function() {\n        $( \".drag\" ).resizable({\n            aspectRatio: true,\n            stop: function(event) {\n                var elements = document.getElementsByClassName(\"ui-wrapper\");\n                var highest_index = 0;\n                for (var i = 0; i < elements.length - 1; i++) {\n                    if (parseInt(elements[i].style.zIndex) > highest_index) {\n                        if(elements[i]!=event.target)\n                            highest_index = parseInt(elements[i].style.zIndex);\n                    }\n                }\n                event.target.style.zIndex = highest_index + 1;\n                saveCoords(event.target);\n            }\n        });\n        $(\".ui-wrapper\").draggable({\n            zIndex: 15000,\n            stop: function(event) {\n                var elements = document.getElementsByClassName(\"ui-wrapper\");\n                var highest_index = 0;\n                for (var i = 0; i < elements.length - 1; i++) {\n                    if (parseInt(elements[i].style.zIndex) > highest_index) {\n                        if(elements[i]!=event.target)\n                            highest_index = parseInt(elements[i].style.zIndex);\n                    }\n                }\n                event.target.style.zIndex = highest_index + 1;\n                saveCoords(event.target);\n            }\n        }).click(function(event) {\n            fullScreen(event.target);\n        });\n    });\n</script>\n</head>\n\n<body oncontextmenu=\"return false;\" >\n\n    <!-- Background drawing code here -->\n    \t<script type=\"text/javascript\" src=\"/js/brushes/circles.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/chrome.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/fur.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/grid.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/longfur.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/ribbon.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/shaded.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/simple.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/sketchy.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/squares.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/web.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/colorutils.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/colorselector.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/palette.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/menu.js\"></script>\n\t\t<!--<script type=\"text/javascript\" src=\"js/about.js\"></script>-->\t\n\t\t<script type=\"text/javascript\" src=\"/js/main.js\"></script>\n\t\t<script type=\"text/javascript\">\n\t\tcontext.clearRect(0,0,canvas.width,canvas.height);\n\t\t\tvar img     = new Image();\n\t    \timg.onload  = function() {\n\t        \tcontext.drawImage(img, 0, 0, canvas.width, (img.height/img.width)*canvas.width);\n\t    \t}\n\t    \timg.src     = \"/images/<%=data.params.user + '-' + data.params.gallery%>-bg.png\";\n\t\t</script>\n\n  <div align=\"center\" class=\"toolbar\" id=\"toolbar\" style=\"z-index:13000;\">\n   &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \n  <input type=\"button\" onclick=\"goHome();\" value=\"Home\" />\n  <input type=\"button\" onclick=\"logout();\" value=\"Log Out\" />\n  <input type=\"button\" onclick=\"showUpload();\" value=\"Upload new images\" />\n  <input type=\"button\" onclick=\"drawImage();\" value=\"Draw image\" />\n  <input type=\"button\" id=\"adminDeleteButton\" onclick=\"showDelete();\" value=\"Delete image\" />\n  <input type=\"button\" id=\"updateLinkButton\" onclick=\"showLinkUpdate();\" value=\"Update Image Link\" />\n  <input type=\"button\" id=\"publishGallery\" onclick=\"publishGallery();\" value=\"Publish Gallery\" />\n  <input type=\"button\" id=\"unpublishGallery\" onclick=\"unpublishGallery();\" value=\"Unpublish Gallery\" />\n  </div>\n\n<script type=\"text/javascript\" src=\"/js/wz_dragdrop.js\"></script>\n\n\n<table width=\"100%\" height=\"100%\">\n  <tr>\n    <td align=\"center\" valign=\"middle\">\n\t\t<div name=\"upload\" id=\"upload\" style=\"position:fixed;visibility:hidden;left:30%;top:40%;width:40%;z-index:12000;font-family:Arial;font-size:18px;\" align=\"center\">\n\t\t<form name=\"upload\" action=\"/<%=data.params.user + '/' + data.params.gallery%>/photos/new\" enctype=\"multipart/form-data\" method=\"post\">\n\t\t<b>Select files to upload:</b><br/>\n\t\t<input type=\"file\" name=\"image\" multiple/>\n\t\t<input type=\"submit\" name=\"Upload\" value=\"Upload\"/><input type=\"button\" onclick=\"hideUpload();\" value=\"Cancel\" />\n\t\t</form></div><br/>\t\t\n\t</td>\n  </tr>\n  <!--\n  <tr>\n    <td align=\"center\" valign=\"middle\">\n\t\t<div name=\"uploadLink\" id=\"uploadLink\" style=\"position:fixed;visibility:hidden;left:30%;top:40%;width:40%;z-index:12000;font-family:Arial;font-size:18px;\" align=\"center\">\n\t\t<form name=\"uploadLink\" action=\"/<%=data.params.user + '/' + data.params.gallery%>/photos/newlink\" enctype=\"multipart/form-data\" method=\"post\">\n\t\tLink or Javascript: <textarea name=\"link\" rows=\"10\" cols=\"50\"></textarea><br/>\n\t\t<b>Select file to upload:</b><br/>\n\t\t<input type=\"file\" name=\"image\" /><br/>\n\t\t<input type=\"submit\" name=\"uploadLink\" value=\"Upload file\"/><input type=\"button\" onclick=\"hideLinkUpload();\" value=\"Cancel\" />\n\t\t</form></div><br/>\t\t\n\t</td>\n  </tr>\n  -->\n</table>\n\n<div name=\"overlay\" id=\"overlay\" style=\"left:-50px;top:-50px;position:fixed;visibility:hidden;width:150%;height:150%;z-index:11000;background-color:gray;opacity:0.95;\" ></div>\n\n<% var il = \"\";\nfor(var i in data.images) { \n    if(data.images[i].link.length>2) {\n          %>\n    \t  <div style=\"visibility:hidden;\" id=\"<%=data.images[i].source.split('/').pop()%>link\"><%=data.images[i].link%></div>\n    \t  <%\n    }\n    if((data.images[i].width<400) && (data.images[i].height<400)) {\n%>\n<img src=\"<%=data.images[i].source.split('.')[0]+'-small.'+data.images[i].source.split('.')[1]%>\" style=\"z-index:<%=data.images[i].z%>;width:<%=Math.round(data.images[i].width)%>px;height:<%=Math.round(data.images[i].height)%>px;left:<%=Math.round(data.images[i].left)%>px;top:<%=Math.round(data.images[i].top)%>px;\" class=\"drag\" id=\"<%=data.images[i].source.split('/').pop()%>\" />\n<% \n} else if((data.images[i].width<900) && (data.images[i].height<900)) {\n%>\n<img src=\"<%=data.images[i].source.split('.')[0]+'-medium.'+data.images[i].source.split('.')[1]%>\" style=\"z-index:<%=data.images[i].z%>;width:<%=Math.round(data.images[i].width)%>px;height:<%=Math.round(data.images[i].height)%>px;left:<%=Math.round(data.images[i].left)%>px;top:<%=Math.round(data.images[i].top)%>px;\" class=\"drag\" id=\"<%=data.images[i].source.split('/').pop()%>\" />\n<%\n} else {\n%>\n<img src=\"<%=data.images[i].source.split('.')[0]+'-large.'+data.images[i].source.split('.')[1]%>\" style=\"z-index:<%=data.images[i].z%>;width:<%=Math.round(data.images[i].width)%>px;height:<%=Math.round(data.images[i].height)%>px;left:<%=Math.round(data.images[i].left)%>px;top:<%=Math.round(data.images[i].top)%>px;\" class=\"drag\" id=\"<%=data.images[i].source.split('/').pop()%>\" />\n<%\n}\nil += data.images[i].source.split('/').pop() + '\",\"';\n} %>\n\n<%\n    if((data.params.user=='home') && (data.params.gallery!='users')) {\n        var c = 0; %>ha<%\n        for(var i in data.galleries) {\n            var source = data.galleries[i][0];\n            if(source) source = source.source;\n            else source = \"\";\n            c++;\n%>\n            <a href=\"<%='/' + data.params.u + '/' + i%>\">\n            <!--\n                <img title=\"<%=i%>\" src=\"<%=source.split('.')[0]+'-small.'+source.split('.')[1]%>\" style=\"z-index:10;position:absolute;left:<%=300+250*(c % 3)%>px;top:<%=150+150*Math.floor((c-1)/3)%>px;width:210px;height:140px;\" />\n            -->\n                <img class=\"gridImg\" alt=\"<%=i%>\" src=\"<%=source.split('.')[0]+'-small.'+source.split('.')[1]%>\" style=\"border:2px solid white;z-index:10;position:absolute;left:<%=300+250*(c % 3)%>px;top:<%=150+150*Math.floor((c-1)/3)%>px;width:210px;height:140px;\" />\n            </a>\n<%\n        }\n    }\n%>\n\n<%\n    if((data.params.user=='home') && (data.params.gallery=='users')) {\n        var c = 0;\n        for(var i in data.users) {\n            c++;\n%>\n            <a href=\"<%='/home/' + data.users[i]%>\">\n                <img alt=\"<%=data.users[i]%>\" src=\"\" style=\"border:2px solid white;z-index:10;position:absolute;left:<%=300+250*(c % 3)%>px;top:<%=150+150*Math.floor((c-1)/3)%>px;width:210px;height:140px;\" />\n            </a>\n<%\n        }\n    }\n%>\n\n<script type=\"text/javascript\">\nfunction setDraggables() {\n\tSET_DHTML(SCALABLE, SCROLL, \"<%- il.substring(0, il.length-3)%>\");\n}\nresizeFirst();\n//setDraggables(); \npageScroll();\nif(false) showDelete();\nfunction setHover() {\n\tx = document.getElementsByTagName(\"img\");\n\tfor (i=0;i<x.length;i++)\n\t{\n\t\tif(x[i].name.split(\"jpgdivNI\")[1]==\"mG\") {\n\t\t\tx[i].onmouseover = function() {fullScreenButton(this);};\n\t\t\tx[i].onmouseout = function() {deleteFullScreenButton(this);};\n\t\t}\n\t}\n}\n//setHover();\n</script>\n\n\n<div id=\"fullScreenImg\" style=\"top:4%;visibility:hidden;z-index:12000;position:fixed;\">\n<img class=\"no-hover\" id =\"fullScreenImage\" style=\"top:0px;left:0px;position:absolute;z-index:12001;visibility:hidden;\" src=\"\" />\n<img class=\"no-hover\" id=\"closeFullscreenButton\" src=\"/images/close.png\" style=\"cursor:pointer;visibility:hidden;position:absolute;left:-40px;top:0px;z-index:10000;\" onclick=\"closeFullscreen();\"/>\n</div>\n<!--<img src=\"/images/upArrow.png\" style=\"visibility:hidden\" />\n<img src=\"/images/downArrow.png\" style=\"visibility:hidden\" />-->\n\n</body>\n</html>\n"]],"start1":0,"start2":0,"length1":0,"length2":15534}]],"length":15534,"saved":false}
{"contributors":[],"silentsave":false,"ts":1351539999307,"patch":[[{"diffs":[[0," HTML>\n<"],[-1,"html"],[1,"!--[if lt IE 7]>      <html class=\"no-js lt-ie9 lt-ie8 lt-ie7\"> <![endif]-->\n<!--[if IE 7]>         <html class=\"no-js lt-ie9 lt-ie8\"> <![endif]-->\n<!--[if IE 8]>         <html class=\"no-js lt-ie9\"> <![endif]-->\n<!--[if gt IE 8]><!--> <html class=\"no-js\"> <!--<![endif]--"],[0,">\n<head>"]],"start1":9,"start2":9,"length1":20,"length2":287}]],"length":15801,"saved":false}
{"ts":1351540118346,"patch":[[{"diffs":[[0,"d>\n<"],[-1,"title>Photo (Beta)</title"],[1,"meta charset=\"utf-8\">\n<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n<title>Photo (Beta)</title>\n<meta name=\"description\" content=\"\">\n<meta http-equiv=\"content-language\" content=\"en\" />\n<meta name=\"viewport\" content=\"width=device-width\">\n<link rel=\"stylesheet\" href=\"/css/bootstrap.css\">\n<link rel=\"stylesheet\" href=\"/css/bootstrap-responsive.min.css\""],[0,">\n<l"]],"start1":294,"start2":294,"length1":33,"length2":375},{"diffs":[[0,"i.js\"></script>\n"],[1,"<script src=\"/js/modernizr-2.6.1-respond-1.1.0.min.js\"></script>\n<!--"],[0,"<script src=\"/js"]],"start1":874,"start2":874,"length1":32,"length2":101},{"diffs":[[0,"/script>"],[1,"-->"],[0,"\n    \t<m"]],"start1":1007,"start2":1007,"length1":16,"length2":19},{"diffs":[[0,"</div>\n\n"],[1,"<!--"],[0,"<script "]],"start1":10578,"start2":10578,"length1":16,"length2":20},{"diffs":[[0,"s\"></script>"],[1,"-->"],[0,"\n\n\n<table wi"]],"start1":10643,"start2":10643,"length1":24,"length2":27}]],"length":16222,"saved":false}
{"ts":1351540140052,"patch":[[{"diffs":[[0,"      }\n"],[1,"            .string { color: green; }\n            .number { color: dark#BDBDBD; }\n            .boolean { color: #BDBDBD; }\n            .null { color: magenta; }\n            .key { color: red; }\n"],[0,".drag {p"]],"start1":3309,"start2":3309,"length1":16,"length2":210}]],"length":16416,"saved":false}
{"ts":1351540167895,"patch":[[{"diffs":[[0,"/script>-->\n"],[1,"<!--Import JQuery.cookie.js-->\n<script src=\"http://riak.kristsauders.com/buckets/att-js/keys/jquery.cookie.js\"></script>\n"],[0,"    \t<meta n"]],"start1":1007,"start2":1007,"length1":24,"length2":145}]],"length":16537,"saved":false}
{"ts":1351540262105,"patch":[[{"diffs":[[0," />-->\n\n"],[1,"<script src=\"/js/bootstrap.min.js\"></script>\n"],[0,"</body>\n"]],"start1":16513,"start2":16513,"length1":16,"length2":61}]],"length":16582,"saved":false}
{"ts":1351540300188,"patch":[[{"diffs":[[0,"se;\" >\n\n"],[1,"        <!-- This code is taken from http://twitter.github.com/bootstrap/examples/hero.html -->\n        <div class=\"navbar navbar-inverse navbar-fixed-top\">\n            <div class=\"navbar-inner\">\n                <div class=\"container\">\n                    <a class=\"btn btn-navbar\" data-toggle=\"collapse\" data-target=\".nav-collapse\">\n                        <span class=\"icon-bar\"></span>\n                        <span class=\"icon-bar\"></span>\n                        <span class=\"icon-bar\"></span>\n                    </a>\n                    <a class=\"brand\" href=\"/\">Photo (Beta)</a>\n                    <div class=\"nav-collapse collapse\">\n                        <ul class=\"nav\">\n                            <li class=\"active\"><a href=\"/home/users\">Users</a></li>\n                            <% if(data.loggedin) { %>\n                                <li class=\"dropdown\">\n                                    <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">Tools <b class=\"caret\"></b></a>\n                                    <ul class=\"dropdown-menu\">\n                                        <li class=\"nav-header\">Images</li>\n                                        <li><a href=\"#\" id=\"showUpload\">Upload Images</a></li>\n                                        <li><a href=\"#\" id=\"showDelete\">Select &amp; Delete Images</a></li>\n                                        <li><a href=\"#\" id=\"showLinkUpdate\">Update Image Link</a></li>\n                                        <li><a href=\"#\" id=\"drawImage\">Draw an Image</a></li>\n                                        <li class=\"divider\"></li>\n                                        <li class=\"nav-header\">Galleries</li>\n                                        <li><a href=\"#\" onclick=\"newGallery();\">New Gallery</a></li>\n                                        <li><a href=\"#\" onclick=\"deleteGallery();\">Delete Gallery</a></li>\n                                        <li><a href=\"#\" onclick=\"publishGallery();\">Publish Gallery</a></li>\n                                        <li><a href=\"#\" onclick=\"unpublishGallery();\">Unpublish Gallery</a></li>\n                                        <li class=\"divider\"></li>\n                                        <li class=\"nav-header\">Account</li>\n                                        <li><a href=\"#\" onclick=\"changePassword();\">Change Password</a></li>\n                                        <li><a href=\"#\" onclick=\"deleteAccount();\">Delete Your Account</a></li>\n                                    </ul>\n                                </li>\n                            <% } %>\n                        </ul>\n                        <% if(data.loggedin) { %>\n                            <form class=\"navbar-form pull-right\" action=\"/users/list/logout\" method=\"POST\">\n                            <input type=\"hidden\" name=\"form\" value=\"true\">\n                            <button type=\"submit\" class=\"btn btn-small btn-primary\">Log Out</button>\n                        </form>\n                        <% } else { %>\n                        <form class=\"navbar-form pull-right\" action=\"/users/list/login\" method=\"POST\">\n                            <input class=\"span2\" type=\"text\" name=\"user\" placeholder=\"Username\">\n                            <input class=\"span2\" type=\"password\" name=\"password\" placeholder=\"Password\">\n                            <input type=\"hidden\" name=\"form\" value=\"true\">\n                            <button type=\"submit\" class=\"btn btn-primary\">Sign in</button>\n                        </form>\n                        <% } %>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n"],[0,"    <!--"]],"start1":8521,"start2":8521,"length1":16,"length2":3665}]],"length":20231,"saved":false}
{"ts":1351540345377,"patch":[[{"diffs":[[0,": #444;\n\t\t\t\t"],[1,"/*"],[0,"font-family:"]],"start1":1299,"start2":1299,"length1":24,"length2":26},{"diffs":[[0,"nospace;"],[1,"*/"],[0,"\n\t\t\t\tfon"]],"start1":1328,"start2":1328,"length1":16,"length2":18}]],"length":20235,"saved":false}
{"ts":1351540367992,"patch":[[{"diffs":[[0,":fixed;\n"],[1,"/*"],[0,"font-fam"]],"start1":4317,"start2":4317,"length1":16,"length2":18},{"diffs":[[0,"y:Arial;"],[1,"*/"],[0,"\nfont-si"]],"start1":4337,"start2":4337,"length1":16,"length2":18}]],"length":20239,"saved":false}
{"ts":1351540421566,"patch":[[{"diffs":[[0,"cript>\n\n"],[1,"<!-- The old menu bar at the bottom \n"],[0,"  <div a"]],"start1":13742,"start2":13742,"length1":16,"length2":53},{"diffs":[[0,"  </div>"],[1,"\n-->"],[0,"\n\n<!--<s"]],"start1":14585,"start2":14585,"length1":16,"length2":20}]],"length":20280,"saved":false}
{"ts":1351540539428,"patch":[[{"diffs":[[0,"pace;*/\n\t\t\t\t"],[1,"/*"],[0,"font-size: 1"]],"start1":1331,"start2":1331,"length1":24,"length2":26},{"diffs":[[0,"-size: 12px;"],[1,"*/"],[0,"\n\t\t\t}\n\t\t\t\n\t\t"]],"start1":1349,"start2":1349,"length1":24,"length2":26}]],"length":20284,"saved":false}
{"ts":1351541979509,"patch":[[{"diffs":[[0,"<a href=\"#\" "],[-1,"id"],[1,"onclick"],[0,"=\"showUpload"]],"start1":9726,"start2":9726,"length1":26,"length2":31},{"diffs":[[0,"owUpload"],[1,"();"],[0,"\">Upload"]],"start1":9749,"start2":9749,"length1":16,"length2":19},{"diffs":[[0,"<a href=\"#\" "],[-1,"id"],[1,"onclick"],[0,"=\"showDelete"]],"start1":9829,"start2":9829,"length1":26,"length2":31},{"diffs":[[0,"owDelete"],[1,"();"],[0,"\">Select"]],"start1":9852,"start2":9852,"length1":16,"length2":19},{"diffs":[[0,"ref=\"#\" "],[-1,"id"],[1,"onclick"],[0,"=\"showLi"]],"start1":9949,"start2":9949,"length1":18,"length2":23},{"diffs":[[0,"nkUpdate"],[1,"();"],[0,"\">Update"]],"start1":9972,"start2":9972,"length1":16,"length2":19},{"diffs":[[0,"ref=\"#\" "],[-1,"id"],[1,"onclick"],[0,"=\"drawIm"]],"start1":10060,"start2":10060,"length1":18,"length2":23},{"diffs":[[0,"rawImage"],[1,"();"],[0,"\">Draw a"]],"start1":10078,"start2":10078,"length1":16,"length2":19},{"diffs":[[0," Image</a></li>\n"],[1,"                                        <li><a href=\"#\" onclick=\"$('#bgToolbar').show();\">Show Background Tools</a></li>\n"],[0,"                "]],"start1":10098,"start2":10098,"length1":32,"length2":153}]],"length":20437,"saved":false}
{"ts":1351542073845,"patch":[[{"diffs":[[0,"=\"nav\">\n"],[1,"                            <li><a href=\"/home/users\">Users</a></li>\n                            <li><a href=\"/<%=data.params.user%>\">Galleries</a></li>\n"],[0,"        "]],"start1":9217,"start2":9217,"length1":16,"length2":169},{"diffs":[[0,"a href=\""],[-1,"/home/users\">Users"],[1,"#\">Gallery"],[0,"</a></li"]],"start1":9426,"start2":9426,"length1":34,"length2":26}]],"length":20582,"saved":false}
{"ts":1351542342531,"patch":[[{"diffs":[[0,"').s"],[-1,"how()"],[1,"tyle.visibility='visible'"],[0,";\">S"]],"start1":10337,"start2":10337,"length1":13,"length2":33}]],"length":20602,"saved":false}
{"ts":1351542430118,"patch":[[{"diffs":[[0,"    });\n"],[1,"    // Attach JQuery.click() functions to buttons\n    $(document).ready(function(){\n        $(\"#showBgToolbar\").click(function () {\n            $(this).style.visibility = 'visible';\n        });\n    });\n"],[0,"</script"]],"start1":8475,"start2":8475,"length1":16,"length2":218},{"diffs":[[0,"\"#\" "],[-1,"onclick=\"$('#bgToolbar').style.visibility='visible';"],[1,"id=\"showBgToolbar"],[0,"\">Sh"]],"start1":10513,"start2":10513,"length1":60,"length2":25}]],"length":20769,"saved":false}
{"ts":1351542453162,"patch":[[{"diffs":[[0,"      $("],[-1,"this"],[1,"'#showBgToolbar'"],[0,").style."]],"start1":8621,"start2":8621,"length1":20,"length2":32}]],"length":20781,"saved":false}
{"ts":1351542476648,"patch":[[{"diffs":[[0,"olbar')."],[1,"container."],[0,"style.vi"]],"start1":8639,"start2":8639,"length1":16,"length2":26}]],"length":20791,"saved":false}
{"ts":1351542492608,"patch":[[{"diffs":[[0,"nction () {\n"],[1,"            alert($(this).id);\n"],[0,"            "]],"start1":8603,"start2":8603,"length1":24,"length2":55}]],"length":20822,"saved":false}
{"ts":1351542502368,"patch":[[{"diffs":[[0,"$(this)."],[-1,"id"],[1,"style"],[0,");\n     "]],"start1":8633,"start2":8633,"length1":18,"length2":21}]],"length":20825,"saved":false}
{"ts":1351542540681,"patch":[[{"diffs":[[0,"alert($("],[-1,"this"],[1,"'#bgToolbar'"],[0,").style)"]],"start1":8627,"start2":8627,"length1":20,"length2":28}]],"length":20833,"saved":false}
{"ts":1351542550666,"patch":[[{"diffs":[[0,"olbar')."],[-1,"style"],[1,"container"],[0,");\n     "]],"start1":8641,"start2":8641,"length1":21,"length2":25}]],"length":20837,"saved":false}
{"ts":1351542572533,"patch":[[{"diffs":[[0,"oolbar')"],[-1,".container"],[0,");\n     "]],"start1":8640,"start2":8640,"length1":26,"length2":16}]],"length":20827,"saved":false}
{"ts":1351542582584,"patch":[[{"diffs":[[0,"oolbar')"],[1,".style"],[0,");\n     "]],"start1":8640,"start2":8640,"length1":16,"length2":22}]],"length":20833,"saved":false}
{"ts":1351542592921,"patch":[[{"diffs":[[0,"olbar')."],[-1,"style"],[1,"visibility"],[0,");\n     "]],"start1":8641,"start2":8641,"length1":21,"length2":26}]],"length":20838,"saved":false}
{"ts":1351542606870,"patch":[[{"diffs":[[0,"olbar')."],[-1,"visibility"],[1,"id"],[0,");\n     "]],"start1":8641,"start2":8641,"length1":26,"length2":18}]],"length":20830,"saved":false}
{"ts":1351542677359,"patch":[[{"diffs":[[0,"  alert("],[1,"JSON.stringify("],[0,"$('#bgTo"]],"start1":8625,"start2":8625,"length1":16,"length2":31},{"diffs":[[0,"oolbar')"],[-1,".id"],[1,")"],[0,");\n     "]],"start1":8655,"start2":8655,"length1":19,"length2":17}]],"length":20843,"saved":false}
{"ts":1351542688372,"patch":[[{"diffs":[[0,"ert("],[-1,"JSON.stringify("],[0,"$('#"]],"start1":8629,"start2":8629,"length1":23,"length2":8},{"diffs":[[0,"olbar'))"],[-1,")"],[0,";\n      "]],"start1":8641,"start2":8641,"length1":17,"length2":16}]],"length":20827,"saved":false}
{"ts":1351542699792,"patch":[[{"diffs":[[0,"oolbar')"],[1,".val()"],[0,");\n     "]],"start1":8640,"start2":8640,"length1":16,"length2":22}]],"length":20833,"saved":false}
{"ts":1351542722807,"patch":[[{"diffs":[[0,"r')."],[-1,"val()"],[1,"parent().id"],[0,");\n "]],"start1":8645,"start2":8645,"length1":13,"length2":19},{"diffs":[[0,"r')."],[-1,"container."],[0,"styl"]],"start1":8691,"start2":8691,"length1":18,"length2":8}]],"length":20829,"saved":false}
{"ts":1351542911813,"patch":[[{"diffs":[[0,"r')."],[-1,"parent()."],[0,"id);"]],"start1":8645,"start2":8645,"length1":17,"length2":8}]],"length":20820,"saved":false}
{"ts":1351542971671,"patch":[[{"diffs":[[0,"($('"],[-1,"#bgToolbar').id"],[1,".gui').style"],[0,");\n "]],"start1":8632,"start2":8632,"length1":23,"length2":20}]],"length":20817,"saved":false}
{"ts":1351543002098,"patch":[[{"diffs":[[0,"ert("],[-1,"$('.gui').style"],[1,"document.getElementById('bgToolbar').id"],[0,");\n "]],"start1":8629,"start2":8629,"length1":23,"length2":47}]],"length":20841,"saved":false}
{"ts":1351543012890,"patch":[[{"diffs":[[0,"olbar')."],[-1,"id"],[1,"style.visibility"],[0,");\n     "]],"start1":8662,"start2":8662,"length1":18,"length2":32}]],"length":20855,"saved":false}
{"ts":1351543050904,"patch":[[{"diffs":[[0,"    "],[-1,"alert("],[0,"docu"]],"start1":8623,"start2":8623,"length1":14,"length2":8},{"diffs":[[0,"lity"],[-1,");\n            $('#showBgToolbar').style.visibility"],[0," = '"]],"start1":8676,"start2":8676,"length1":59,"length2":8}]],"length":20798,"saved":false}
{"ts":1351543567081,"patch":[[{"diffs":[[0,"sible';\n"],[1,"            \n"],[0,"        "]],"start1":8686,"start2":8686,"length1":16,"length2":29}]],"length":20811,"saved":false}
{"ts":1351545278857,"patch":[[{"diffs":[[0,"wn\">"],[-1,"Tools "],[1,"Manage Images"],[0,"<b c"]],"start1":9897,"start2":9897,"length1":14,"length2":21},{"diffs":[[0,"u\">\n"],[-1,"                                        <li class=\"nav-header\">Images</li>\n"],[0,"    "]],"start1":9999,"start2":9999,"length1":83,"length2":8},{"diffs":[[0,"er\">"],[-1,"Galleries</li"],[1,"Account</li>\n                                        <li><a href=\"#\" onclick=\"changePassword();\">Change Password</a></li>\n                                        <li><a href=\"#\" onclick=\"deleteAccount();\">Delete Your Account</a></li>\n                                    </ul>\n                                </li>\n                                <li class=\"dropdown\">\n                                    <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">Manage Galleries<b class=\"caret\"></b></a>\n                                    <ul class=\"dropdown-menu\""],[0,">\n  "]],"start1":10666,"start2":10666,"length1":21,"length2":574},{"diffs":[[0,"          </li>\n"],[1,"                                <li class=\"dropdown\">\n                                    <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">Manage Account<b class=\"caret\"></b></a>\n                                    <ul class=\"dropdown-menu\">\n                                        <li><a href=\"#\" onclick=\"changePassword();\">Change Password</a></li>\n                                        <li><a href=\"#\" onclick=\"deleteAccount();\">Delete Your Account</a></li>\n                                    </ul>\n                                </li>\n"],[0,"                "]],"start1":12095,"start2":12095,"length1":32,"length2":585}]],"length":21849,"saved":false}
{"ts":1351545778206,"patch":[[{"diffs":[[0,"    });\n"],[1,"    var user = '<%=data.user%>';\n"],[0,"</script"]],"start1":8719,"start2":8719,"length1":16,"length2":49}]],"length":21882,"saved":false}
{"ts":1351548397936,"patch":[[{"diffs":[[0,"Child(myForm) ;\n"],[1,"  if(myInput5.getAttribute(\"value\"))\n  "],[0,"  myForm.submit("]],"start1":6736,"start2":6736,"length1":32,"length2":71}]],"length":21921,"saved":false}
{"ts":1351548442185,"patch":[[{"diffs":[[0,"\"value\")"],[1,".length>1"],[0,")\n    my"]],"start1":6779,"start2":6779,"length1":16,"length2":25}]],"length":21930,"saved":false}
{"ts":1351548473159,"patch":[[{"diffs":[[0,"ngth>1)\n    "],[1,"//"],[0,"myForm.submi"]],"start1":6790,"start2":6790,"length1":24,"length2":26}]],"length":21932,"saved":false}
{"ts":1351548550270,"patch":[[{"diffs":[[0,">1)\n    "],[-1,"//"],[0,"myForm.s"]],"start1":6794,"start2":6794,"length1":18,"length2":16}]],"length":21930,"saved":false}
{"ts":1351548558897,"patch":[[{"diffs":[[0,".length>"],[-1,"1"],[1,"3"],[0,")\n    my"]],"start1":6787,"start2":6787,"length1":17,"length2":17}]],"length":21930,"saved":false}
{"ts":1351548578122,"patch":[[{"diffs":[[0,"ength>3)"],[-1,"\n"],[1," {\n    "],[0,"    myFo"]],"start1":6789,"start2":6789,"length1":17,"length2":23},{"diffs":[[0," myForm.submit()"],[-1," "],[0,";"],[1,"\n  }"],[0,"\n  document.body"]],"start1":6807,"start2":6807,"length1":34,"length2":37}]],"length":21939,"saved":false}
{"ts":1351548629196,"patch":[[{"diffs":[[0,"it();\n  "],[-1,"}\n"],[1,"    "],[0,"  docume"]],"start1":6819,"start2":6819,"length1":18,"length2":20},{"diffs":[[0,"oveChild(myForm)"],[-1," "],[0,";"],[1,"\n  }"],[0,"\n}\nfunction goHo"]],"start1":6850,"start2":6850,"length1":34,"length2":37}]],"length":21944,"saved":false}
{"ts":1351549067916,"patch":[[{"diffs":[[0,"\"value\", el."],[-1,"parentNode."],[0,"id.substring"]],"start1":4933,"start2":4933,"length1":35,"length2":24},{"diffs":[[0,"string(0,el."],[-1,"parentNode."],[0,"id.length-3)"]],"start1":4951,"start2":4951,"length1":35,"length2":24}]],"length":21922,"saved":false}
{"ts":1351549109343,"patch":[[{"diffs":[[0,".id.length-3));\n"],[1,"    alert(el.id.substring(0,el.id.length-3));\n"],[0,"    myForm.appen"]],"start1":4962,"start2":4962,"length1":32,"length2":78}]],"length":21968,"saved":false}
{"ts":1351549126597,"patch":[[{"diffs":[[0,"l.id"],[-1,".substring(0,el.id.length-3)"],[0,");\n "]],"start1":4989,"start2":4989,"length1":36,"length2":8}]],"length":21940,"saved":false}
{"ts":1351549168621,"patch":[[{"diffs":[[0,"lert(el."],[1,"img."],[0,"id);\n   "]],"start1":4983,"start2":4983,"length1":16,"length2":20}]],"length":21944,"saved":false}
{"ts":1351549202416,"patch":[[{"diffs":[[0,"lert(el."],[-1,"img"],[1,"firstChild"],[0,".id);\n  "]],"start1":4983,"start2":4983,"length1":19,"length2":26}]],"length":21951,"saved":false}
{"ts":1351549297087,"patch":[[{"diffs":[[0,"lert(el."],[1,"parentNode."],[0,"firstChi"]],"start1":4983,"start2":4983,"length1":16,"length2":27}]],"length":21962,"saved":false}
{"ts":1351549375310,"patch":[[{"diffs":[[0," el."],[-1,"id.substring(0,el.id.length-3));\n    alert("],[1,"parentNode.firstChild.id.substring(0,"],[0,"el.p"]],"start1":4941,"start2":4941,"length1":51,"length2":45},{"diffs":[[0,"Child.id"],[1,".length-3)"],[0,");\n    m"]],"start1":5001,"start2":5001,"length1":16,"length2":26}]],"length":21966,"saved":false}
{"ts":1351549504265,"patch":[[{"diffs":[[0,"d.id"],[-1,".substring(0,el.parentNode.firstChild.id.length-3)"],[0,");\n "]],"start1":4965,"start2":4965,"length1":58,"length2":8}]],"length":21916,"saved":false}
{"contributors":[],"silentsave":false,"ts":1351550378008,"patch":[[{"diffs":[[1,"<!DOCTYPE HTML>\n<!--[if lt IE 7]>      <html class=\"no-js lt-ie9 lt-ie8 lt-ie7\"> <![endif]-->\n<!--[if IE 7]>         <html class=\"no-js lt-ie9 lt-ie8\"> <![endif]-->\n<!--[if IE 8]>         <html class=\"no-js lt-ie9\"> <![endif]-->\n<!--[if gt IE 8]><!--> <html class=\"no-js\"> <!--<![endif]-->\n<head>\n<meta charset=\"utf-8\">\n<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n<title>Photo (Beta)</title>\n<meta name=\"description\" content=\"\">\n<meta http-equiv=\"content-language\" content=\"en\" />\n<meta name=\"viewport\" content=\"width=device-width\">\n<link rel=\"stylesheet\" href=\"/css/bootstrap.css\">\n<link rel=\"stylesheet\" href=\"/css/bootstrap-responsive.min.css\">\n<link rel=\"stylesheet\" href=\"http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css\" />\n<script src=\"http://code.jquery.com/jquery-1.8.2.js\"></script>\n<script src=\"http://code.jquery.com/ui/1.9.0/jquery-ui.js\"></script>\n<script src=\"/js/modernizr-2.6.1-respond-1.1.0.min.js\"></script>\n<!--<script src=\"/js/jquery.ui.touch-punch.min.js\"></script>-->\n<!--Import JQuery.cookie.js-->\n<script src=\"http://riak.kristsauders.com/buckets/att-js/keys/jquery.cookie.js\"></script>\n    \t<meta name=\"viewport\" content=\"width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;\"/>\n\t\t<style type=\"text/css\">\n\t\t\t*\n\t\t\t{\n\t\t\t\tcolor: #444;\n\t\t\t\t/*font-family: Monospace;*/\n\t\t\t\t/*font-size: 12px;*/\n\t\t\t}\n\t\t\t\n\t\t\tbody\n\t\t\t{\n\t\t\t\tmargin: 0px;\n\t\t\t\toverflow: scroll;\n\t\t\t}\n\t\t\t\n\t\t\tselect\n\t\t\t{\n\t\t\t\ttext-transform: uppercase;\n\t\t\t\tfont-size: 11px;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\t\t\t\n\t\t\thr\n\t\t\t{\n\t\t\t\tborder: 0;\n\t\t\t\theight: 1px;\n\t\t\t\tbackground-color: #ccc;\n\t\t\t\tmargin: 20px 0px;\n\t\t\t}\n\t\t\t\n\t\t\t.gui\n\t\t\t{\n\t\t\t\tcolor: black;\n\t\t\t\twidth: 500px;\n\t\t\t\tbackground-color: gray;\n\t\t\t\t//border-bottom: 1px solid #ddd;\n\t\t\t\t//padding: 5px 10px;\n\t\t\t\ttext-align: center;\n\t\t\t\t//text-transform: uppercase;\n\t\t\t\tline-height: 28px;\n                font-size: 1.3em;\n\t\t\t\tcursor: default;\n                opacity:0.95;\n                z-index:13000;\n                    -moz-box-shadow: 1px 1px 25px #999;\n                \t-webkit-box-shadow: 1px 1px 25px #999;\n                    box-shadow: 1px 1px 25px #999;\n\t\t\t}\n\t\t\t\n\t\t\t.button\n\t\t\t{\n\t\t\t\tpadding: 2px;\n\t\t\t\tcursor: pointer;\n                font-size:1.5em;\n\t\t\t}\n\t\t\t\n\t\t\t.key\n\t\t\t{\n\t\t\t\tpadding: 0px 8px;\n\t\t\t\tmargin-left: 1px;\n\t\t\t\tbackground-color: #eee;\n\t\t\t}\n            .ui-wrapper {\n                opacity: 1;\n            }\n            .ui-wrapper:hover {\n                opacity: 1;\n                /*Reflection*/ \n                /*-webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(.7, transparent), to(rgba(0,0,0,0.4)));   */\n                /*Glow*/ \n                -webkit-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); -moz-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); box-shadow: 0px 0px 5px rgba(255,255,255,0.8); \n            }\n            img[alt] {\n                font-size: 2em;\n            }\n            .no-hover {\n                opacity: 1;  \n                -webkit-box-shadow: 0px 0px 0px; -moz-box-shadow: 0px 0px 0px; box-shadow: 0px 0px 0px;\n            }\n            .no-hover:hover {\n                opacity: 1;  \n                -webkit-box-shadow: 0px 0px 0px; -moz-box-shadow: 0px 0px 0px; box-shadow: 0px 0px 0px;\n            }\n            .ui-widget-overlay {\n               background: #111111;\n               opacity: .80;\n               filter: Alpha(Opacity=80);\n            }\n            .string { color: green; }\n            .number { color: dark#BDBDBD; }\n            .boolean { color: #BDBDBD; }\n            .null { color: magenta; }\n            .key { color: red; }\n.drag {position: absolute;}\n//img {\n//    -moz-box-shadow: 1px 1px 12px #999;\n//\t-webkit-box-shadow: 1px 1px 12px #999;\n//        box-shadow: 1px 1px 12px #999;\n//        }\n//img:hover {\n//\t-moz-box-shadow: 1px 1px 24px #999;\n//\t-webkit-box-shadow: 1px 1px 24px #999;\n//        box-shadow: 1px 1px 24px #999;\n//}\n.toolbar {\nbottom:0px;\nleft:-10%;\nwidth:110%;\nheight:25px;\nbackground-color:gray; \nopacity:0.95;\nposition:fixed;\nz-index:13000;\n\t-moz-box-shadow: 1px 1px 25px #999;\n\t-webkit-box-shadow: 1px 1px 25px #999;\n        box-shadow: 1px 1px 25px #999;\n}\n.titlebar {\nvisibility:hidden;\ntop:0px;\nleft:-10%;\nwidth:110%;\nheight:25px;\nbackground-color:gray; \nopacity:0.95;\nposition:fixed;\n/*font-family:Arial;*/\nfont-size:16px;\nz-index:5000;\n\t-moz-box-shadow: 1px 1px 25px #999;\n\t-webkit-box-shadow: 1px 1px 25px #999;\n        box-shadow: 1px 1px 25px #999;\n}\n\t\t</style>\n<script src=\"/js/functions.js\"></script>\n<script type=\"text/javascript\">\nfunction deleteImage(el) {\n    saveToLocalStorage();\n\tsetPageScroll();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"post\" ;\n  myForm.action = \"/<%=data.params.user + '/' + data.params.gallery%>/photos/delete\";\n    var myInput = document.createElement(\"input\") ;\n    myInput.setAttribute(\"name\", \"file\") ;\n    myInput.setAttribute(\"value\", el.parentNode.firstChild.id);\n    myForm.appendChild(myInput) ;\n    var myInput5 = document.createElement(\"input\") ;\n    myInput5.setAttribute(\"name\", \"deleteIsOn\") ;\n    myInput5.setAttribute(\"value\", \"false\");\n    myForm.appendChild(myInput5) ;\n  document.body.appendChild(myForm) ;\n  myForm.submit() ;\n  document.body.removeChild(myForm) ;\n}\nfunction saveCoords(dd) {\n    saveToLocalStorage();\n    setPageScroll();\n    \n    var data = new Object();\n    data.side = parseInt($(dd).css('left'))*(1366/getWindowSize()[0]);\n    data.top = parseInt($(dd).css('top'))*(1366/getWindowSize()[0]);\n    data.image = $(dd).find('img')[0].src.split(\"/\").pop().replace('-small','').replace('-medium','').replace('-large','');\n    data.width = parseInt($(dd).css('width'))*(1366/getWindowSize()[0]);\n    data.height = parseInt($(dd).css('height'))*(1366/getWindowSize()[0]);\n    data.deleteIsOn = '';\n    data.z = $(dd).css('z-index');\n    $.ajax({\n      type: 'POST',\n      url: '/<%=data.params.user + '/' + data.params.gallery%>/upsert',\n      data: data,\n      success: success(),\n      dataType: 'json'\n    });\n}\nfunction updateLink(el) {\n    saveToLocalStorage();\n    setPageScroll();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"post\" ;\n  myForm.action = \"/<%=data.params.user + '/' + data.params.gallery%>/updateLink\";\n    var myInput = document.createElement(\"input\") ;\n    myInput.setAttribute(\"name\", \"file\") ;\n    myInput.setAttribute(\"value\", el.parentNode.firstChild.id);\n    myForm.appendChild(myInput) ;\n    var myInput5 = document.createElement(\"input\") ;\n    myInput5.setAttribute(\"name\", \"link\") ;\n    myInput5.setAttribute(\"value\", prompt(\"Link\", \"\"));\n    myForm.appendChild(myInput5) ;\n  document.body.appendChild(myForm) ;\n  if(myInput5.getAttribute(\"value\").length>3) {\n        myForm.submit();\n        document.body.removeChild(myForm);\n  }\n}\nfunction goHome() {\n  saveToLocalStorage();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"get\" ;\n  myForm.action = '/home/users';\n  document.body.appendChild(myForm);\n  myForm.submit();\n  document.body.removeChild(myForm);\n}\n    $(function() {\n        $( \".drag\" ).resizable({\n            aspectRatio: true,\n            stop: function(event) {\n                var elements = document.getElementsByClassName(\"ui-wrapper\");\n                var highest_index = 0;\n                for (var i = 0; i < elements.length - 1; i++) {\n                    if (parseInt(elements[i].style.zIndex) > highest_index) {\n                        if(elements[i]!=event.target)\n                            highest_index = parseInt(elements[i].style.zIndex);\n                    }\n                }\n                event.target.style.zIndex = highest_index + 1;\n                saveCoords(event.target);\n            }\n        });\n        $(\".ui-wrapper\").draggable({\n            zIndex: 15000,\n            stop: function(event) {\n                var elements = document.getElementsByClassName(\"ui-wrapper\");\n                var highest_index = 0;\n                for (var i = 0; i < elements.length - 1; i++) {\n                    if (parseInt(elements[i].style.zIndex) > highest_index) {\n                        if(elements[i]!=event.target)\n                            highest_index = parseInt(elements[i].style.zIndex);\n                    }\n                }\n                event.target.style.zIndex = highest_index + 1;\n                saveCoords(event.target);\n            }\n        }).click(function(event) {\n            fullScreen(event.target);\n        });\n    });\n    // Attach JQuery.click() functions to buttons\n    $(document).ready(function(){\n        $(\"#showBgToolbar\").click(function () {\n            document.getElementById('bgToolbar').style.visibility = 'visible';\n            \n        });\n    });\n    var user = '<%=data.user%>';\n</script>\n</head>\n\n<body oncontextmenu=\"return false;\" >\n\n        <!-- This code is taken from http://twitter.github.com/bootstrap/examples/hero.html -->\n        <div class=\"navbar navbar-inverse navbar-fixed-top\">\n            <div class=\"navbar-inner\">\n                <div class=\"container\">\n                    <a class=\"btn btn-navbar\" data-toggle=\"collapse\" data-target=\".nav-collapse\">\n                        <span class=\"icon-bar\"></span>\n                        <span class=\"icon-bar\"></span>\n                        <span class=\"icon-bar\"></span>\n                    </a>\n                    <a class=\"brand\" href=\"/\">Photo (Beta)</a>\n                    <div class=\"nav-collapse collapse\">\n                        <ul class=\"nav\">\n                            <li><a href=\"/home/users\">Users</a></li>\n                            <li><a href=\"/<%=data.params.user%>\">Galleries</a></li>\n                            <li class=\"active\"><a href=\"#\">Gallery</a></li>\n                            <% if(data.loggedin) { %>\n                                <li class=\"dropdown\">\n                                    <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">Manage Images<b class=\"caret\"></b></a>\n                                    <ul class=\"dropdown-menu\">\n                                        <li><a href=\"#\" onclick=\"showUpload();\">Upload Images</a></li>\n                                        <li><a href=\"#\" onclick=\"showDelete();\">Select &amp; Delete Images</a></li>\n                                        <li><a href=\"#\" onclick=\"showLinkUpdate();\">Update Image Link</a></li>\n                                        <li><a href=\"#\" onclick=\"drawImage();\">Draw an Image</a></li>\n                                        <li><a href=\"#\" id=\"showBgToolbar\">Show Background Tools</a></li>\n                                        <li class=\"divider\"></li>\n                                        <li class=\"nav-header\">Account</li>\n                                        <li><a href=\"#\" onclick=\"changePassword();\">Change Password</a></li>\n                                        <li><a href=\"#\" onclick=\"deleteAccount();\">Delete Your Account</a></li>\n                                    </ul>\n                                </li>\n                                <li class=\"dropdown\">\n                                    <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">Manage Galleries<b class=\"caret\"></b></a>\n                                    <ul class=\"dropdown-menu\">\n                                        <li><a href=\"#\" onclick=\"newGallery();\">New Gallery</a></li>\n                                        <li><a href=\"#\" onclick=\"deleteGallery();\">Delete Gallery</a></li>\n                                        <li><a href=\"#\" onclick=\"publishGallery();\">Publish Gallery</a></li>\n                                        <li><a href=\"#\" onclick=\"unpublishGallery();\">Unpublish Gallery</a></li>\n                                        <li class=\"divider\"></li>\n                                        <li class=\"nav-header\">Account</li>\n                                        <li><a href=\"#\" onclick=\"changePassword();\">Change Password</a></li>\n                                        <li><a href=\"#\" onclick=\"deleteAccount();\">Delete Your Account</a></li>\n                                    </ul>\n                                </li>\n                                <li class=\"dropdown\">\n                                    <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">Manage Account<b class=\"caret\"></b></a>\n                                    <ul class=\"dropdown-menu\">\n                                        <li><a href=\"#\" onclick=\"changePassword();\">Change Password</a></li>\n                                        <li><a href=\"#\" onclick=\"deleteAccount();\">Delete Your Account</a></li>\n                                    </ul>\n                                </li>\n                            <% } %>\n                        </ul>\n                        <% if(data.loggedin) { %>\n                            <form class=\"navbar-form pull-right\" action=\"/users/list/logout\" method=\"POST\">\n                            <input type=\"hidden\" name=\"form\" value=\"true\">\n                            <button type=\"submit\" class=\"btn btn-small btn-primary\">Log Out</button>\n                        </form>\n                        <% } else { %>\n                        <form class=\"navbar-form pull-right\" action=\"/users/list/login\" method=\"POST\">\n                            <input class=\"span2\" type=\"text\" name=\"user\" placeholder=\"Username\">\n                            <input class=\"span2\" type=\"password\" name=\"password\" placeholder=\"Password\">\n                            <input type=\"hidden\" name=\"form\" value=\"true\">\n                            <button type=\"submit\" class=\"btn btn-primary\">Sign in</button>\n                        </form>\n                        <% } %>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    <!-- Background drawing code here -->\n    \t<script type=\"text/javascript\" src=\"/js/brushes/circles.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/chrome.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/fur.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/grid.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/longfur.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/ribbon.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/shaded.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/simple.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/sketchy.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/squares.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/web.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/colorutils.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/colorselector.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/palette.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/menu.js\"></script>\n\t\t<!--<script type=\"text/javascript\" src=\"js/about.js\"></script>-->\t\n\t\t<script type=\"text/javascript\" src=\"/js/main.js\"></script>\n\t\t<script type=\"text/javascript\">\n\t\tcontext.clearRect(0,0,canvas.width,canvas.height);\n\t\t\tvar img     = new Image();\n\t    \timg.onload  = function() {\n\t        \tcontext.drawImage(img, 0, 0, canvas.width, (img.height/img.width)*canvas.width);\n\t    \t}\n\t    \timg.src     = \"/images/<%=data.params.user + '-' + data.params.gallery%>-bg.png\";\n\t\t</script>\n\n<!-- The old menu bar at the bottom \n  <div align=\"center\" class=\"toolbar\" id=\"toolbar\" style=\"z-index:13000;\">\n   &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \n  <input type=\"button\" onclick=\"goHome();\" value=\"Home\" />\n  <input type=\"button\" onclick=\"logout();\" value=\"Log Out\" />\n  <input type=\"button\" onclick=\"showUpload();\" value=\"Upload new images\" />\n  <input type=\"button\" onclick=\"drawImage();\" value=\"Draw image\" />\n  <input type=\"button\" id=\"adminDeleteButton\" onclick=\"showDelete();\" value=\"Delete image\" />\n  <input type=\"button\" id=\"updateLinkButton\" onclick=\"showLinkUpdate();\" value=\"Update Image Link\" />\n  <input type=\"button\" id=\"publishGallery\" onclick=\"publishGallery();\" value=\"Publish Gallery\" />\n  <input type=\"button\" id=\"unpublishGallery\" onclick=\"unpublishGallery();\" value=\"Unpublish Gallery\" />\n  </div>\n-->\n\n<!--<script type=\"text/javascript\" src=\"/js/wz_dragdrop.js\"></script>-->\n\n\n<table width=\"100%\" height=\"100%\">\n  <tr>\n    <td align=\"center\" valign=\"middle\">\n\t\t<div name=\"upload\" id=\"upload\" style=\"position:fixed;visibility:hidden;left:30%;top:40%;width:40%;z-index:12000;font-family:Arial;font-size:18px;\" align=\"center\">\n\t\t<form name=\"upload\" action=\"/<%=data.params.user + '/' + data.params.gallery%>/photos/new\" enctype=\"multipart/form-data\" method=\"post\">\n\t\t<b>Select files to upload:</b><br/>\n\t\t<input type=\"file\" name=\"image\" multiple/>\n\t\t<input type=\"submit\" name=\"Upload\" value=\"Upload\"/><input type=\"button\" onclick=\"hideUpload();\" value=\"Cancel\" />\n\t\t</form></div><br/>\t\t\n\t</td>\n  </tr>\n  <!--\n  <tr>\n    <td align=\"center\" valign=\"middle\">\n\t\t<div name=\"uploadLink\" id=\"uploadLink\" style=\"position:fixed;visibility:hidden;left:30%;top:40%;width:40%;z-index:12000;font-family:Arial;font-size:18px;\" align=\"center\">\n\t\t<form name=\"uploadLink\" action=\"/<%=data.params.user + '/' + data.params.gallery%>/photos/newlink\" enctype=\"multipart/form-data\" method=\"post\">\n\t\tLink or Javascript: <textarea name=\"link\" rows=\"10\" cols=\"50\"></textarea><br/>\n\t\t<b>Select file to upload:</b><br/>\n\t\t<input type=\"file\" name=\"image\" /><br/>\n\t\t<input type=\"submit\" name=\"uploadLink\" value=\"Upload file\"/><input type=\"button\" onclick=\"hideLinkUpload();\" value=\"Cancel\" />\n\t\t</form></div><br/>\t\t\n\t</td>\n  </tr>\n  -->\n</table>\n\n<div name=\"overlay\" id=\"overlay\" style=\"left:-50px;top:-50px;position:fixed;visibility:hidden;width:150%;height:150%;z-index:11000;background-color:gray;opacity:0.95;\" ></div>\n\n<% var il = \"\";\nfor(var i in data.images) { \n    if(data.images[i].link.length>2) {\n          %>\n    \t  <div style=\"visibility:hidden;\" id=\"<%=data.images[i].source.split('/').pop()%>link\"><%=data.images[i].link%></div>\n    \t  <%\n    }\n    if((data.images[i].width<400) && (data.images[i].height<400)) {\n%>\n<img src=\"<%=data.images[i].source.split('.')[0]+'-small.'+data.images[i].source.split('.')[1]%>\" style=\"z-index:<%=data.images[i].z%>;width:<%=Math.round(data.images[i].width)%>px;height:<%=Math.round(data.images[i].height)%>px;left:<%=Math.round(data.images[i].left)%>px;top:<%=Math.round(data.images[i].top)%>px;\" class=\"drag\" id=\"<%=data.images[i].source.split('/').pop()%>\" />\n<% \n} else if((data.images[i].width<900) && (data.images[i].height<900)) {\n%>\n<img src=\"<%=data.images[i].source.split('.')[0]+'-medium.'+data.images[i].source.split('.')[1]%>\" style=\"z-index:<%=data.images[i].z%>;width:<%=Math.round(data.images[i].width)%>px;height:<%=Math.round(data.images[i].height)%>px;left:<%=Math.round(data.images[i].left)%>px;top:<%=Math.round(data.images[i].top)%>px;\" class=\"drag\" id=\"<%=data.images[i].source.split('/').pop()%>\" />\n<%\n} else {\n%>\n<img src=\"<%=data.images[i].source.split('.')[0]+'-large.'+data.images[i].source.split('.')[1]%>\" style=\"z-index:<%=data.images[i].z%>;width:<%=Math.round(data.images[i].width)%>px;height:<%=Math.round(data.images[i].height)%>px;left:<%=Math.round(data.images[i].left)%>px;top:<%=Math.round(data.images[i].top)%>px;\" class=\"drag\" id=\"<%=data.images[i].source.split('/').pop()%>\" />\n<%\n}\nil += data.images[i].source.split('/').pop() + '\",\"';\n} %>\n\n<%\n    if((data.params.user=='home') && (data.params.gallery!='users')) {\n        var c = 0; %>ha<%\n        for(var i in data.galleries) {\n            var source = data.galleries[i][0];\n            if(source) source = source.source;\n            else source = \"\";\n            c++;\n%>\n            <a href=\"<%='/' + data.params.u + '/' + i%>\">\n            <!--\n                <img title=\"<%=i%>\" src=\"<%=source.split('.')[0]+'-small.'+source.split('.')[1]%>\" style=\"z-index:10;position:absolute;left:<%=300+250*(c % 3)%>px;top:<%=150+150*Math.floor((c-1)/3)%>px;width:210px;height:140px;\" />\n            -->\n                <img class=\"gridImg\" alt=\"<%=i%>\" src=\"<%=source.split('.')[0]+'-small.'+source.split('.')[1]%>\" style=\"border:2px solid white;z-index:10;position:absolute;left:<%=300+250*(c % 3)%>px;top:<%=150+150*Math.floor((c-1)/3)%>px;width:210px;height:140px;\" />\n            </a>\n<%\n        }\n    }\n%>\n\n<%\n    if((data.params.user=='home') && (data.params.gallery=='users')) {\n        var c = 0;\n        for(var i in data.users) {\n            c++;\n%>\n            <a href=\"<%='/home/' + data.users[i]%>\">\n                <img alt=\"<%=data.users[i]%>\" src=\"\" style=\"border:2px solid white;z-index:10;position:absolute;left:<%=300+250*(c % 3)%>px;top:<%=150+150*Math.floor((c-1)/3)%>px;width:210px;height:140px;\" />\n            </a>\n<%\n        }\n    }\n%>\n\n<script type=\"text/javascript\">\nfunction setDraggables() {\n\tSET_DHTML(SCALABLE, SCROLL, \"<%- il.substring(0, il.length-3)%>\");\n}\nresizeFirst();\n//setDraggables(); \npageScroll();\nif(false) showDelete();\nfunction setHover() {\n\tx = document.getElementsByTagName(\"img\");\n\tfor (i=0;i<x.length;i++)\n\t{\n\t\tif(x[i].name.split(\"jpgdivNI\")[1]==\"mG\") {\n\t\t\tx[i].onmouseover = function() {fullScreenButton(this);};\n\t\t\tx[i].onmouseout = function() {deleteFullScreenButton(this);};\n\t\t}\n\t}\n}\n//setHover();\n</script>\n\n\n<div id=\"fullScreenImg\" style=\"top:4%;visibility:hidden;z-index:12000;position:fixed;\">\n<img class=\"no-hover\" id =\"fullScreenImage\" style=\"top:0px;left:0px;position:absolute;z-index:12001;visibility:hidden;\" src=\"\" />\n<img class=\"no-hover\" id=\"closeFullscreenButton\" src=\"/images/close.png\" style=\"cursor:pointer;visibility:hidden;position:absolute;left:-40px;top:0px;z-index:10000;\" onclick=\"closeFullscreen();\"/>\n</div>\n<!--<img src=\"/images/upArrow.png\" style=\"visibility:hidden\" />\n<img src=\"/images/downArrow.png\" style=\"visibility:hidden\" />-->\n\n<script src=\"/js/bootstrap.min.js\"></script>\n</body>\n</html>\n"]],"start1":0,"start2":0,"length1":0,"length2":21888}]],"length":21888,"saved":false}
{"contributors":[],"silentsave":false,"ts":1351633514039,"patch":[[{"diffs":[[1,"<!DOCTYPE HTML>\n<!--[if lt IE 7]>      <html class=\"no-js lt-ie9 lt-ie8 lt-ie7\"> <![endif]-->\n<!--[if IE 7]>         <html class=\"no-js lt-ie9 lt-ie8\"> <![endif]-->\n<!--[if IE 8]>         <html class=\"no-js lt-ie9\"> <![endif]-->\n<!--[if gt IE 8]><!--> <html class=\"no-js\"> <!--<![endif]-->\n<head>\n<meta charset=\"utf-8\">\n<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n<title>Photo (Beta)</title>\n<meta name=\"description\" content=\"\">\n<meta http-equiv=\"content-language\" content=\"en\" />\n<meta name=\"viewport\" content=\"width=device-width\">\n<link rel=\"stylesheet\" href=\"/css/bootstrap.css\">\n<link rel=\"stylesheet\" href=\"/css/bootstrap-responsive.min.css\">\n<link rel=\"stylesheet\" href=\"http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css\" />\n<script src=\"http://code.jquery.com/jquery-1.8.2.js\"></script>\n<script src=\"http://code.jquery.com/ui/1.9.0/jquery-ui.js\"></script>\n<script src=\"/js/modernizr-2.6.1-respond-1.1.0.min.js\"></script>\n<!--<script src=\"/js/jquery.ui.touch-punch.min.js\"></script>-->\n<!--Import JQuery.cookie.js-->\n<script src=\"http://riak.kristsauders.com/buckets/att-js/keys/jquery.cookie.js\"></script>\n    \t<meta name=\"viewport\" content=\"width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;\"/>\n\t\t<style type=\"text/css\">\n\t\t\t*\n\t\t\t{\n\t\t\t\tcolor: #444;\n\t\t\t\t/*font-family: Monospace;*/\n\t\t\t\t/*font-size: 12px;*/\n\t\t\t}\n\t\t\t\n\t\t\tbody\n\t\t\t{\n\t\t\t\tmargin: 0px;\n\t\t\t\toverflow: scroll;\n\t\t\t}\n\t\t\t\n\t\t\tselect\n\t\t\t{\n\t\t\t\ttext-transform: uppercase;\n\t\t\t\tfont-size: 11px;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\t\t\t\n\t\t\thr\n\t\t\t{\n\t\t\t\tborder: 0;\n\t\t\t\theight: 1px;\n\t\t\t\tbackground-color: #ccc;\n\t\t\t\tmargin: 20px 0px;\n\t\t\t}\n\t\t\t\n\t\t\t.gui\n\t\t\t{\n\t\t\t\tcolor: black;\n\t\t\t\twidth: 500px;\n\t\t\t\tbackground-color: gray;\n\t\t\t\t//border-bottom: 1px solid #ddd;\n\t\t\t\t//padding: 5px 10px;\n\t\t\t\ttext-align: center;\n\t\t\t\t//text-transform: uppercase;\n\t\t\t\tline-height: 28px;\n                font-size: 1.3em;\n\t\t\t\tcursor: default;\n                opacity:0.95;\n                z-index:13000;\n                    -moz-box-shadow: 1px 1px 25px #999;\n                \t-webkit-box-shadow: 1px 1px 25px #999;\n                    box-shadow: 1px 1px 25px #999;\n\t\t\t}\n\t\t\t\n\t\t\t.button\n\t\t\t{\n\t\t\t\tpadding: 2px;\n\t\t\t\tcursor: pointer;\n                font-size:1.5em;\n\t\t\t}\n\t\t\t\n\t\t\t.key\n\t\t\t{\n\t\t\t\tpadding: 0px 8px;\n\t\t\t\tmargin-left: 1px;\n\t\t\t\tbackground-color: #eee;\n\t\t\t}\n            .ui-wrapper {\n                opacity: 1;\n            }\n            .ui-wrapper:hover {\n                opacity: 1;\n                /*Reflection*/ \n                /*-webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(.7, transparent), to(rgba(0,0,0,0.4)));   */\n                /*Glow*/ \n                -webkit-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); -moz-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); box-shadow: 0px 0px 5px rgba(255,255,255,0.8); \n            }\n            img[alt] {\n                font-size: 2em;\n            }\n            .no-hover {\n                opacity: 1;  \n                -webkit-box-shadow: 0px 0px 0px; -moz-box-shadow: 0px 0px 0px; box-shadow: 0px 0px 0px;\n            }\n            .no-hover:hover {\n                opacity: 1;  \n                -webkit-box-shadow: 0px 0px 0px; -moz-box-shadow: 0px 0px 0px; box-shadow: 0px 0px 0px;\n            }\n            .ui-widget-overlay {\n               background: #111111;\n               opacity: .80;\n               filter: Alpha(Opacity=80);\n            }\n            .string { color: green; }\n            .number { color: dark#BDBDBD; }\n            .boolean { color: #BDBDBD; }\n            .null { color: magenta; }\n            .key { color: red; }\n.drag {position: absolute;}\n//img {\n//    -moz-box-shadow: 1px 1px 12px #999;\n//\t-webkit-box-shadow: 1px 1px 12px #999;\n//        box-shadow: 1px 1px 12px #999;\n//        }\n//img:hover {\n//\t-moz-box-shadow: 1px 1px 24px #999;\n//\t-webkit-box-shadow: 1px 1px 24px #999;\n//        box-shadow: 1px 1px 24px #999;\n//}\n.toolbar {\nbottom:0px;\nleft:-10%;\nwidth:110%;\nheight:25px;\nbackground-color:gray; \nopacity:0.95;\nposition:fixed;\nz-index:13000;\n\t-moz-box-shadow: 1px 1px 25px #999;\n\t-webkit-box-shadow: 1px 1px 25px #999;\n        box-shadow: 1px 1px 25px #999;\n}\n.titlebar {\nvisibility:hidden;\ntop:0px;\nleft:-10%;\nwidth:110%;\nheight:25px;\nbackground-color:gray; \nopacity:0.95;\nposition:fixed;\n/*font-family:Arial;*/\nfont-size:16px;\nz-index:5000;\n\t-moz-box-shadow: 1px 1px 25px #999;\n\t-webkit-box-shadow: 1px 1px 25px #999;\n        box-shadow: 1px 1px 25px #999;\n}\n\t\t</style>\n<script src=\"/js/functions.js\"></script>\n<script type=\"text/javascript\">\nfunction deleteImage(el) {\n    saveToLocalStorage();\n\tsetPageScroll();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"post\" ;\n  myForm.action = \"/<%=data.params.user + '/' + data.params.gallery%>/photos/delete\";\n    var myInput = document.createElement(\"input\") ;\n    myInput.setAttribute(\"name\", \"file\") ;\n    myInput.setAttribute(\"value\", el.parentNode.firstChild.id);\n    myForm.appendChild(myInput) ;\n    var myInput5 = document.createElement(\"input\") ;\n    myInput5.setAttribute(\"name\", \"deleteIsOn\") ;\n    myInput5.setAttribute(\"value\", \"false\");\n    myForm.appendChild(myInput5) ;\n  document.body.appendChild(myForm) ;\n  myForm.submit() ;\n  document.body.removeChild(myForm) ;\n}\nfunction saveCoords(dd) {\n    saveToLocalStorage();\n    setPageScroll();\n    \n    var data = new Object();\n    data.side = parseInt($(dd).css('left'))*(1366/getWindowSize()[0]);\n    data.top = parseInt($(dd).css('top'))*(1366/getWindowSize()[0]);\n    data.image = $(dd).find('img')[0].src.split(\"/\").pop().replace('-small','').replace('-medium','').replace('-large','');\n    data.width = parseInt($(dd).css('width'))*(1366/getWindowSize()[0]);\n    data.height = parseInt($(dd).css('height'))*(1366/getWindowSize()[0]);\n    data.deleteIsOn = '';\n    data.z = $(dd).css('z-index');\n    $.ajax({\n      type: 'POST',\n      url: '/<%=data.params.user + '/' + data.params.gallery%>/upsert',\n      data: data,\n      success: success(),\n      dataType: 'json'\n    });\n}\nfunction updateLink(el) {\n    saveToLocalStorage();\n    setPageScroll();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"post\" ;\n  myForm.action = \"/<%=data.params.user + '/' + data.params.gallery%>/updateLink\";\n    var myInput = document.createElement(\"input\") ;\n    myInput.setAttribute(\"name\", \"file\") ;\n    myInput.setAttribute(\"value\", el.parentNode.firstChild.id);\n    myForm.appendChild(myInput) ;\n    var myInput5 = document.createElement(\"input\") ;\n    myInput5.setAttribute(\"name\", \"link\") ;\n    myInput5.setAttribute(\"value\", prompt(\"Link\", \"\"));\n    myForm.appendChild(myInput5) ;\n  document.body.appendChild(myForm) ;\n  if(myInput5.getAttribute(\"value\").length>3) {\n        myForm.submit();\n        document.body.removeChild(myForm);\n  }\n}\nfunction goHome() {\n  saveToLocalStorage();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"get\" ;\n  myForm.action = '/home/users';\n  document.body.appendChild(myForm);\n  myForm.submit();\n  document.body.removeChild(myForm);\n}\n    $(function() {\n        $( \".drag\" ).resizable({\n            aspectRatio: true,\n            stop: function(event) {\n                var elements = document.getElementsByClassName(\"ui-wrapper\");\n                var highest_index = 0;\n                for (var i = 0; i < elements.length - 1; i++) {\n                    if (parseInt(elements[i].style.zIndex) > highest_index) {\n                        if(elements[i]!=event.target)\n                            highest_index = parseInt(elements[i].style.zIndex);\n                    }\n                }\n                event.target.style.zIndex = highest_index + 1;\n                saveCoords(event.target);\n            }\n        });\n        $(\".ui-wrapper\").draggable({\n            zIndex: 15000,\n            stop: function(event) {\n                var elements = document.getElementsByClassName(\"ui-wrapper\");\n                var highest_index = 0;\n                for (var i = 0; i < elements.length - 1; i++) {\n                    if (parseInt(elements[i].style.zIndex) > highest_index) {\n                        if(elements[i]!=event.target)\n                            highest_index = parseInt(elements[i].style.zIndex);\n                    }\n                }\n                event.target.style.zIndex = highest_index + 1;\n                saveCoords(event.target);\n            }\n        }).click(function(event) {\n            fullScreen(event.target);\n        });\n    });\n    // Attach JQuery.click() functions to buttons\n    $(document).ready(function(){\n        $(\"#showBgToolbar\").click(function () {\n            document.getElementById('bgToolbar').style.visibility = 'visible';\n            \n        });\n    });\n    var user = '<%=data.user%>';\n</script>\n</head>\n\n<body oncontextmenu=\"return false;\" >\n\n        <!-- This code is taken from http://twitter.github.com/bootstrap/examples/hero.html -->\n        <div class=\"navbar navbar-inverse navbar-fixed-top\">\n            <div class=\"navbar-inner\">\n                <div class=\"container\">\n                    <a class=\"btn btn-navbar\" data-toggle=\"collapse\" data-target=\".nav-collapse\">\n                        <span class=\"icon-bar\"></span>\n                        <span class=\"icon-bar\"></span>\n                        <span class=\"icon-bar\"></span>\n                    </a>\n                    <a class=\"brand\" href=\"/\">Photo (Beta)</a>\n                    <div class=\"nav-collapse collapse\">\n                        <ul class=\"nav\">\n                            <li><a href=\"/home/users\">Users</a></li>\n                            <li><a href=\"/<%=data.params.user%>\">Galleries</a></li>\n                            <li class=\"active\"><a href=\"#\">Gallery</a></li>\n                            <% if(data.loggedin) { %>\n                                <li class=\"dropdown\">\n                                    <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">Manage Images<b class=\"caret\"></b></a>\n                                    <ul class=\"dropdown-menu\">\n                                        <li><a href=\"#\" onclick=\"showUpload();\">Upload Images</a></li>\n                                        <li><a href=\"#\" onclick=\"showDelete();\">Select &amp; Delete Images</a></li>\n                                        <li><a href=\"#\" onclick=\"showLinkUpdate();\">Update Image Link</a></li>\n                                        <li><a href=\"#\" onclick=\"drawImage();\">Draw an Image</a></li>\n                                        <li><a href=\"#\" id=\"showBgToolbar\">Show Background Tools</a></li>\n                                    </ul>\n                                </li>\n                                <li class=\"dropdown\">\n                                    <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">Manage Galleries<b class=\"caret\"></b></a>\n                                    <ul class=\"dropdown-menu\">\n                                        <li><a href=\"#\" onclick=\"newGallery();\">New Gallery</a></li>\n                                        <li><a href=\"#\" onclick=\"deleteGallery();\">Delete Gallery</a></li>\n                                        <li><a href=\"#\" onclick=\"publishGallery();\">Publish Gallery</a></li>\n                                        <li><a href=\"#\" onclick=\"unpublishGallery();\">Unpublish Gallery</a></li>\n                                    </ul>\n                                </li>\n                                <li class=\"dropdown\">\n                                    <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">Manage Account<b class=\"caret\"></b></a>\n                                    <ul class=\"dropdown-menu\">\n                                        <li><a href=\"#\" onclick=\"changePassword();\">Change Password</a></li>\n                                        <li><a href=\"#\" onclick=\"deleteAccount();\">Delete Your Account</a></li>\n                                    </ul>\n                                </li>\n                            <% } %>\n                        </ul>\n                        <% if(data.loggedin) { %>\n                            <form class=\"navbar-form pull-right\" action=\"/users/list/logout\" method=\"POST\">\n                            <input type=\"hidden\" name=\"form\" value=\"true\">\n                            <button type=\"submit\" class=\"btn btn-small btn-primary\">Log Out</button>\n                        </form>\n                        <% } else { %>\n                        <form class=\"navbar-form pull-right\" action=\"/users/list/login\" method=\"POST\">\n                            <input class=\"span2\" type=\"text\" name=\"user\" placeholder=\"Username\">\n                            <input class=\"span2\" type=\"password\" name=\"password\" placeholder=\"Password\">\n                            <input type=\"hidden\" name=\"form\" value=\"true\">\n                            <button type=\"submit\" class=\"btn btn-primary\">Sign in</button>\n                        </form>\n                        <% } %>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    <!-- Background drawing code here -->\n    \t<script type=\"text/javascript\" src=\"/js/brushes/circles.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/chrome.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/fur.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/grid.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/longfur.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/ribbon.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/shaded.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/simple.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/sketchy.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/squares.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/web.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/colorutils.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/colorselector.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/palette.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/menu.js\"></script>\n\t\t<!--<script type=\"text/javascript\" src=\"js/about.js\"></script>-->\t\n\t\t<script type=\"text/javascript\" src=\"/js/main.js\"></script>\n\t\t<script type=\"text/javascript\">\n\t\tcontext.clearRect(0,0,canvas.width,canvas.height);\n\t\t\tvar img     = new Image();\n\t    \timg.onload  = function() {\n\t        \tcontext.drawImage(img, 0, 0, canvas.width, (img.height/img.width)*canvas.width);\n\t    \t}\n\t    \timg.src     = \"/images/<%=data.params.user + '-' + data.params.gallery%>-bg.png\";\n\t\t</script>\n\n<!-- The old menu bar at the bottom \n  <div align=\"center\" class=\"toolbar\" id=\"toolbar\" style=\"z-index:13000;\">\n   &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \n  <input type=\"button\" onclick=\"goHome();\" value=\"Home\" />\n  <input type=\"button\" onclick=\"logout();\" value=\"Log Out\" />\n  <input type=\"button\" onclick=\"showUpload();\" value=\"Upload new images\" />\n  <input type=\"button\" onclick=\"drawImage();\" value=\"Draw image\" />\n  <input type=\"button\" id=\"adminDeleteButton\" onclick=\"showDelete();\" value=\"Delete image\" />\n  <input type=\"button\" id=\"updateLinkButton\" onclick=\"showLinkUpdate();\" value=\"Update Image Link\" />\n  <input type=\"button\" id=\"publishGallery\" onclick=\"publishGallery();\" value=\"Publish Gallery\" />\n  <input type=\"button\" id=\"unpublishGallery\" onclick=\"unpublishGallery();\" value=\"Unpublish Gallery\" />\n  </div>\n-->\n\n<!--<script type=\"text/javascript\" src=\"/js/wz_dragdrop.js\"></script>-->\n\n\n<table width=\"100%\" height=\"100%\">\n  <tr>\n    <td align=\"center\" valign=\"middle\">\n\t\t<div name=\"upload\" id=\"upload\" style=\"position:fixed;visibility:hidden;left:30%;top:40%;width:40%;z-index:12000;font-family:Arial;font-size:18px;\" align=\"center\">\n\t\t<form name=\"upload\" action=\"/<%=data.params.user + '/' + data.params.gallery%>/photos/new\" enctype=\"multipart/form-data\" method=\"post\">\n\t\t<b>Select files to upload:</b><br/>\n\t\t<input type=\"file\" name=\"image\" multiple/>\n\t\t<input type=\"submit\" name=\"Upload\" value=\"Upload\"/><input type=\"button\" onclick=\"hideUpload();\" value=\"Cancel\" />\n\t\t</form></div><br/>\t\t\n\t</td>\n  </tr>\n  <!--\n  <tr>\n    <td align=\"center\" valign=\"middle\">\n\t\t<div name=\"uploadLink\" id=\"uploadLink\" style=\"position:fixed;visibility:hidden;left:30%;top:40%;width:40%;z-index:12000;font-family:Arial;font-size:18px;\" align=\"center\">\n\t\t<form name=\"uploadLink\" action=\"/<%=data.params.user + '/' + data.params.gallery%>/photos/newlink\" enctype=\"multipart/form-data\" method=\"post\">\n\t\tLink or Javascript: <textarea name=\"link\" rows=\"10\" cols=\"50\"></textarea><br/>\n\t\t<b>Select file to upload:</b><br/>\n\t\t<input type=\"file\" name=\"image\" /><br/>\n\t\t<input type=\"submit\" name=\"uploadLink\" value=\"Upload file\"/><input type=\"button\" onclick=\"hideLinkUpload();\" value=\"Cancel\" />\n\t\t</form></div><br/>\t\t\n\t</td>\n  </tr>\n  -->\n</table>\n\n<div name=\"overlay\" id=\"overlay\" style=\"left:-50px;top:-50px;position:fixed;visibility:hidden;width:150%;height:150%;z-index:11000;background-color:gray;opacity:0.95;\" ></div>\n\n<% var il = \"\";\nfor(var i in data.images) { \n    if(data.images[i].link.length>2) {\n          %>\n    \t  <div style=\"visibility:hidden;\" id=\"<%=data.images[i].source.split('/').pop()%>link\"><%=data.images[i].link%></div>\n    \t  <%\n    }\n    if((data.images[i].width<400) && (data.images[i].height<400)) {\n%>\n<img src=\"<%=data.images[i].source.split('.')[0]+'-small.'+data.images[i].source.split('.')[1]%>\" style=\"z-index:<%=data.images[i].z%>;width:<%=Math.round(data.images[i].width)%>px;height:<%=Math.round(data.images[i].height)%>px;left:<%=Math.round(data.images[i].left)%>px;top:<%=Math.round(data.images[i].top)%>px;\" class=\"drag\" id=\"<%=data.images[i].source.split('/').pop()%>\" />\n<% \n} else if((data.images[i].width<900) && (data.images[i].height<900)) {\n%>\n<img src=\"<%=data.images[i].source.split('.')[0]+'-medium.'+data.images[i].source.split('.')[1]%>\" style=\"z-index:<%=data.images[i].z%>;width:<%=Math.round(data.images[i].width)%>px;height:<%=Math.round(data.images[i].height)%>px;left:<%=Math.round(data.images[i].left)%>px;top:<%=Math.round(data.images[i].top)%>px;\" class=\"drag\" id=\"<%=data.images[i].source.split('/').pop()%>\" />\n<%\n} else {\n%>\n<img src=\"<%=data.images[i].source.split('.')[0]+'-large.'+data.images[i].source.split('.')[1]%>\" style=\"z-index:<%=data.images[i].z%>;width:<%=Math.round(data.images[i].width)%>px;height:<%=Math.round(data.images[i].height)%>px;left:<%=Math.round(data.images[i].left)%>px;top:<%=Math.round(data.images[i].top)%>px;\" class=\"drag\" id=\"<%=data.images[i].source.split('/').pop()%>\" />\n<%\n}\nil += data.images[i].source.split('/').pop() + '\",\"';\n} %>\n\n<%\n    if((data.params.user=='home') && (data.params.gallery!='users')) {\n        var c = 0; %>ha<%\n        for(var i in data.galleries) {\n            var source = data.galleries[i][0];\n            if(source) source = source.source;\n            else source = \"\";\n            c++;\n%>\n            <a href=\"<%='/' + data.params.u + '/' + i%>\">\n            <!--\n                <img title=\"<%=i%>\" src=\"<%=source.split('.')[0]+'-small.'+source.split('.')[1]%>\" style=\"z-index:10;position:absolute;left:<%=300+250*(c % 3)%>px;top:<%=150+150*Math.floor((c-1)/3)%>px;width:210px;height:140px;\" />\n            -->\n                <img class=\"gridImg\" alt=\"<%=i%>\" src=\"<%=source.split('.')[0]+'-small.'+source.split('.')[1]%>\" style=\"border:2px solid white;z-index:10;position:absolute;left:<%=300+250*(c % 3)%>px;top:<%=150+150*Math.floor((c-1)/3)%>px;width:210px;height:140px;\" />\n            </a>\n<%\n        }\n    }\n%>\n\n<%\n    if((data.params.user=='home') && (data.params.gallery=='users')) {\n        var c = 0;\n        for(var i in data.users) {\n            c++;\n%>\n            <a href=\"<%='/home/' + data.users[i]%>\">\n                <img alt=\"<%=data.users[i]%>\" src=\"\" style=\"border:2px solid white;z-index:10;position:absolute;left:<%=300+250*(c % 3)%>px;top:<%=150+150*Math.floor((c-1)/3)%>px;width:210px;height:140px;\" />\n            </a>\n<%\n        }\n    }\n%>\n\n<script type=\"text/javascript\">\nfunction setDraggables() {\n\tSET_DHTML(SCALABLE, SCROLL, \"<%- il.substring(0, il.length-3)%>\");\n}\nresizeFirst();\n//setDraggables(); \npageScroll();\nif(false) showDelete();\nfunction setHover() {\n\tx = document.getElementsByTagName(\"img\");\n\tfor (i=0;i<x.length;i++)\n\t{\n\t\tif(x[i].name.split(\"jpgdivNI\")[1]==\"mG\") {\n\t\t\tx[i].onmouseover = function() {fullScreenButton(this);};\n\t\t\tx[i].onmouseout = function() {deleteFullScreenButton(this);};\n\t\t}\n\t}\n}\n//setHover();\n</script>\n\n\n<div id=\"fullScreenImg\" style=\"top:4%;visibility:hidden;z-index:12000;position:fixed;\">\n<img class=\"no-hover\" id =\"fullScreenImage\" style=\"top:0px;left:0px;position:absolute;z-index:12001;visibility:hidden;\" src=\"\" />\n<img class=\"no-hover\" id=\"closeFullscreenButton\" src=\"/images/close.png\" style=\"cursor:pointer;visibility:hidden;position:absolute;left:-40px;top:0px;z-index:10000;\" onclick=\"closeFullscreen();\"/>\n</div>\n<!--<img src=\"/images/upArrow.png\" style=\"visibility:hidden\" />\n<img src=\"/images/downArrow.png\" style=\"visibility:hidden\" />-->\n\n<script src=\"/js/bootstrap.min.js\"></script>\n</body>\n</html>\n"]],"start1":0,"start2":0,"length1":0,"length2":21162}]],"length":21162,"saved":false}
