{"ts":1347042987731,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<!DOCTYPE HTML>\n<html>\n<head>\n<title>Krists Auders Photography (Beta)</title>\n<script type=\"text/javascript\" >\n</script>\n<script src=\"http://code.jquery.com/jquery-1.7.1.min.js\"></script>\n    \t<meta name=\"viewport\" content=\"width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;\"/>\n\t\t<style type=\"text/css\">\n\t\t\t*\n\t\t\t{\n\t\t\t\tcolor: #444;\n\t\t\t\tfont-family: Monospace;\n\t\t\t\tfont-size: 12px;\n\t\t\t}\n\t\t\t\n\t\t\tbody\n\t\t\t{\n\t\t\t\tmargin: 0px;\n\t\t\t\toverflow: scroll;\n\t\t\t}\n\t\t\t\n\t\t\tselect\n\t\t\t{\n\t\t\t\ttext-transform: uppercase;\n\t\t\t\tfont-size: 11px;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\t\t\t\n\t\t\thr\n\t\t\t{\n\t\t\t\tborder: 0;\n\t\t\t\theight: 1px;\n\t\t\t\tbackground-color: #ccc;\n\t\t\t\tmargin: 20px 0px;\n\t\t\t}\n\t\t\t\n\t\t\t.gui\n\t\t\t{\n\t\t\t\tcolor: black;\n\t\t\t\twidth: 350px;\n\t\t\t\tbackground-color: gray;\n\t\t\t\t//border-bottom: 1px solid #ddd;\n\t\t\t\t//padding: 5px 10px;\n\t\t\t\ttext-align: center;\n\t\t\t\t//text-transform: uppercase;\n\t\t\t\tline-height: 18px;\n\t\t\t\tcursor: default;\n                opacity:0.95;\n                z-index:13000;\n                    -moz-box-shadow: 1px 1px 25px #999;\n                \t-webkit-box-shadow: 1px 1px 25px #999;\n                    box-shadow: 1px 1px 25px #999;\n\t\t\t}\n\t\t\t\n\t\t\t.button\n\t\t\t{\n\t\t\t\tpadding: 2px;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t\t\n\t\t\t.key\n\t\t\t{\n\t\t\t\tpadding: 0px 8px;\n\t\t\t\tmargin-left: 1px;\n\t\t\t\tbackground-color: #eee;\n\t\t\t}\n            img {\n                opacity: 1;\n            }\n            img:hover {\n                opacity: 1;\n                /*Reflection*/ \n                /*-webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(.7, transparent), to(rgba(0,0,0,0.4)));   */\n                /*Glow*/ \n                -webkit-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); -moz-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); box-shadow: 0px 0px 5px rgba(255,255,255,0.8); \n            }\n            .no-hover {\n                opacity: 1;  \n                -webkit-box-shadow: 0px 0px 0px; -moz-box-shadow: 0px 0px 0px; box-shadow: 0px 0px 0px;\n            }\n            .no-hover:hover {\n                opacity: 1;  \n                -webkit-box-shadow: 0px 0px 0px; -moz-box-shadow: 0px 0px 0px; box-shadow: 0px 0px 0px;\n            }\n\t\t</style>\n<script type=\"text/javascript\" >\nvar ddpp=null;\nfunction getScrollXY() {\n\t  var scrOfX = 0, scrOfY = 0;\n\t  if( typeof( window.pageYOffset ) == 'number' ) {\n\t    //Netscape compliant\n\t    scrOfY = window.pageYOffset;\n\t    scrOfX = window.pageXOffset;\n\t  } else if( document.body && ( document.body.scrollLeft || document.body.scrollTop ) ) {\n\t    //DOM compliant\n\t    scrOfY = document.body.scrollTop;\n\t    scrOfX = document.body.scrollLeft;\n\t  } else if( document.documentElement && ( document.documentElement.scrollLeft || document.documentElement.scrollTop ) ) {\n\t    //IE6 standards compliant mode\n\t    scrOfY = document.documentElement.scrollTop;\n\t    scrOfX = document.documentElement.scrollLeft;\n\t  }\n\t  return [ scrOfX, scrOfY ];\n\t}\nfunction get_cookie(Name) {\n\t  var search = Name + \"=\"\n\t  var returnvalue = \"\";\n\t  if (document.cookie.length > 0) {\n\t    offset = document.cookie.indexOf(search)\n\t    // if cookie exists\n\t    if (offset != -1) { \n\t      offset += search.length\n\t      // set index of beginning of value\n\t      end = document.cookie.indexOf(\";\", offset);\n\t      // set index of end of cookie value\n\t      if (end == -1) end = document.cookie.length;\n\t      returnvalue=unescape(document.cookie.substring(offset, end))\n\t      }\n\t   }\n\t  return returnvalue;\n\t}\nfunction pageScroll() {\n\tvar scrollY = get_cookie(\"scrollY\");\n\tvar scrollX = get_cookie(\"scrollX\");\n\twindow.scrollBy(scrollX,scrollY); \n}\n\nfunction setPageScroll() {\n\tvar exp = new Date( );\n\tvar nowPlus = exp.getTime( ) + (5000);\n\texp.setTime(nowPlus);\n\tdocument.cookie = \"scrollY=\" + getScrollXY()[1] + \"; expires=\" + exp.toGMTString( );\n\tdocument.cookie = \"scrollX=\" + getScrollXY()[0] + \"; expires=\" + exp.toGMTString( );\n}\nfunction showUpload() {\n\tdocument.getElementById(\"upload\").style.visibility = 'visible';\n\tif(!document.getElementById(\"overlay\")){\n\t\tx = document.getElementsByTagName(\"img\");\n\t\tfor (i=0;i<x.length;i++)\n\t\t{\n\t\t\tx[i].style.visibility = 'hidden';\n\t\t}\n\t} else {\n\t\tdocument.getElementById(\"overlay\").style.visibility = 'visible';\n\t}\n}\nfunction hideUpload() {\n\tdocument.getElementById(\"upload\").style.visibility = 'hidden';\n\tif(!document.getElementById(\"overlay\")){\n\t\tx = document.getElementsByTagName(\"img\");\n\t\tfor (i=0;i<x.length;i++)\n\t\t{\n\t\t\tx[i].style.visibility = 'visible';\n\t\t}\n\t} else {\n\tdocument.getElementById(\"overlay\").style.visibility = 'hidden';\n\t}\n}\nfunction showLinkUpload() {\n\tdocument.getElementById(\"uploadLink\").style.visibility = 'visible';\n\tif(!document.getElementById(\"overlay\")){\n\t\tx = document.getElementsByTagName(\"img\");\n\t\tfor (i=0;i<x.length;i++)\n\t\t{\n\t\t\tx[i].style.visibility = 'hidden';\n\t\t}\n\t} else {\n\t\tdocument.getElementById(\"overlay\").style.visibility = 'visible';\n\t}\n}\nfunction hideLinkUpload() {\n\tdocument.getElementById(\"uploadLink\").style.visibility = 'hidden';\n\tif(!document.getElementById(\"overlay\")){\n\t\tx = document.getElementsByTagName(\"img\");\n\t\tfor (i=0;i<x.length;i++)\n\t\t{\n\t\t\tx[i].style.visibility = 'visible';\n\t\t}\n\t} else {\n\tdocument.getElementById(\"overlay\").style.visibility = 'hidden';\n\t}\n}\n</script>\n<style type=\"text/css\">\n.drag {position: absolute;}\n//img {\n//\t-moz-box-shadow: 1px 1px 12px #999;\n//\t-webkit-box-shadow: 1px 1px 12px #999;\n//        box-shadow: 1px 1px 12px #999;\n//        }\n//img:hover {\n//\t-moz-box-shadow: 1px 1px 24px #999;\n//\t-webkit-box-shadow: 1px 1px 24px #999;\n//        box-shadow: 1px 1px 24px #999;\n//}\n.toolbar {\nbottom:0px;\nleft:-10%;\nwidth:110%;\nheight:25px;\nbackground-color:gray; \nopacity:0.95;\nposition:fixed;\nz-index:13000;\n\t-moz-box-shadow: 1px 1px 25px #999;\n\t-webkit-box-shadow: 1px 1px 25px #999;\n        box-shadow: 1px 1px 25px #999;\n}\n.titlebar {\nvisibility:hidden;\ntop:0px;\nleft:-10%;\nwidth:110%;\nheight:25px;\nbackground-color:gray; \nopacity:0.95;\nposition:fixed;\nfont-family:Arial;\nfont-size:16px;\nz-index:5000;\n\t-moz-box-shadow: 1px 1px 25px #999;\n\t-webkit-box-shadow: 1px 1px 25px #999;\n        box-shadow: 1px 1px 25px #999;\n}\n\t</style>\n\t\n\t<script type=\"text/javascript\">\n\tfunction getWindowSize() {\n         var viewportwidth;\n         var viewportheight;\n        \n         if (typeof window.innerWidth != 'undefined')\n         {\n              viewportwidth = window.innerWidth;\n              viewportheight = window.innerHeight;\n         } else if (typeof document.documentElement != 'undefined'\n             && typeof document.documentElement.clientWidth !=\n             'undefined' && document.documentElement.clientWidth != 0)\n         {\n               viewportwidth = document.documentElement.clientWidth;\n               viewportheight = document.documentElement.clientHeight;\n         } else {\n               viewportwidth = document.getElementsByTagName('body')[0].clientWidth;\n               viewportheight = document.getElementsByTagName('body')[0].clientHeight\n         }\n         if(viewportwidth==0) {\n        \t viewportwidth = document.getElementsByTagName('body')[0].clientWidth;}\n         if(viewportheight==0) {\n             viewportheight = document.getElementsByTagName('body')[0].clientWidth;}\n         return [viewportwidth, viewportheight];\n\t}\n</script>\n<script type=\"text/javascript\">\nfunction resizeFirst() {\n\tx = document.getElementsByTagName(\"img\");\n\tvar viewportwidth = getWindowSize()[0];\n\tfor (i=0;i<x.length;i++)\n\t{\n\t\tx[i].style.width = x[i].width*(viewportwidth/1366)+\"px\";\n\t\tx[i].style.height = x[i].height*(viewportwidth/1366)+\"px\";\n\t\tx[i].style.left = parseInt(x[i].style.left)*(viewportwidth/1366)+\"px\";\n\t\tx[i].style.top = parseInt(x[i].style.top)*(viewportwidth/1366)+\"px\";\n\t}\n}\n\nfunction showDelete() {\n\tx = document.getElementsByTagName(\"img\");\n\tfor (i=0;i<x.length;i++)\n\t{\n\tif(x[i].name.split(\"jpgdivNI\")[1]==\"mG\" || x[i].name.split(\"pngdivNI\")[1]==\"mG\") {\n\tvar element = document.createElement(\"input\");\n\telement.setAttribute(\"type\",\"button\");\n\telement.setAttribute(\"value\",\"x\");\n\telement.setAttribute(\"onclick\",\"javascript:deleteImage(this)\");\n\telement.onclick = function() {deleteImage(this);};\n\telement.style.position = 'absolute';\n\telement.style.left = '0px';\n\telement.style.top = '0px';\n\tx[i].parentNode.appendChild(element);\n\t}\n}\n\tdocument.getElementById(\"adminDeleteButton\").onclick = hideDelete;\n\tdocument.getElementById(\"adminDeleteButton\").value = \"Done deleting\";\n\t\n}\n\nfunction hideDelete() {\n\tx = document.getElementsByTagName(\"img\");\n\tfor (i=0;i<x.length;i++)\n\t{\n\t\tif(x[i].name.split(\"jpgdivNI\")[1]==\"mG\" || x[i].name.split(\"pngdivNI\")[1]==\"mG\") {\n\t\t\tx[i].parentNode.removeChild(x[i].parentNode.lastChild);\n\t\t}\n}\n\tdocument.getElementById(\"adminDeleteButton\").onclick = showDelete;\n\tdocument.getElementById(\"adminDeleteButton\").value = \"Delete image\";\n}\n\n function fullScreen(el) {\n\t if(document.getElementById(el.src.split(\"/\").pop().replace('-small','').replace('-medium','').replace('-large','')+\"link\")) {\n\t\t var linkObj = document.getElementById(el.src.split(\"/\").pop().replace('-small','').replace('-medium','').replace('-large','')+\"link\");\n         var t = '';\n\t\t if(linkObj.innerText){\n\t\t\t t = linkObj.innerText;\n\t\t } else if(linkObj.textContent) {\n\t\t\t t = linkObj.textContent;\n\t\t }\n         if(t.indexOf('javascript:')==-1) {\n             window.location = t;\n         } else {\n             eval(t);\n         }\n\t } else {\n        document.getElementById(\"fullScreenImage\").src = el.src;\n        var ih = document.getElementById(el.id).firstChild.height;\n        var iw = document.getElementById(el.id).firstChild.width;\n        document.getElementById(\"fullScreenImage\").style.width = getWindowSize()[0] + 'px';\n           var rs = getWindowSize()[1]/getWindowSize()[0];\n           var ri = ih/iw;\n           var rsi = rs/ri;\n           if(rsi>1) {\n               document.getElementById(\"fullScreenImg\").style.width = 0.9*getWindowSize()[0] + 'px';\n               document.getElementById(\"fullScreenImg\").style.left = 0.05*getWindowSize()[0] + 'px';\n               document.getElementById(\"fullScreenImage\").style.width = 0.9*getWindowSize()[0] + 'px';\n           } else {\n               var rsic = rsi*0.9*getWindowSize()[0];\n               document.getElementById(\"fullScreenImg\").style.width = rsic + 'px';\n               document.getElementById(\"fullScreenImg\").style.left = (getWindowSize()[0]-rsic)/2 + 'px';\n               document.getElementById(\"fullScreenImage\").style.width = rsic + 'px';\n           }\n\n       if(document.getElementById(\"overlay\")){\n       \t\tdocument.getElementById(\"overlay\").style.visibility = 'visible';\n       }\n       if(document.getElementById(\"fullScreenImage\").complete) {\n           document.getElementById(\"closeFullscreenButton\").style.visibility = 'visible';\n           document.getElementById(\"fullScreenImg\").style.visibility = 'visible';\n           document.getElementById(\"fullScreenImage\").style.visibility = 'visible';\n       }\n       document.getElementById(\"fullScreenImage\").onload = function() {\n               document.getElementById(\"closeFullscreenButton\").style.visibility = 'visible';\n               document.getElementById(\"fullScreenImg\").style.visibility = 'visible';\n               document.getElementById(\"fullScreenImage\").style.visibility = 'visible';\n       }\n       var hiResImg = new Image();\n       hiResImg.src = el.src.substring(0,el.src.lastIndexOf('-')) + '-large' + el.src.substring(el.src.lastIndexOf('.'));\n       if(hiResImg.complete) {\n           if((document.getElementById(\"fullScreenImage\").style.visibility=='visible') && (document.getElementById(\"fullScreenImage\").src==el.src)) {\n                document.getElementById(\"fullScreenImage\").src = hiResImg.src;\n           }\n       }\n       hiResImg.onload = function() {\n           if((document.getElementById(\"fullScreenImage\").style.visibility=='visible') && (document.getElementById(\"fullScreenImage\").src==el.src)) {\n               document.getElementById(\"fullScreenImage\").src = hiResImg.src;\n           }\n       }\n     }\n    ddpp = dd;\n    dd.obj=null;\n    dd.evt=function(d_e) {};\n}\n\nfunction closeFullscreen() {\n    dd=ddpp;\n    dd.evt = function(d_e)\n    {\n        this.but = (this.e = d_e || window.event).which || this.e.button || 0;\n        this.button = (this.e.type == 'mousedown')? this.but\n    \t\t: (dd.e && dd.e.button)? dd.e.button\n    \t\t: 0;\n    \tthis.src = this.e.target || this.e.srcElement || null;\n    \tthis.src.tag = (\"\" + (this.src.tagName || this.src)).toLowerCase();\n    \tthis.x = dd.Int(this.e.pageX || this.e.clientX || 0);\n    \tthis.y = dd.Int(this.e.pageY || this.e.clientY || 0);\n    \tif(dd.ie)\n    \t{\n    \t\tthis.x += dd.getScrollX() - (dd.ie && !dd.iemac)*1;\n    \t\tthis.y += dd.getScrollY() - (dd.ie && !dd.iemac)*1;\n    \t}\n    \t//this.modifKey = this.e.modifiers? this.e.modifiers&Event.SHIFT_MASK : (this.e.shiftKey || false);\n    \tif((this.but==3) || (this.but==2)){\n    \t\tthis.modifKey = true;\n    \t} else {\n    \t\tthis.modifKey = false;\n    \t}\n    };\n\tdocument.getElementById(\"fullScreenImage\").style.visibility = 'hidden';\n   document.getElementById(\"fullScreenImg\").style.visibility = 'hidden';\n   if(document.getElementById(\"overlay\")){\n   \t\tdocument.getElementById(\"overlay\").style.visibility = 'hidden';\n   }\n   document.getElementById(\"closeFullscreenButton\").style.visibility = 'hidden';\n}\n\nfunction deleteImage(el) {\n\tsaveToLocalStorage();\n\tsetPageScroll();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"post\" ;\n  myForm.action = \"/<%=data.params.user + '/' + data.params.gallery%>/photos/delete\";\n    var myInput = document.createElement(\"input\") ;\n    myInput.setAttribute(\"name\", \"file\") ;\n    myInput.setAttribute(\"value\", el.parentNode.id.substring(0,el.parentNode.id.length-3));\n    myForm.appendChild(myInput) ;\n    var myInput5 = document.createElement(\"input\") ;\n    myInput5.setAttribute(\"name\", \"deleteIsOn\") ;\n    myInput5.setAttribute(\"value\", \"false\");\n    myForm.appendChild(myInput5) ;\n  document.body.appendChild(myForm) ;\n  myForm.submit() ;\n  document.body.removeChild(myForm) ;\n}\n\nfunction success() {\n    \n}\nfunction saveCoords() {\n    saveToLocalStorage();\n    setPageScroll();\n    \n    var data = new Object();\n    data.side = dd.obj.x*(1366/getWindowSize()[0]);\n    data.top = dd.obj.y*(1366/getWindowSize()[0]);\n    data.image = dd.obj.name;\n    data.width = dd.obj.w*(1366/getWindowSize()[0]);\n    data.height = dd.obj.h*(1366/getWindowSize()[0]);\n    data.deleteIsOn = '';\n    data.z = dd.z;\n    $.ajax({\n      type: 'POST',\n      url: '/<%=data.params.user + '/' + data.params.gallery%>/upsert',\n      data: data,\n      success: success(),\n      dataType: 'json'\n    });\n}\n\nfunction logout() {\n  saveToLocalStorage();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"post\" ;\n  myForm.action = \"/\";\n  document.body.appendChild(myForm);\n  myForm.submit();\n  document.body.removeChild(myForm);\n}\n\nfunction goHome() {\n  saveToLocalStorage();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"get\" ;\n  myForm.action = '/<%=data.params.user%>/galleries/list';\n  document.body.appendChild(myForm);\n  myForm.submit();\n  document.body.removeChild(myForm);\n}\nfunction shortClick(src) {\n\talert(src);\n}\nfunction fullScreenButton(el) {\n\tvar fullScreenButton = document.createElement(\"img\");\n\tfullScreenButton.setAttribute(\"id\", \"fullScreenButton\");\n\tfullScreenButton.setAttribute(\"src\",\"/images/upArrow.png\");\n\tel.parentNode.appendChild(fullScreenButton);\n\tfullScreenButton = document.getElementById(\"fullScreenButton\");\n\tfullScreenButton.style.position = 'absolute';\n\tfullScreenButton.style.left = '0px';\n\tfullScreenButton.style.top = '0px';\n\tfullScreenButton.style.width = el.width*0.05+\"px\";\n\tfullScreenButton.style.height = fullScreenButton.style.width;\n\tfullScreenButton.style.visibility = 'visible';\n\t\n\tvar fullScreenButton2 = document.createElement(\"img\");\n\tfullScreenButton2.setAttribute(\"id\", \"fullScreenButton2\");\n\tfullScreenButton2.setAttribute(\"src\",\"/images/downArrow.png\");\n\tel.parentNode.appendChild(fullScreenButton2);\n\tfullScreenButton2 = document.getElementById(\"fullScreenButton2\");\n\tfullScreenButton2.style.position = 'absolute';\n\tfullScreenButton2.style.right = '0px';\n\tfullScreenButton2.style.bottom = '0px';\n\tfullScreenButton2.style.width = el.width*0.05+\"px\";\n\tfullScreenButton2.style.height = fullScreenButton2.style.width;\n\tfullScreenButton2.style.visibility = 'visible';\n}\nfunction deleteFullScreenButton(el) {\n\tvar fullScreenButton = document.getElementById(\"fullScreenButton\");\n\tfullScreenButton.parentNode.removeChild(fullScreenButton);\n\tvar fullScreenButton2 = document.getElementById(\"fullScreenButton2\");\n\tfullScreenButton2.parentNode.removeChild(fullScreenButton2);\n}\n</script>\n\t\n</head>\n\n<body oncontextmenu=\"return false;\" >\n\n  <div align=\"center\" class=\"toolbar\" id=\"toolbar\" style=\"z-index:13000;\">\n   &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \n  <input type=\"button\" onclick=\"goHome();\" value=\"Home\" />\n  <input type=\"button\" onclick=\"logout();\" value=\"Log out\" />\n  <input type=\"button\" onclick=\"showUpload();\" value=\"Upload new images\" />\n  <input type=\"button\" onclick=\"showLinkUpload();\" value=\"Upload link image\" />\n  <input type=\"button\" onclick=\"window.open(document.URL.split('#')[0] + '/draw','_blank','location=0,width=900,height=600');\" value=\"Draw image\" />\n  <input type=\"button\" id=\"adminDeleteButton\" onclick=\"showDelete();\" value=\"Delete image\" />\n  </div>\n\n<script type=\"text/javascript\" src=\"/js/wz_dragdrop.js\"></script>\n\n\n<table width=\"100%\" height=\"100%\">\n  <tr>\n    <td align=\"center\" valign=\"middle\">\n\t\t<div name=\"upload\" id=\"upload\" style=\"position:fixed;visibility:hidden;left:30%;top:40%;width:40%;z-index:12000;font-family:Arial;font-size:18px;\" align=\"center\">\n\t\t<form name=\"upload\" action=\"/<%=data.params.user + '/' + data.params.gallery%>/photos/new\" enctype=\"multipart/form-data\" method=\"post\">\n\t\t<b>Select files to upload:</b><br/>\n\t\t<input type=\"file\" name=\"image\" multiple/>\n\t\t<input type=\"submit\" name=\"Upload\" value=\"Upload\"/><input type=\"button\" onclick=\"hideUpload();\" value=\"Cancel\" />\n\t\t</form></div><br/>\t\t\n\t</td>\n  </tr>\n  <tr>\n    <td align=\"center\" valign=\"middle\">\n\t\t<div name=\"uploadLink\" id=\"uploadLink\" style=\"position:fixed;visibility:hidden;left:30%;top:40%;width:40%;z-index:12000;font-family:Arial;font-size:18px;\" align=\"center\">\n\t\t<form name=\"uploadLink\" action=\"/<%=data.params.user + '/' + data.params.gallery%>/photos/newlink\" enctype=\"multipart/form-data\" method=\"post\">\n\t\tLink: <input type=\"text\" name=\"link\" length=\"50\" /><br/>\n\t\t<b>Select file to upload:</b><br/>\n\t\t<input type=\"file\" name=\"image\" /><br/>\n\t\t<input type=\"submit\" name=\"uploadLink\" value=\"Upload file\"/><input type=\"button\" onclick=\"hideLinkUpload();\" value=\"Cancel\" />\n\t\t</form></div><br/>\t\t\n\t</td>\n  </tr>\n</table>\n\n<div name=\"overlay\" id=\"overlay\" style=\"left:-50px;top:-50px;position:fixed;visibility:hidden;width:150%;height:150%;z-index:11000;background-color:gray;opacity:0.95;\" ></div>\n\n<% var il = \"\";\nfor(var i in data.images) { \n    if(data.images[i].link.length>2) {\n          %>\n    \t  <div style=\"visibility:hidden;\" id=\"<%=data.images[i].source.split('/').pop()%>link\"><%=data.images[i].link%></div>\n    \t  <%\n    }\n    if((data.images[i].width<400) && (data.images[i].height<400)) {\n%>\n<img src=\"<%=data.images[i].source.split('.')[0]+'-small.'+data.images[i].source.split('.')[1]%>\" style=\"z-index:<%=data.images[i].z%>;width:<%=Math.round(data.images[i].width)%>px;height:<%=Math.round(data.images[i].height)%>px;left:<%=Math.round(data.images[i].left)%>px;top:<%=Math.round(data.images[i].top)%>px;\" class=\"drag\" id=\"<%=data.images[i].source.split('/').pop()%>\" />\n<% \n} else if((data.images[i].width<900) && (data.images[i].height<900)) {\n%>\n<img src=\"<%=data.images[i].source.split('.')[0]+'-medium.'+data.images[i].source.split('.')[1]%>\" style=\"z-index:<%=data.images[i].z%>;width:<%=Math.round(data.images[i].width)%>px;height:<%=Math.round(data.images[i].height)%>px;left:<%=Math.round(data.images[i].left)%>px;top:<%=Math.round(data.images[i].top)%>px;\" class=\"drag\" id=\"<%=data.images[i].source.split('/').pop()%>\" />\n<%\n} else {\n%>\n<img src=\"<%=data.images[i].source.split('.')[0]+'-large.'+data.images[i].source.split('.')[1]%>\" style=\"z-index:<%=data.images[i].z%>;width:<%=Math.round(data.images[i].width)%>px;height:<%=Math.round(data.images[i].height)%>px;left:<%=Math.round(data.images[i].left)%>px;top:<%=Math.round(data.images[i].top)%>px;\" class=\"drag\" id=\"<%=data.images[i].source.split('/').pop()%>\" />\n<%\n}\nil += data.images[i].source.split('/').pop() + '\",\"';\n} %>\n\n<script type=\"text/javascript\">\nfunction setDraggables() {\n\tSET_DHTML(SCALABLE, SCROLL, \"<%- il.substring(0, il.length-3)%>\");\n}\nresizeFirst();\nsetDraggables(); \npageScroll();\nif(false) showDelete();\nfunction setHover() {\n\tx = document.getElementsByTagName(\"img\");\n\tfor (i=0;i<x.length;i++)\n\t{\n\t\tif(x[i].name.split(\"jpgdivNI\")[1]==\"mG\") {\n\t\t\tx[i].onmouseover = function() {fullScreenButton(this);};\n\t\t\tx[i].onmouseout = function() {deleteFullScreenButton(this);};\n\t\t}\n\t}\n}\n//setHover();\n\n  </script>\n\n\n<div id=\"fullScreenImg\" style=\"top:4%;visibility:hidden;z-index:12000;position:fixed;\">\n<img class=\"no-hover\" id =\"fullScreenImage\" style=\"top:0px;left:0px;position:absolute;z-index:12001;visibility:hidden;\" src=\"\" />\n<img class=\"no-hover\" id=\"closeFullscreenButton\" src=\"/images/close.png\" style=\"cursor:pointer;visibility:hidden;position:absolute;left:-40px;top:0px;z-index:10000;\" onclick=\"closeFullscreen();\"/>\n</div>\n<img src=\"/images/upArrow.png\" style=\"visibility:hidden\" />\n<img src=\"/images/downArrow.png\" style=\"visibility:hidden\" />\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/circles.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/chrome.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/fur.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/grid.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/longfur.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/ribbon.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/shaded.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/simple.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/sketchy.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/squares.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/brushes/web.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/colorutils.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/colorselector.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/palette.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"/js/menu.js\"></script>\n\t\t<!--<script type=\"text/javascript\" src=\"js/about.js\"></script>-->\t\n\t\t<script type=\"text/javascript\" src=\"/js/main.js\"></script>\n\t\t<script type=\"text/javascript\">\n\t\tcontext.clearRect(0,0,canvas.width,canvas.height);\n\t\t\tvar img     = new Image();\n\t    \timg.onload  = function() {\n\t        \tcontext.drawImage(img, 0, 0, canvas.width, (img.height/img.width)*canvas.width);\n\t    \t}\n\t    \timg.src     = \"/images/<%=data.params.user + '-' + data.params.gallery%>-bg.png\";\n\t\t</script>\n</body>\n</html>"]],"start1":0,"start2":0,"length1":0,"length2":23153}]],"length":23153}
{"contributors":[],"silentsave":false,"ts":1347043456631,"patch":[[{"diffs":[[0,"      }\n    "],[-1," }\n"],[0,"    ddpp = d"]],"start1":11993,"start2":11993,"length1":27,"length2":24},{"diffs":[[0,"dd;\n    "],[1,"  "],[1,"  "],[0,"dd.obj=n"]],"start1":12016,"start2":12016,"length1":16,"length2":20},{"diffs":[[0,"j=null;\n    "],[1,"  "],[1,"  "],[0,"dd.evt=funct"]],"start1":12033,"start2":12033,"length1":24,"length2":28},{"diffs":[[0,"_e) {};\n"],[1,"     }\n"],[0,"}\n\nfunct"]],"start1":12066,"start2":12066,"length1":16,"length2":23}]],"length":23165,"saved":false}
{"ts":1347048068097,"patch":[[{"diffs":[[0,"Link"],[-1,": <input type=\"text\" name=\"link\" length"],[1," or Javascript: <textarea name=\"link\" rows=\"10\" columns"],[0,"=\"50"]],"start1":18484,"start2":18484,"length1":47,"length2":63}]],"length":23181,"saved":false}
{"ts":1347048291730,"patch":[[{"diffs":[[0,"mns=\"50\""],[-1," /"],[1,"></textarea"],[0,"><br/>\n\t"]],"start1":18540,"start2":18540,"length1":18,"length2":27}]],"length":23190,"saved":false}
{"ts":1347048321790,"patch":[[{"diffs":[[0,"ows="],[-1,"\""],[0,"10"],[-1,"\""],[0," col"]],"start1":18527,"start2":18527,"length1":12,"length2":10},{"diffs":[[0,"mns="],[-1,"\""],[0,"50"],[-1,"\""],[0,"></t"]],"start1":18538,"start2":18538,"length1":12,"length2":10}]],"length":23186,"saved":false}
{"ts":1347048360900,"patch":[[{"diffs":[[0,"ows="],[1,"\""],[0,"10"],[1,"\""],[0," col"],[-1,"umn"],[0,"s="],[1,"\""],[0,"50"],[1,"\""],[0,"></t"]],"start1":18527,"start2":18527,"length1":21,"length2":22}]],"length":23187,"saved":false}
{"contributors":[],"silentsave":false,"ts":1347320205193,"patch":[[{"diffs":[[0,"ript\" >\n"],[1,"function login(username,password) {\n    var data = new Object();\n    data.user = prompt(\"Enter username\",\"\");\n    data.password = prompt(\"Enter password\",\"\");\n    function loginSuccess() {\n        setTimeout(function(){window.location.reload(true);}, 1000);\n    }\n    $.ajax({\n       type: 'POST',\n       url: '/users/list/login',\n       data: data,\n       success: loginSuccess(),\n       dataType: 'json'\n    });\n}\n\nfunction logoutSuccess() {\n        setTimeout(function(){window.location.reload(true);}, 1000);\n    }\n\nfunction logout() {\n    $.ajax({\n       type: 'POST',\n       url: '/users/list/logout',\n       data: '',\n       success: logoutSuccess(),\n       dataType: 'json'\n    });\n}\n\n"],[0,"var ddpp"]],"start1":2216,"start2":2216,"length1":16,"length2":709}]],"length":23880,"saved":false}
{"ts":1347320434971,"patch":[[{"diffs":[[0,"ript\" >\n"],[1,"function loginSuccess() {\n    setTimeout(function(){window.location.reload(true);}, 1000);\n}\n    \n"],[0,"function"]],"start1":2216,"start2":2216,"length1":16,"length2":114},{"diffs":[[0,"\");\n"],[-1,"    function loginSuccess() {\n        setTimeout(function(){window.location.reload(true);}, 1000);\n    }\n"],[0,"    "]],"start1":2477,"start2":2477,"length1":113,"length2":8}]],"length":23873,"saved":false}
{"ts":1347321247679,"patch":[[{"diffs":[[0,"gin("],[-1,"username,password"],[0,") {\n"]],"start1":2333,"start2":2333,"length1":25,"length2":8}]],"length":23856,"saved":false}
{"ts":1347321337349,"patch":[[{"diffs":[[0,"on login"],[1,"Ajax"],[0,"() {\n   "]],"start1":2328,"start2":2328,"length1":16,"length2":20},{"diffs":[[0,"ction logout"],[1,"Ajax"],[0,"() {\n    $.a"]],"start1":2727,"start2":2727,"length1":24,"length2":28}]],"length":23864,"saved":false}
{"ts":1347321372821,"patch":[[{"diffs":[[0,"on login"],[-1,"Ajax"],[0,"() {\n   "]],"start1":2328,"start2":2328,"length1":20,"length2":16},{"diffs":[[0,"gout"],[-1,"Ajax"],[0,"() {"]],"start1":2731,"start2":2731,"length1":12,"length2":8},{"diffs":[[0,"\n}\n\n"],[-1,"function logout() {\n  saveToLocalStorage();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"post\" ;\n  myForm.action = \"/\";\n  document.body.appendChild(myForm);\n  myForm.submit();\n  document.body.removeChild(myForm);\n}\n\n"],[0,"func"]],"start1":15322,"start2":15322,"length1":243,"length2":8}]],"length":23621,"saved":false}
{"ts":1347321858212,"patch":[[{"diffs":[[0," />\n"],[-1,"  <input type=\"button\" onclick=\"logout();\" value=\"Log out\" />\n"],[0,"  <i"]],"start1":17385,"start2":17385,"length1":70,"length2":8}]],"length":23559,"saved":false}
{"contributors":[],"silentsave":false,"ts":1347568258013,"patch":[[{"diffs":[[0,"d);\n\t\t}\n"],[1,"    "],[0,"}\n\tdocum"]],"start1":9313,"start2":9313,"length1":16,"length2":20},{"diffs":[[0,"son'\n    });\n}\n\n"],[1,"function hideLinkUpdate() {\n    x = document.getElementsByTagName(\"img\");\n\tfor (i=0;i<x.length;i++)\n\t{\n\t\tif(x[i].name.split(\"jpgdivNI\")[1]==\"mG\" || x[i].name.split(\"pngdivNI\")[1]==\"mG\") {\n\t\t\tx[i].parentNode.removeChild(x[i].parentNode.lastChild);\n\t\t}\n    }\n\tdocument.getElementById(\"updateLinkButton\").onclick = showLinkUpdate;\n\tdocument.getElementById(\"updateLinkButton\").value = \"Update Image Link\";\n}\n\nfunction showLinkUpdate() {\n    x = document.getElementsByTagName(\"img\");\n\tfor (i=0;i<x.length;i++)\n\t{\n    \tif(x[i].name.split(\"jpgdivNI\")[1]==\"mG\" || x[i].name.split(\"pngdivNI\")[1]==\"mG\") {\n    \tvar element = document.createElement(\"input\");\n    \telement.setAttribute(\"type\",\"button\");\n    \telement.setAttribute(\"value\",\"This\");\n    \telement.setAttribute(\"onclick\",\"javascript:updateLink(this)\");\n    \telement.onclick = function() {updateLink(this);};\n    \telement.style.position = 'absolute';\n    \telement.style.left = '0px';\n    \telement.style.top = '0px';\n    \tx[i].parentNode.appendChild(element);\n    \t}\n    }\n\tdocument.getElementById(\"updateLinkButton\").onclick = hideLinkUpdate;\n\tdocument.getElementById(\"updateLinkButton\").value = \"Cancel\";\n\t\n}\n\n"],[0,"function goHome("]],"start1":15314,"start2":15314,"length1":32,"length2":1192}]],"length":24723,"saved":false}
{"ts":1347568359250,"patch":[[{"diffs":[[0,"son'\n    });\n}\n\n"],[1,"function updateLink(el) {\n    saveToLocalStorage();\n\tsetPageScroll();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"post\" ;\n  myForm.action = \"/<%=data.params.user + '/' + data.params.gallery%>/updateLink\";\n    var myInput = document.createElement(\"input\") ;\n    myInput.setAttribute(\"name\", \"file\") ;\n    myInput.setAttribute(\"value\", el.parentNode.id.substring(0,el.parentNode.id.length-3));\n    myForm.appendChild(myInput) ;\n    var myInput5 = document.createElement(\"input\") ;\n    myInput5.setAttribute(\"name\", \"deleteIsOn\") ;\n    myInput5.setAttribute(\"value\", \"false\");\n    myForm.appendChild(myInput5) ;\n  document.body.appendChild(myForm) ;\n  myForm.submit() ;\n  document.body.removeChild(myForm) ;\n}\n\n"],[0,"function hideLin"]],"start1":15314,"start2":15314,"length1":32,"length2":760}]],"length":25451,"saved":false}
{"ts":1347568621956,"patch":[[{"diffs":[[0,"te(\"name\", \""],[-1,"deleteIsOn"],[1,"link"],[0,"\") ;\n    myI"]],"start1":15852,"start2":15852,"length1":34,"length2":28},{"diffs":[[0,"ribute(\"value\", "],[-1,"\"false\""],[1,"prompt(\"Link\", \"\")"],[0,");\n    myForm.ap"]],"start1":15892,"start2":15892,"length1":39,"length2":50}]],"length":25456,"saved":false}
{"ts":1347568657692,"patch":[[{"diffs":[[0,"age\" />\n"],[1,"  <input type=\"button\" id=\"updateLinkButton\" onclick=\"showUpdateLink();\" value=\"Update Image Link\" />\n"],[0,"  </div>"]],"start1":19677,"start2":19677,"length1":16,"length2":118}]],"length":25558,"saved":false}
{"ts":1347568701089,"patch":[[{"diffs":[[0,"show"],[1,"Link"],[0,"Update"],[-1,"Link"],[0,"();\""]],"start1":19739,"start2":19739,"length1":18,"length2":18}]],"length":25558,"saved":false}
{"ts":1347569725668,"patch":[[{"diffs":[[0,"nk\")) {\n"],[1,"         alert('has link');\n"],[0,"\t\t var l"]],"start1":9615,"start2":9615,"length1":16,"length2":44}]],"length":25586,"saved":false}
{"ts":1347569922823,"patch":[[{"diffs":[[0,"n(el) {\n"],[1,"     alert(el.src.split(\"/\").pop().replace('-small','').replace('-medium','').replace('-large','')+\"link\");\n"],[0,"\t if(doc"]],"start1":9487,"start2":9487,"length1":16,"length2":124}]],"length":25694,"saved":false}
{"ts":1347570513523,"patch":[[{"diffs":[[0,") {\n"],[-1,"     alert(el.src.split(\"/\").pop().replace('-small','').replace('-medium','').replace('-large','')+\"link\");\n"],[0,"\t if"]],"start1":9491,"start2":9491,"length1":116,"length2":8},{"diffs":[[0,") {\n"],[-1,"         alert('has link');\n"],[0,"\t\t v"]],"start1":9619,"start2":9619,"length1":36,"length2":8}]],"length":25558,"saved":false}
{"contributors":[],"silentsave":false,"ts":1347855594737,"patch":[[{"diffs":[[0,"script>\n"],[-1,"    \t"],[0,"<meta na"]],"start1":180,"start2":180,"length1":21,"length2":16},{"diffs":[[0,"\"/>\n"],[-1,"\t\t<style type=\"text/css\">\n\t\t\t*\n\t\t\t{\n\t\t\t\tcolor: #444;\n\t\t\t\tfont-family: Monospace;\n\t\t\t\tfont-size: 12px;\n\t\t\t}\n\t\t\t\n\t\t\tbody\n\t\t\t{\n\t\t\t\tmargin: 0px;\n\t\t\t\toverflow: scroll;\n\t\t\t}\n\t\t\t\n\t\t\tselect\n\t\t\t{\n\t\t\t\ttext-transform: uppercase;\n\t\t\t\tfont-size: 11px;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\t\t\t\n\t\t\thr\n\t\t\t{\n\t\t\t\tborder: 0;\n\t\t\t\theight: 1px;\n\t\t\t\tbackground-color: #ccc;\n\t\t\t\tmargin: 20px 0px;\n\t\t\t}\n\t\t\t\n\t\t\t.gui\n\t\t\t{\n\t\t\t\tcolor: black;\n\t\t\t\twidth: 350px;\n\t\t\t\tbackground-color: gray;\n\t\t\t\t//border-bottom: 1px solid #ddd;\n\t\t\t\t//padding: 5px 10px;\n\t\t\t\ttext-align: center;\n\t\t\t\t//text-transform: uppercase;\n\t\t\t\tline-height: 18px;\n\t\t\t\tcursor: default;\n                opacity:0.95;\n                z-index:13000;\n                    -moz-box-shadow: 1px 1px 25px #999;\n                \t-webkit-box-shadow: 1px 1px 25px #999;\n                    box-shadow: 1px 1px 25px #999;\n\t\t\t}\n\t\t\t\n\t\t\t.button\n\t\t\t{\n\t\t\t\tpadding: 2px;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t\t\n\t\t\t.key\n\t\t\t{\n\t\t\t\tpadding: 0px 8px;\n\t\t\t\tmargin-left: 1px;\n\t\t\t\tbackground-color: #eee;\n\t\t\t}\n            img {\n                opacity: 1;\n            }\n            img:hover {\n                opacity: 1;\n                /*Reflection*/ \n                /*-webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(.7, transparent), to(rgba(0,0,0,0.4)));   */\n                /*Glow*/ \n                -webkit-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); -moz-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); box-shadow: 0px 0px 5px rgba(255,255,255,0.8); \n            }\n            .no-hover {\n                opacity: 1;  \n                -webkit-box-shadow: 0px 0px 0px; -moz-box-shadow: 0px 0px 0px; box-shadow: 0px 0px 0px;\n            }\n            .no-hover:hover {\n                opacity: 1;  \n                -webkit-box-shadow: 0px 0px 0px; -moz-box-shadow: 0px 0px 0px; box-shadow: 0px 0px 0px;\n            }\n\t\t</style"],[1,"<LINK REL=StyleSheet HREF=\"css/main.css\" TYPE=\"text/css\" MEDIA=screen"],[0,">\n<s"]],"start1":293,"start2":293,"length1":1895,"length2":77}]],"length":23735,"saved":false}
{"ts":1347855659549,"patch":[[{"diffs":[[0,"t HREF=\""],[1,"/"],[0,"css/main"]],"start1":316,"start2":316,"length1":16,"length2":17}]],"length":23736,"saved":false}
{"ts":1347855797039,"patch":[[{"diffs":[[0,"script>\n"],[1,"    \t"],[0,"<meta na"]],"start1":180,"start2":180,"length1":16,"length2":21},{"diffs":[[0,"\"/>\n"],[-1,"<LINK REL=StyleSheet HREF=\"/css/main.css\" TYPE=\"text/css\" MEDIA=screen"],[1,"\t\t<style type=\"text/css\">\n\t\t\t*\n\t\t\t{\n\t\t\t\tcolor: #444;\n\t\t\t\tfont-family: Monospace;\n\t\t\t\tfont-size: 12px;\n\t\t\t}\n\t\t\t\n\t\t\tbody\n\t\t\t{\n\t\t\t\tmargin: 0px;\n\t\t\t\toverflow: scroll;\n\t\t\t}\n\t\t\t\n\t\t\tselect\n\t\t\t{\n\t\t\t\ttext-transform: uppercase;\n\t\t\t\tfont-size: 11px;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\t\t\t\n\t\t\thr\n\t\t\t{\n\t\t\t\tborder: 0;\n\t\t\t\theight: 1px;\n\t\t\t\tbackground-color: #ccc;\n\t\t\t\tmargin: 20px 0px;\n\t\t\t}\n\t\t\t\n\t\t\t.gui\n\t\t\t{\n\t\t\t\tcolor: black;\n\t\t\t\twidth: 350px;\n\t\t\t\tbackground-color: gray;\n\t\t\t\t//border-bottom: 1px solid #ddd;\n\t\t\t\t//padding: 5px 10px;\n\t\t\t\ttext-align: center;\n\t\t\t\t//text-transform: uppercase;\n\t\t\t\tline-height: 18px;\n\t\t\t\tcursor: default;\n                opacity:0.95;\n                z-index:13000;\n                    -moz-box-shadow: 1px 1px 25px #999;\n                \t-webkit-box-shadow: 1px 1px 25px #999;\n                    box-shadow: 1px 1px 25px #999;\n\t\t\t}\n\t\t\t\n\t\t\t.button\n\t\t\t{\n\t\t\t\tpadding: 2px;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t\t\n\t\t\t.key\n\t\t\t{\n\t\t\t\tpadding: 0px 8px;\n\t\t\t\tmargin-left: 1px;\n\t\t\t\tbackground-color: #eee;\n\t\t\t}\n            img {\n                opacity: 1;\n            }\n            img:hover {\n                opacity: 1;\n                /*Reflection*/ \n                /*-webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(.7, transparent), to(rgba(0,0,0,0.4)));   */\n                /*Glow*/ \n                -webkit-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); -moz-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); box-shadow: 0px 0px 5px rgba(255,255,255,0.8); \n            }\n            .no-hover {\n                opacity: 1;  \n                -webkit-box-shadow: 0px 0px 0px; -moz-box-shadow: 0px 0px 0px; box-shadow: 0px 0px 0px;\n            }\n            .no-hover:hover {\n                opacity: 1;  \n                -webkit-box-shadow: 0px 0px 0px; -moz-box-shadow: 0px 0px 0px; box-shadow: 0px 0px 0px;\n            }\n\t\t</style"],[0,">\n<s"]],"start1":298,"start2":298,"length1":78,"length2":1895}]],"length":25558,"saved":false}
{"ts":1347855953444,"patch":[[{"diffs":[[0,"ipt "],[-1,"type=\"text/javascript\" >\nfunction loginSuccess() {\n    setTimeout(function(){window.location.reload(true);}, 1000);\n}\n    \nfunction login() {\n    var data = new Object();\n    data.user = prompt(\"Enter username\",\"\");\n    data.password = prompt(\"Enter password\",\"\");\n    $.ajax({\n       type: 'POST',\n       url: '/users/list/login',\n       data: data,\n       success: loginSuccess(),\n       dataType: 'json'\n    });\n}\n\nfunction logoutSuccess() {\n        setTimeout(function(){window.location.reload(true);}, 1000);\n    }\n\nfunction logout() {\n    $.ajax({\n       type: 'POST',\n       url: '/users/list/logout',\n       data: '',\n       success: logoutSuccess(),\n       dataType: 'json'\n    });\n}\n\nvar ddpp=null;\nfunction getScrollXY() {\n\t  var scrOfX = 0, scrOfY = 0;\n\t  if( typeof( window.pageYOffset ) == 'number' ) {\n\t    //Netscape compliant\n\t    scrOfY = window.pageYOffset;\n\t    scrOfX = window.pageXOffset;\n\t  } else if( document.body && ( document.body.scrollLeft || document.body.scrollTop ) ) {\n\t    //DOM compliant\n\t    scrOfY = document.body.scrollTop;\n\t    scrOfX = document.body.scrollLeft;\n\t  } else if( document.documentElement && ( document.documentElement.scrollLeft || document.documentElement.scrollTop ) ) {\n\t    //IE6 standards compliant mode\n\t    scrOfY = document.documentElement.scrollTop;\n\t    scrOfX = document.documentElement.scrollLeft;\n\t  }\n\t  return [ scrOfX, scrOfY ];\n\t}\nfunction get_cookie(Name) {\n\t  var search = Name + \"=\"\n\t  var returnvalue = \"\";\n\t  if (document.cookie.length > 0) {\n\t    offset = document.cookie.indexOf(search)\n\t    // if cookie exists\n\t    if (offset != -1) { \n\t      offset += search.length\n\t      // set index of beginning of value\n\t      end = document.cookie.indexOf(\";\", offset);\n\t      // set index of end of cookie value\n\t      if (end == -1) end = document.cookie.length;\n\t      returnvalue=unescape(document.cookie.substring(offset, end))\n\t      }\n\t   }\n\t  return returnvalue;\n\t}\nfunction pageScroll() {\n\tvar scrollY = get_cookie(\"scrollY\");\n\tvar scrollX = get_cookie(\"scrollX\");\n\twindow.scrollBy(scrollX,scrollY); \n}\n\nfunction setPageScroll() {\n\tvar exp = new Date( );\n\tvar nowPlus = exp.getTime( ) + (5000);\n\texp.setTime(nowPlus);\n\tdocument.cookie = \"scrollY=\" + getScrollXY()[1] + \"; expires=\" + exp.toGMTString( );\n\tdocument.cookie = \"scrollX=\" + getScrollXY()[0] + \"; expires=\" + exp.toGMTString( );\n}\nfunction showUpload() {\n\tdocument.getElementById(\"upload\").style.visibility = 'visible';\n\tif(!document.getElementById(\"overlay\")){\n\t\tx = document.getElementsByTagName(\"img\");\n\t\tfor (i=0;i<x.length;i++)\n\t\t{\n\t\t\tx[i].style.visibility = 'hidden';\n\t\t}\n\t} else {\n\t\tdocument.getElementById(\"overlay\").style.visibility = 'visible';\n\t}\n}\nfunction hideUpload() {\n\tdocument.getElementById(\"upload\").style.visibility = 'hidden';\n\tif(!document.getElementById(\"overlay\")){\n\t\tx = document.getElementsByTagName(\"img\");\n\t\tfor (i=0;i<x.length;i++)\n\t\t{\n\t\t\tx[i].style.visibility = 'visible';\n\t\t}\n\t} else {\n\tdocument.getElementById(\"overlay\").style.visibility = 'hidden';\n\t}\n}\nfunction showLinkUpload() {\n\tdocument.getElementById(\"uploadLink\").style.visibility = 'visible';\n\tif(!document.getElementById(\"overlay\")){\n\t\tx = document.getElementsByTagName(\"img\");\n\t\tfor (i=0;i<x.length;i++)\n\t\t{\n\t\t\tx[i].style.visibility = 'hidden';\n\t\t}\n\t} else {\n\t\tdocument.getElementById(\"overlay\").style.visibility = 'visible';\n\t}\n}\nfunction hideLinkUpload() {\n\tdocument.getElementById(\"uploadLink\").style.visibility = 'hidden';\n\tif(!document.getElementById(\"overlay\")){\n\t\tx = document.getElementsByTagName(\"img\");\n\t\tfor (i=0;i<x.length;i++)\n\t\t{\n\t\t\tx[i].style.visibility = 'visible';\n\t\t}\n\t} else {\n\tdocument.getElementById(\"overlay\").style.visibility = 'hidden';\n\t}\n}\n"],[1,"src=\"/js/functions.js\">"],[0,"</sc"]],"start1":2195,"start2":2195,"length1":3706,"length2":31}]],"length":21883,"saved":false}
{"ts":1347856176039,"patch":[[{"diffs":[[0,"  }\n"],[-1,"\t\t</style>\n<script src=\"/js/functions.js\"></script>\n<style type=\"text/css\">\n"],[0,".dra"]],"start1":2176,"start2":2176,"length1":84,"length2":8},{"diffs":[[0,"}\n//img {\n//"],[-1,"\t"],[1,"    "],[0,"-moz-box-sha"]],"start1":2206,"start2":2206,"length1":25,"length2":28},{"diffs":[[0,"\n}\n\t"],[-1,"</style>\n\t\n\t<script type=\"text/javascript\">\n\tfunction getWindowSize() {\n         var viewportwidth;\n         var viewportheight;\n        \n         if (typeof window.innerWidth != 'undefined')\n         {\n              viewportwidth = window.innerWidth;\n              viewportheight = window.innerHeight;\n         } else if (typeof document.documentElement != 'undefined'\n             && typeof document.documentElement.clientWidth !=\n             'undefined' && document.documentElement.clientWidth != 0)\n         {\n               viewportwidth = document.documentElement.clientWidth;\n               viewportheight = document.documentElement.clientHeight;\n         } else {\n               viewportwidth = document.getElementsByTagName('body')[0].clientWidth;\n               viewportheight = document.getElementsByTagName('body')[0].clientHeight\n         }\n         if(viewportwidth==0) {\n        \t viewportwidth = document.getElementsByTagName('body')[0].clientWidth;}\n         if(viewportheight==0) {\n             viewportheight = document.getElementsByTagName('body')[0].clientWidth;}\n         return [viewportwidth, viewportheight];\n\t}\n</script>\n<script type=\"text/javascript\">\nfunction resizeFirst() {\n\tx = document.getElementsByTagName(\"img\");\n\tvar viewportwidth = getWindowSize()[0];\n\tfor (i=0;i<x.length;i++)\n\t{\n\t\tx[i].style.width = x[i].width*(viewportwidth/1366)+\"px\";\n\t\tx[i].style.height = x[i].height*(viewportwidth/1366)+\"px\";\n\t\tx[i].style.left = parseInt(x[i].style.left)*(viewportwidth/1366)+\"px\";\n\t\tx[i].style.top = parseInt(x[i].style.top)*(viewportwidth/1366)+\"px\";\n\t}\n}\n\nfunction showDelete() {\n\tx = document.getElementsByTagName(\"img\");\n\tfor (i=0;i<x.length;i++)\n\t{\n\tif(x[i].name.split(\"jpgdivNI\")[1]==\"mG\" || x[i].name.split(\"pngdivNI\")[1]==\"mG\") {\n\tvar element = document.createElement(\"input\");\n\telement.setAttribute(\"type\",\"button\");\n\telement.setAttribute(\"value\",\"x\");\n\telement.setAttribute(\"onclick\",\"javascript:deleteImage(this)\");\n\telement.onclick = function() {deleteImage(this);};\n\telement.style.position = 'absolute';\n\telement.style.left = '0px';\n\telement.style.top = '0px';\n\tx[i].parentNode.appendChild(element);\n\t}\n}\n\tdocument.getElementById(\"adminDeleteButton\").onclick = hideDelete;\n\tdocument.getElementById(\"adminDeleteButton\").value = \"Done deleting\";\n\t\n}\n\nfunction hideDelete() {\n\tx = document.getElementsByTagName(\"img\");\n\tfor (i=0;i<x.length;i++)\n\t{\n\t\tif(x[i].name.split(\"jpgdivNI\")[1]==\"mG\" || x[i].name.split(\"pngdivNI\")[1]==\"mG\") {\n\t\t\tx[i].parentNode.removeChild(x[i].parentNode.lastChild);\n\t\t}\n    }\n\tdocument.getElementById(\"adminDeleteButton\").onclick = showDelete;\n\tdocument.getElementById(\"adminDeleteButton\").value = \"Delete image\";\n}\n\n function fullScreen(el) {\n\t if(document.getElementById(el.src.split(\"/\").pop().replace('-small','').replace('-medium','').replace('-large','')+\"link\")) {\n\t\t var linkObj = document.getElementById(el.src.split(\"/\").pop().replace('-small','').replace('-medium','').replace('-large','')+\"link\");\n         var t = '';\n\t\t if(linkObj.innerText){\n\t\t\t t = linkObj.innerText;\n\t\t } else if(linkObj.textContent) {\n\t\t\t t = linkObj.textContent;\n\t\t }\n         if(t.indexOf('javascript:')==-1) {\n             window.location = t;\n         } else {\n             eval(t);\n         }\n\t } else {\n        document.getElementById(\"fullScreenImage\").src = el.src;\n        var ih = document.getElementById(el.id).firstChild.height;\n        var iw = document.getElementById(el.id).firstChild.width;\n        document.getElementById(\"fullScreenImage\").style.width = getWindowSize()[0] + 'px';\n           var rs = getWindowSize()[1]/getWindowSize()[0];\n           var ri = ih/iw;\n           var rsi = rs/ri;\n           if(rsi>1) {\n               document.getElementById(\"fullScreenImg\").style.width = 0.9*getWindowSize()[0] + 'px';\n               document.getElementById(\"fullScreenImg\").style.left = 0.05*getWindowSize()[0] + 'px';\n               document.getElementById(\"fullScreenImage\").style.width = 0.9*getWindowSize()[0] + 'px';\n           } else {\n               var rsic = rsi*0.9*getWindowSize()[0];\n               document.getElementById(\"fullScreenImg\").style.width = rsic + 'px';\n               document.getElementById(\"fullScreenImg\").style.left = (getWindowSize()[0]-rsic)/2 + 'px';\n               document.getElementById(\"fullScreenImage\").style.width = rsic + 'px';\n           }\n\n       if(document.getElementById(\"overlay\")){\n       \t\tdocument.getElementById(\"overlay\").style.visibility = 'visible';\n       }\n       if(document.getElementById(\"fullScreenImage\").complete) {\n           document.getElementById(\"closeFullscreenButton\").style.visibility = 'visible';\n           document.getElementById(\"fullScreenImg\").style.visibility = 'visible';\n           document.getElementById(\"fullScreenImage\").style.visibility = 'visible';\n       }\n       document.getElementById(\"fullScreenImage\").onload = function() {\n               document.getElementById(\"closeFullscreenButton\").style.visibility = 'visible';\n               document.getElementById(\"fullScreenImg\").style.visibility = 'visible';\n               document.getElementById(\"fullScreenImage\").style.visibility = 'visible';\n       }\n       var hiResImg = new Image();\n       hiResImg.src = el.src.substring(0,el.src.lastIndexOf('-')) + '-large' + el.src.substring(el.src.lastIndexOf('.'));\n       if(hiResImg.complete) {\n           if((document.getElementById(\"fullScreenImage\").style.visibility=='visible') && (document.getElementById(\"fullScreenImage\").src==el.src)) {\n                document.getElementById(\"fullScreenImage\").src = hiResImg.src;\n           }\n       }\n       hiResImg.onload = function() {\n           if((document.getElementById(\"fullScreenImage\").style.visibility=='visible') && (document.getElementById(\"fullScreenImage\").src==el.src)) {\n               document.getElementById(\"fullScreenImage\").src = hiResImg.src;\n           }\n       }\n        ddpp = dd;\n        dd.obj=null;\n        dd.evt=function(d_e) {};\n     }\n}\n\nfunction closeFullscreen() {\n    dd=ddpp;\n    dd.evt = function(d_e)\n    {\n        this.but = (this.e = d_e || window.event).which || this.e.button || 0;\n        this.button = (this.e.type == 'mousedown')? this.but\n    \t\t: (dd.e && dd.e.button)? dd.e.button\n    \t\t: 0;\n    \tthis.src = this.e.target || this.e.srcElement || null;\n    \tthis.src.tag = (\"\" + (this.src.tagName || this.src)).toLowerCase();\n    \tthis.x = dd.Int(this.e.pageX || this.e.clientX || 0);\n    \tthis.y = dd.Int(this.e.pageY || this.e.clientY || 0);\n    \tif(dd.ie)\n    \t{\n    \t\tthis.x += dd.getScrollX() - (dd.ie && !dd.iemac)*1;\n    \t\tthis.y += dd.getScrollY() - (dd.ie && !dd.iemac)*1;\n    \t}\n    \t//this.modifKey = this.e.modifiers? this.e.modifiers&Event.SHIFT_MASK : (this.e.shiftKey || false);\n    \tif((this.but==3) || (this.but==2)){\n    \t\tthis.modifKey = true;\n    \t} else {\n    \t\tthis.modifKey = false;\n    \t}\n    };\n\tdocument.getElementById(\"fullScreenImage\").style.visibility = 'hidden';\n   document.getElementById(\"fullScreenImg\").style.visibility = 'hidden';\n   if(document.getElementById(\"overlay\")){\n   \t\tdocument.getElementById(\"overlay\").style.visibility = 'hidden';\n   }\n   document.getElementById(\"closeFullscreenButton\").style.visibility = 'hidden';\n}\n\nfunction deleteImage(el) {\n\tsaveToLocalStorage();\n\tsetPageScroll();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"post\" ;\n  myForm.action = \"/<%=data.params.user + '/' + data.params.gallery%>/photos/delete\";\n    var myInput = document.createElement(\"input\") ;\n    myInput.setAttribute(\"name\", \"file\") ;\n    myInput.setAttribute(\"value\", el.parentNode.id.substring(0,el.parentNode.id.length-3));\n    myForm.appendChild(myInput) ;\n    var myInput5 = document.createElement(\"input\") ;\n    myInput5.setAttribute(\"name\", \"deleteIsOn\") ;\n    myInput5.setAttribute(\"value\", \"false\");\n    myForm.appendChild(myInput5) ;\n  document.body.appendChild(myForm) ;\n  myForm.submit() ;\n  document.body.removeChild(myForm) ;\n}\n\nfunction success() {\n    \n}\nfunction saveCoords() {\n    saveToLocalStorage();\n    setPageScroll();\n    \n    var data = new Object();\n    data.side = dd.obj.x*(1366/getWindowSize()[0]);\n    data.top = dd.obj.y*(1366/getWindowSize()[0]);\n    data.image = dd.obj.name;\n    data.width = dd.obj.w*(1366/getWindowSize()[0]);\n    data.height = dd.obj.h*(1366/getWindowSize()[0]);\n    data.deleteIsOn = '';\n    data.z = dd.z;\n    $.ajax({\n      type: 'POST',\n      url: '/<%=data.params.user + '/' + data.params.gallery%>/upsert',\n      data: data,\n      success: success(),\n      dataType: 'json'\n    });\n}\n\nfunction updateLink(el) {\n    saveToLocalStorage();\n\tsetPageScroll();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"post\" ;\n  myForm.action = \"/<%=data.params.user + '/' + data.params.gallery%>/updateLink\";\n    var myInput = document.createElement(\"input\") ;\n    myInput.setAttribute(\"name\", \"file\") ;\n    myInput.setAttribute(\"value\", el.parentNode.id.substring(0,el.parentNode.id.length-3));\n    myForm.appendChild(myInput) ;\n    var myInput5 = document.createElement(\"input\") ;\n    myInput5.setAttribute(\"name\", \"link\") ;\n    myInput5.setAttribute(\"value\", prompt(\"Link\", \"\"));\n    myForm.appendChild(myInput5) ;\n  document.body.appendChild(myForm) ;\n  myForm.submit() ;\n  document.body.removeChild(myForm) ;\n}\n\nfunction hideLinkUpdate() {\n    x = document.getElementsByTagName(\"img\");\n\tfor (i=0;i<x.length;i++)\n\t{\n\t\tif(x[i].name.split(\"jpgdivNI\")[1]==\"mG\" || x[i].name.split(\"pngdivNI\")[1]==\"mG\") {\n\t\t\tx[i].parentNode.removeChild(x[i].parentNode.lastChild);\n\t\t}\n    }\n\tdocument.getElementById(\"updateLinkButton\").onclick = showLinkUpdate;\n\tdocument.getElementById(\"updateLinkButton\").value = \"Update Image Link\";\n}\n\nfunction showLinkUpdate() {\n    x = document.getElementsByTagName(\"img\");\n\tfor (i=0;i<x.length;i++)\n\t{\n    \tif(x[i].name.split(\"jpgdivNI\")[1]==\"mG\" || x[i].name.split(\"pngdivNI\")[1]==\"mG\") {\n    \tvar element = document.createElement(\"input\");\n    \telement.setAttribute(\"type\",\"button\");\n    \telement.setAttribute(\"value\",\"This\");\n    \telement.setAttribute(\"onclick\",\"javascript:updateLink(this)\");\n    \telement.onclick = function() {updateLink(this);};\n    \telement.style.position = 'absolute';\n    \telement.style.left = '0px';\n    \telement.style.top = '0px';\n    \tx[i].parentNode.appendChild(element);\n    \t}\n    }\n\tdocument.getElementById(\"updateLinkButton\").onclick = hideLinkUpdate;\n\tdocument.getElementById(\"updateLinkButton\").value = \"Cancel\";\n\t\n}\n\nfunction goHome() {\n  saveToLocalStorage();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"get\" ;\n  myForm.action = '/<%=data.params.user%>/galleries/list';\n  document.body.appendChild(myForm);\n  myForm.submit();\n  document.body.removeChild(myForm);\n}\nfunction shortClick(src) {\n\talert(src);\n}\nfunction fullScreenButton(el) {\n\tvar fullScreenButton = document.createElement(\"img\");\n\tfullScreenButton.setAttribute(\"id\", \"fullScreenButton\");\n\tfullScreenButton.setAttribute(\"src\",\"/images/upArrow.png\");\n\tel.parentNode.appendChild(fullScreenButton);\n\tfullScreenButton = document.getElementById(\"fullScreenButton\");\n\tfullScreenButton.style.position = 'absolute';\n\tfullScreenButton.style.left = '0px';\n\tfullScreenButton.style.top = '0px';\n\tfullScreenButton.style.width = el.width*0.05+\"px\";\n\tfullScreenButton.style.height = fullScreenButton.style.width;\n\tfullScreenButton.style.visibility = 'visible';\n\t\n\tvar fullScreenButton2 = document.createElement(\"img\");\n\tfullScreenButton2.setAttribute(\"id\", \"fullScreenButton2\");\n\tfullScreenButton2.setAttribute(\"src\",\"/images/downArrow.png\");\n\tel.parentNode.appendChild(fullScreenButton2);\n\tfullScreenButton2 = document.getElementById(\"fullScreenButton2\");\n\tfullScreenButton2.style.position = 'absolute';\n\tfullScreenButton2.style.right = '0px';\n\tfullScreenButton2.style.bottom = '0px';\n\tfullScreenButton2.style.width = el.width*0.05+\"px\";\n\tfullScreenButton2.style.height = fullScreenButton2.style.width;\n\tfullScreenButton2.style.visibility = 'visible';\n}\nfunction deleteFullScreenButton(el) {\n\tvar fullScreenButton = document.getElementById(\"fullScreenButton\");\n\tfullScreenButton.parentNode.removeChild(fullScreenButton);\n\tvar fullScreenButton2 = document.getElementById(\"fullScreenButton2\");\n\tfullScreenButton2.parentNode.removeChild(fullScreenButton2);\n}\n</script>\n\t"],[1,"\t</style>\n<script src=\"/js/functions.js\"></script>"],[0,"\n</h"]],"start1":3033,"start2":3033,"length1":12266,"length2":58}]],"length":9602,"saved":false}
{"contributors":[],"silentsave":false,"ts":1347918713793,"patch":[[{"diffs":[[0,"script>\n"],[1,"<script type=\"text/javascript\">\nfunction deleteImage(el) {\n    saveToLocalStorage();\n\tsetPageScroll();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"post\" ;\n  myForm.action = \"/<%=data.params.user + '/' + data.params.gallery%>/photos/delete\";\n    var myInput = document.createElement(\"input\") ;\n    myInput.setAttribute(\"name\", \"file\") ;\n    myInput.setAttribute(\"value\", el.parentNode.id.substring(0,el.parentNode.id.length-3));\n    myForm.appendChild(myInput) ;\n    var myInput5 = document.createElement(\"input\") ;\n    myInput5.setAttribute(\"name\", \"deleteIsOn\") ;\n    myInput5.setAttribute(\"value\", \"false\");\n    myForm.appendChild(myInput5) ;\n  document.body.appendChild(myForm) ;\n  myForm.submit() ;\n  document.body.removeChild(myForm) ;\n}\nfunction saveCoords() {\n    saveToLocalStorage();\n    setPageScroll();\n    \n    var data = new Object();\n    data.side = dd.obj.x*(1366/getWindowSize()[0]);\n    data.top = dd.obj.y*(1366/getWindowSize()[0]);\n    data.image = dd.obj.name;\n    data.width = dd.obj.w*(1366/getWindowSize()[0]);\n    data.height = dd.obj.h*(1366/getWindowSize()[0]);\n    data.deleteIsOn = '';\n    data.z = dd.z;\n    $.ajax({\n      type: 'POST',\n      url: '/<%=data.params.user + '/' + data.params.gallery%>/upsert',\n      data: data,\n      success: success(),\n      dataType: 'json'\n    });\n}\n\n</script>\n"],[0,"</head>\n"]],"start1":3080,"start2":3080,"length1":16,"length2":1362}]],"length":10948,"saved":false}
{"ts":1347918733172,"patch":[[{"diffs":[[0,"  });\n}\n"],[1,"function updateLink(el) {\n    saveToLocalStorage();\n    setPageScroll();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"post\" ;\n  myForm.action = \"/<%=data.params.user + '/' + data.params.gallery%>/updateLink\";\n    var myInput = document.createElement(\"input\") ;\n    myInput.setAttribute(\"name\", \"file\") ;\n    myInput.setAttribute(\"value\", el.parentNode.id.substring(0,el.parentNode.id.length-3));\n    myForm.appendChild(myInput) ;\n    var myInput5 = document.createElement(\"input\") ;\n    myInput5.setAttribute(\"name\", \"link\") ;\n    myInput5.setAttribute(\"value\", prompt(\"Link\", \"\"));\n    myForm.appendChild(myInput5) ;\n  document.body.appendChild(myForm) ;\n  myForm.submit() ;\n  document.body.removeChild(myForm) ;\n}"],[0,"\n</scrip"]],"start1":4415,"start2":4415,"length1":16,"length2":750}]],"length":11682,"saved":false}
{"ts":1347918762387,"patch":[[{"diffs":[[0,"rm) ;\n}\n"],[1,"function goHome() {\n  saveToLocalStorage();\n  var myForm = document.createElement(\"form\");\n  myForm.method=\"get\" ;\n  myForm.action = '/<%=data.params.user%>/galleries/list';\n  document.body.appendChild(myForm);\n  myForm.submit();\n  document.body.removeChild(myForm);\n}\n"],[0,"</script"]],"start1":5150,"start2":5150,"length1":16,"length2":285}]],"length":11951,"saved":false}
{"ts":1347919442692,"patch":[[{"diffs":[[0,";\n} %>\n\n"],[1,"<%\n    if(data.params.gallery=='galleries') {\n        var c = 0;\n        for(var i in data.galleries) {\n            var source = data.galleries[i][0];\n            if(source) source = source.source;\n            else source = \"\";\n            c++;\n%>\n            <a href=\"<%='/' + data.params.user + '/' + i%>\">\n                <img src=\"<%=source.split('.')[0]+'-small.'+source.split('.')[1]%>\" style=\"position:absolute;left:<%=300+250*(c % 3)%>px;top:<%=150+150*Math.floor((c-1)/3)%>px;width:210px;height:140px;\" />\n            </a>\n<%\n        }\n    }\n%>\n\n"],[0,"<script "]],"start1":9364,"start2":9364,"length1":16,"length2":571}]],"length":12506,"saved":false}
{"ts":1347919530156,"patch":[[{"diffs":[[0,"ext/javascript\">"],[1,"alert(\"<%data.params.gallery=='galleries'%>\");"],[0,"\nfunction setDra"]],"start1":9942,"start2":9942,"length1":32,"length2":78}]],"length":12552,"saved":false}
{"ts":1347919543442,"patch":[[{"diffs":[[0,".gallery"],[-1,"=='galleries'"],[0,"%>\");\nfu"]],"start1":9978,"start2":9978,"length1":29,"length2":16}]],"length":12539,"saved":false}
{"ts":1347919578793,"patch":[[{"diffs":[[0,"a.params"],[-1,".gallery"],[0,"%>\");\nfu"]],"start1":9970,"start2":9970,"length1":24,"length2":16}]],"length":12531,"saved":false}
{"ts":1347919594165,"patch":[[{"diffs":[[0,"lert(\"<%"],[1,"JSON.stringify("],[0,"data.par"]],"start1":9959,"start2":9959,"length1":16,"length2":31},{"diffs":[[0,"a.params"],[1,")"],[0,"%>\");\nfu"]],"start1":9985,"start2":9985,"length1":16,"length2":17}]],"length":12547,"saved":false}
{"ts":1347919727835,"patch":[[{"diffs":[[0,"pt\">"],[-1,"alert(\"<%JSON.stringify(data.params)%>\");"],[0,"\nfun"]],"start1":9954,"start2":9954,"length1":49,"length2":8}]],"length":12506,"saved":false}
{"ts":1347919851325,"patch":[[{"diffs":[[0,"')[1]%>\" style=\""],[1,"z-index:10000;"],[0,"position:absolut"]],"start1":9756,"start2":9756,"length1":32,"length2":46}]],"length":12520,"saved":false}
{"ts":1347921854316,"patch":[[{"diffs":[[0,"0px;"],[-1,"height:140px;"],[0,"\" />"]],"start1":9879,"start2":9879,"length1":21,"length2":8}]],"length":12507,"saved":false}
{"ts":1347921884777,"patch":[[{"diffs":[[0,"h:210px;"],[1,"height:140px;"],[0,"\" />\n   "]],"start1":9875,"start2":9875,"length1":16,"length2":29}]],"length":12520,"saved":false}
{"ts":1347922015085,"patch":[[{"diffs":[[0,"0px;"],[-1,"height:140px;"],[0,"\" />"]],"start1":9879,"start2":9879,"length1":21,"length2":8}]],"length":12507,"saved":false}
{"ts":1347922146032,"patch":[[{"diffs":[[0,"h:210px;"],[1,"height:140px;"],[0,"\" />\n   "]],"start1":9875,"start2":9875,"length1":16,"length2":29}]],"length":12520,"saved":false}
{"ts":1347922173464,"patch":[[{"diffs":[[0,"' + i%>\""],[1," width=\"200px\""],[0,">\n      "]],"start1":9671,"start2":9671,"length1":16,"length2":30},{"diffs":[[0,"0px;"],[-1,"height:140px;"],[0,"\" />"]],"start1":9893,"start2":9893,"length1":21,"length2":8}]],"length":12521,"saved":false}
{"ts":1347922321645,"patch":[[{"diffs":[[0,"i%>\""],[-1," width=\"200px\""],[0,">\n  "]],"start1":9675,"start2":9675,"length1":22,"length2":8},{"diffs":[[0,"h:210px;"],[1,"height:140px;"],[0,"\" />\n   "]],"start1":9875,"start2":9875,"length1":16,"length2":29}]],"length":12520,"saved":false}
{"ts":1347922348883,"patch":[[{"diffs":[[0,"')[1]%>\" style=\""],[1,"visibility:visible;"],[0,"z-index:10000;po"]],"start1":9756,"start2":9756,"length1":32,"length2":51},{"diffs":[[0,"0px;"],[-1,"height:140px;"],[0,"\" />"]],"start1":9898,"start2":9898,"length1":21,"length2":8}]],"length":12526,"saved":false}
{"ts":1347922997322,"patch":[[{"diffs":[[0,"le=\""],[-1,"visibility:visible;"],[0,"z-in"]],"start1":9768,"start2":9768,"length1":27,"length2":8},{"diffs":[[0,"h:210px;"],[1,"height:140px;"],[0,"\" />\n   "]],"start1":9875,"start2":9875,"length1":16,"length2":29}]],"length":12520,"saved":false}
{"ts":1347923035709,"patch":[[{"diffs":[[0,"0px;"],[-1,"height:140px;"],[0,"\" />"]],"start1":9879,"start2":9879,"length1":21,"length2":8}]],"length":12507,"saved":false}
{"ts":1347923055701,"patch":[[{"diffs":[[0,"    "],[-1,"-webkit-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); -moz-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); box-shadow: 0px 0px 5px rgba(255,255,255,0.8); "],[0,"\n   "]],"start1":1657,"start2":1657,"length1":162,"length2":8}]],"length":12353,"saved":false}
{"ts":1347923072004,"patch":[[{"diffs":[[0,"            "],[1,"-webkit-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); -moz-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); box-shadow: 0px 0px 5px rgba(255,255,255,0.8); "],[0,"\n           "]],"start1":1649,"start2":1649,"length1":24,"length2":178}]],"length":12507,"saved":false}
{"ts":1347923153688,"patch":[[{"diffs":[[0,"h:210px;"],[1,"height:140px;"],[0,"\" />\n   "]],"start1":9875,"start2":9875,"length1":16,"length2":29}]],"length":12520,"saved":false}
{"ts":1347923295557,"patch":[[{"diffs":[[0,"i%>\""],[-1,">\n                <img src=\"<%=source.split('.')[0]+'-small.'+source.split('.')[1]%>\" style=\""],[1," style=\"height:140px;overflow:hidden;visibility:visible;"],[0,"z-in"]],"start1":9675,"start2":9675,"length1":101,"length2":64},{"diffs":[[0,">px;"],[-1,"width:210px;height:14"],[1,"\">\n                <img src=\"<%=source.split('.')[0]+'-small.'+source.split('.')[1]%>\" style=\"width:21"],[0,"0px;"]],"start1":9830,"start2":9830,"length1":29,"length2":110}]],"length":12564,"saved":false}
{"ts":1347923340637,"patch":[[{"diffs":[[0,"dth:"],[-1,"2"],[0,"10"],[-1,"px;"],[1,"0%"],[0,"\" />"]],"start1":9930,"start2":9930,"length1":14,"length2":12}]],"length":12562,"saved":false}
{"ts":1347923376529,"patch":[[{"diffs":[[0,"=\"width:"],[1,"2"],[0,"10"],[-1,"0%"],[1,"px;"],[0,"\" />\n   "]],"start1":9926,"start2":9926,"length1":20,"length2":22}]],"length":12564,"saved":false}
{"ts":1347923399935,"patch":[[{"diffs":[[0,"visible;"],[1,"\">\n                <img src=\"<%=source.split('.')[0]+'-small.'+source.split('.')[1]%>\" style=\""],[0,"z-index:"]],"start1":9727,"start2":9727,"length1":16,"length2":110},{"diffs":[[0,">px;"],[-1,"\">\n                <img src=\"<%=source.split('.')[0]+'-small.'+source.split('.')[1]%>\" style=\""],[0,"widt"]],"start1":9924,"start2":9924,"length1":102,"length2":8}]],"length":12564,"saved":false}
{"ts":1347923428340,"patch":[[{"diffs":[[0," style=\""],[1,"width:210px;"],[0,"height:1"]],"start1":9679,"start2":9679,"length1":16,"length2":28}]],"length":12576,"saved":false}
{"ts":1347923447847,"patch":[[{"diffs":[[0,"visible;"],[1,"z-index:10000;position:absolute;"],[0,"\">\n     "]],"start1":9739,"start2":9739,"length1":16,"length2":48}]],"length":12608,"saved":false}
{"ts":1347923459311,"patch":[[{"diffs":[[0,"x:10000;"],[-1,"position:absolute;"],[0,"\">\n     "]],"start1":9753,"start2":9753,"length1":34,"length2":16}]],"length":12590,"saved":false}
{"ts":1347923888374,"patch":[[{"diffs":[[0,"%>\" "],[-1,"style=\"width:210px;height:140px;overflow:hidden;visibility:visible;z-index:10000;\""],[0,">\n  "]],"start1":9676,"start2":9676,"length1":90,"length2":8}]],"length":12508,"saved":false}
{"ts":1347923895663,"patch":[[{"diffs":[[0,"' + i%>\""],[-1," "],[0,">\n      "]],"start1":9671,"start2":9671,"length1":17,"length2":16}]],"length":12507,"saved":false}
{"ts":1347923904821,"patch":[[{"diffs":[[0,"h:210px;"],[1,"height:140px;"],[0,"\" />\n   "]],"start1":9875,"start2":9875,"length1":16,"length2":29}]],"length":12520,"saved":false}
{"ts":1347924474793,"patch":[[{"diffs":[[0,"        <img"],[1," alt=\"Empty Gallery\""],[0," src=\"<%=sou"]],"start1":9689,"start2":9689,"length1":24,"length2":44}]],"length":12540,"saved":false}
{"ts":1347925132635,"patch":[[{"diffs":[[0,"ries"],[-1,"/list"],[0,"';\n "]],"start1":5320,"start2":5320,"length1":13,"length2":8}]],"length":12535,"saved":false}
{"ts":1347925214480,"patch":[[{"diffs":[[0,"e=\"Home\" />\n"],[1,"  <input type=\"button\" onclick=\"newGallery();\" value=\"New Gallery\" />\n  <input type=\"button\" onclick=\"deleteGallery();\" value=\"Delete Gallery\" />\n  <input type=\"button\" onclick=\"login();\" value=\"Log In\" />\n  <input type=\"button\" onclick=\"logout();\" value=\"Log Out\" />\n  <input type=\"button\" onclick=\"signup();\" value=\"Sign Up\" />\n  <input type=\"button\" onclick=\"deleteAccount();\" value=\"Delete Account\" />\n"],[0,"  <input typ"]],"start1":5662,"start2":5662,"length1":24,"length2":430}]],"length":12941,"saved":false}
{"ts":1347925377528,"patch":[[{"diffs":[[0,"ck=\""],[-1,"window.open(document.URL.split('#')[0] + '/draw','_blank','location=0,width=900,height=600'"],[1,"drawImage("],[0,");\" "]],"start1":6264,"start2":6264,"length1":99,"length2":18}]],"length":12860,"saved":false}
{"ts":1347992436154,"patch":[[{"diffs":[[0,"  }\n%>\n\n"],[1,"<%\n    if((data.params.gallery=='users') && (data.params.user=='home')) {\n        var c = 0;\n        for(var i in data.users) {\n            c++;\n%>\n            <a href=\"<%='/' + data.users[i] + '/galleries'%>\">\n                <img alt=\"<%data.users[i]%>\" src=\"\" style=\"z-index:100000;position:absolute;left:<%=300+250*(c % 3)%>px;top:<%=150+150*Math.floor((c-1)/3)%>px;width:210px;height:140px;\" />\n            </a>\n<%\n        }\n    }\n%>\n\n"],[0,"<script "]],"start1":10273,"start2":10273,"length1":16,"length2":456}]],"length":13300,"saved":false}
{"ts":1347993363042,"patch":[[{"diffs":[[0,"\n\n<%\n    if("],[1,"("],[0,"data.params."]],"start1":9690,"start2":9690,"length1":24,"length2":25},{"diffs":[[0,"lery"],[-1,"=='galleries'"],[1,"!='users') && (data.params.user=='home')"],[0,") {\n"]],"start1":9718,"start2":9718,"length1":21,"length2":48},{"diffs":[[0,"-index:10000"],[1,"0"],[0,";position:ab"]],"start1":10141,"start2":10141,"length1":24,"length2":25},{"diffs":[[0,"  <a href=\"<%='/"],[1,"home/"],[0,"' + data.users[i"]],"start1":10468,"start2":10468,"length1":32,"length2":37},{"diffs":[[0,"s[i]"],[-1," + '/galleries'"],[0,"%>\">"]],"start1":10502,"start2":10502,"length1":23,"length2":8}]],"length":13319,"saved":false}
{"ts":1347994127872,"patch":[[{"diffs":[[0,"ams."],[-1,"gallery!='users"],[1,"user=='home"],[0,"') &"]],"start1":9711,"start2":9711,"length1":23,"length2":19},{"diffs":[[0,"data.params."],[-1,"user=='home"],[1,"gallery!='users"],[0,"')) {\n      "]],"start1":9733,"start2":9733,"length1":35,"length2":39},{"diffs":[[0,"ams."],[-1,"gall"],[1,"us"],[0,"er"],[-1,"y"],[0,"=='"],[-1,"users"],[1,"home"],[0,"') &"]],"start1":10329,"start2":10329,"length1":23,"length2":19},{"diffs":[[0,".params."],[-1,"us"],[1,"gall"],[0,"er"],[1,"y"],[0,"=='"],[-1,"home"],[1,"users"],[0,"')) {\n  "]],"start1":10355,"start2":10355,"length1":27,"length2":31}]],"length":13319,"saved":false}
{"ts":1347994143904,"patch":[[{"diffs":[[0,"      var c = 0;"],[1," %>ha<%"],[0,"\n        for(var"]],"start1":10386,"start2":10386,"length1":32,"length2":39}]],"length":13326,"saved":false}
{"ts":1347994328421,"patch":[[{"diffs":[[0,"r c = 0;"],[1," %>ha<%"],[0,"\n       "]],"start1":9776,"start2":9776,"length1":16,"length2":23},{"diffs":[[0,"      var c = 0;"],[-1," %>ha<%"],[0,"\n        for(var"]],"start1":10393,"start2":10393,"length1":39,"length2":32}]],"length":13326,"saved":false}
{"ts":1347995778325,"patch":[[{"diffs":[[0," + data.params.u"],[-1,"ser"],[0," + '/' + i%>\">\n "]],"start1":10002,"start2":10002,"length1":35,"length2":32}]],"length":13323,"saved":false}
