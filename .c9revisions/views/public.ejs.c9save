{"ts":1354921397905,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<!DOCTYPE HTML>\n<html>\n<head>\n<title>Photo (Beta)</title>\n<link rel=\"stylesheet\" href=\"http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css\" />\n<script src=\"http://code.jquery.com/jquery-1.8.2.js\"></script>\n<script src=\"http://code.jquery.com/ui/1.9.0/jquery-ui.js\"></script>\n<!--<script src=\"/js/jquery.ui.touch-punch.min.js\"></script>-->\n<script src=\"/js/functions.js\"></script>\n        <meta name=\"viewport\" content=\"width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;\"/>\n\t\t<style type=\"text/css\">\n\t\t\t*\n\t\t\t{\n\t\t\t\tcolor: #444;\n\t\t\t\tfont-family: Monospace;\n\t\t\t\tfont-size: 12px;\n\t\t\t}\n\t\t\t\n\t\t\tbody\n\t\t\t{\n\t\t\t\tmargin: 0px;\n\t\t\t\toverflow: scroll;\n\t\t\t}\n            .ui-wrapper {\n                opacity: 1;\n            }\n            .ui-wrapper:hover {\n                opacity: 1;   \n                /*Reflection*/ \n                /*-webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(.7, transparent), to(rgba(0,0,0,0.4)));   */\n                /*Glow*/ \n                -webkit-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); -moz-box-shadow: 0px 0px 5px rgba(255,255,255,0.8); box-shadow: 0px 0px 5px rgba(255,255,255,0.8); \n                -ms-filter: \"progid:DXImageTransform.Microsoft.Shadow(Strength=2, Direction=135, Color='#000000')\";\n                filter: progid:DXImageTransform.Microsoft.Shadow(Strength=2, Direction=135, Color='#000000');\n            }\n            img[alt] {\n                font-size: 2em;\n            }\n            .no-hover {\n                opacity: 1;  \n                -webkit-box-shadow: 0px 0px 0px; -moz-box-shadow: 0px 0px 0px; box-shadow: 0px 0px 0px;\n            }\n            .no-hover:hover {\n                opacity: 1;  \n                -webkit-box-shadow: 0px 0px 0px; -moz-box-shadow: 0px 0px 0px; box-shadow: 0px 0px 0px;\n            }\n            .drag {position: absolute;}\n            .ui-widget-overlay {\n               background: #111111;\n               opacity: .80;\n               filter: Alpha(Opacity=80);\n            }\n</style>\n    <script>\n        $(function() {\n            $( \".drag\" ).resizable({\n                aspectRatio: true,\n                stop: function(event) {\n                    var elements = document.getElementsByClassName(\"ui-wrapper\");\n                    var highest_index = 0;\n                    for (var i = 0; i < elements.length - 1; i++) {\n                        if (parseInt(elements[i].style.zIndex) > highest_index) {\n                            if(elements[i]!=event.target)\n                                highest_index = parseInt(elements[i].style.zIndex);\n                        }\n                    }\n                    event.target.style.zIndex = highest_index + 1;\n                }\n            });\n            $(\".ui-wrapper\").draggable({\n                zIndex: 15000,\n                stop: function(event) {\n                    var elements = document.getElementsByClassName(\"ui-wrapper\");\n                    var highest_index = 0;\n                    for (var i = 0; i < elements.length - 1; i++) {\n                        if (parseInt(elements[i].style.zIndex) > highest_index) {\n                            if(elements[i]!=event.target)\n                                highest_index = parseInt(elements[i].style.zIndex);\n                        }\n                    }\n                    event.target.style.zIndex = highest_index + 1;\n                }\n            }).click(function(event) {\n                fullScreen(event.target);\n            });\n        });\n    </script>\n</head>\n\n<body   oncontextmenu=\"return false;\" >\n<img class=\"no-hover\" name=\"background\" id=\"background\" style=\"width:100%;position:absolute;top:0px;left:0px;\" src=\"<%=data.storage + data.params.user + '-' + data.params.gallery%>-bg-public.png\" border=0/>\n<!--<script type=\"text/javascript\" src=\"/js/dragdrop.js\"></script>-->\n\n<div class=\"no-hover\" name=\"overlay\" id=\"overlay\" style=\"left:-50px;top:-50px;position:fixed;visibility:hidden;width:150%;height:150%;z-index:11000;background-color:gray;opacity:0.95;\" ></div>\n\n<% var il = \"\";\nfor(var i in data.images) { \n    if(data.images[i].link.length>2) {\n          %>\n          <div style=\"visibility:hidden;\" id=\"<%=data.images[i].source.split('/').pop()%>link\"><%=data.images[i].link%></div>\n    \t  <%\n    }\n    if((data.images[i].width<400) && (data.images[i].height<400)) {\n%>\n<img src=\"<%=data.images[i].source.replace('.jpg', '-small.jpg')%>\" style=\"z-index:<%=data.images[i].z%>;width:<%=Math.round(data.images[i].width)%>px;height:<%=Math.round(data.images[i].height)%>px;left:<%=Math.round(data.images[i].left)%>px;top:<%=Math.round(data.images[i].top)%>px;\" class=\"drag\" id=\"<%=data.images[i].source.split('/').pop()%>\" />\n<% \n} else if((data.images[i].width<900) && (data.images[i].height<900)) {\n%>\n<img src=\"<%=data.images[i].source.replace('.jpg', '-medium.jpg')%>\" style=\"z-index:<%=data.images[i].z%>;width:<%=Math.round(data.images[i].width)%>px;height:<%=Math.round(data.images[i].height)%>px;left:<%=Math.round(data.images[i].left)%>px;top:<%=Math.round(data.images[i].top)%>px;\" class=\"drag\" id=\"<%=data.images[i].source.split('/').pop()%>\" />\n<%\n} else {\n%>\n<img src=\"<%=data.images[i].source.replace('.jpg', '-large.jpg')%>\" style=\"z-index:<%=data.images[i].z%>;width:<%=Math.round(data.images[i].width)%>px;height:<%=Math.round(data.images[i].height)%>px;left:<%=Math.round(data.images[i].left)%>px;top:<%=Math.round(data.images[i].top)%>px;\" class=\"drag\" id=\"<%=data.images[i].source.split('/').pop()%>\" />\n<%\n}\nil += data.images[i].source.split('/').pop() + '\",\"';\n} %>\n\n<%\n    if((data.params.user=='home') && (data.params.gallery!='users')) {\n        var c = 0;\n        for(var i in data.galleries) {\n            var source = data.galleries[i][0];\n            if(source) source = source.source;\n            else source = \"\";\n            c++;\n%>\n            <a href=\"<%='/' + data.params.u + '/' + i%>\">\n            <!--\n                <img title=\"<%=i%>\" src=\"<%=source.split('.')[0]+'-small.'+source.split('.')[1]%>\" style=\"z-index:10;position:absolute;left:<%=300+250*(c % 3)%>px;top:<%=150+150*Math.floor((c-1)/3)%>px;width:210px;height:140px;\" />\n            -->\n                <img class=\"gridImg\" alt=\"<%=i%>\" src=\"<%=source.split('.')[0]+'-small.'+source.split('.')[1]%>\" style=\"border:2px solid white;z-index:10;position:absolute;left:<%=300+250*(c % 3)%>px;top:<%=150+150*Math.floor((c-1)/3)%>px;width:210px;height:140px;\" />\n            </a>\n<%\n        }\n    }\n%>\n\n<%\n    if((data.params.user=='home') && (data.params.gallery=='users')) {\n        var c = 0;\n        for(var i in data.users) {\n            c++;\n%>\n            <a href=\"<%='/home/' + data.users[i]%>\">\n                <img alt=\"<%=data.users[i]%>\" src=\"\" style=\"border:2px solid white;z-index:10;position:absolute;left:<%=300+250*(c % 3)%>px;top:<%=150+150*Math.floor((c-1)/3)%>px;width:210px;height:140px;\" />\n            </a>\n<%\n        }\n    }\n%>\n\n<script type=\"text/javascript\">\nfunction setDraggables() {\n\tSET_DHTML(SCALABLE, SCROLL, \"<%- il.substring(0, il.length-3)%>\");\n}\nresizeFirst();\n//setDraggables(); \npageScroll();\nif(false) showDelete();\nfunction setHover() {\n\tx = document.getElementsByTagName(\"img\");\n\tfor (i=0;i<x.length;i++)\n\t{\n\t\tif(x[i].name.split(\"jpgdivNI\")[1]==\"mG\") {\n\t\t\tx[i].onmouseover = function() {fullScreenButton(this);};\n\t\t\tx[i].onmouseout = function() {deleteFullScreenButton(this);};\n\t\t}\n\t}\n}\n//setHover();\n\n  </script>\n\n<div id=\"fullScreenImg\" style=\"top:4%;visibility:hidden;z-index:12000;position:fixed;\">\n<img class=\"no-hover\" id =\"fullScreenImage\" style=\"top:0px;left:0px;position:absolute;z-index:12001;visibility:hidden;\" src=\"\" />\n<img class=\"no-hover\" id=\"closeFullscreenButton\" src=\"/images/close.png\" style=\"cursor:pointer;visibility:hidden;position:absolute;left:-40px;top:0px;z-index:10000;\" onclick=\"closeFullscreen();\"/>\n</div>\n<!--<img src=\"/images/upArrow.png\" style=\"visibility:hidden\" />\n<img src=\"/images/downArrow.png\" style=\"visibility:hidden\" />-->\n\n<!--Google Analytics stuff here -->\n    <script type=\"text/javascript\">\n    \n      var _gaq = _gaq || [];\n      _gaq.push(['_setAccount', 'UA-33468041-1']);\n      _gaq.push(['_trackPageview']);\n    \n      (function() {\n        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;\n        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';\n        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);\n      })();\n    \n    </script>\n    \n<!-- Observer script -->\n<!--\n<script type=\"text/javascript\">\n(function(d,n){var e =d.createElement(n),s=d.getElementsByTagName(n)[0];e.async=true;e.src=\"http://commondatastorage.googleapis.com/client/observer.js#{observer:'4f8749379ef5072e400625cc'}\";s.parentNode.insertBefore(e,s);})(document,\"script\");\n</script>\n-->\n\n</body>\n</html>\n"]],"start1":0,"start2":0,"length1":0,"length2":8928}]],"length":8928}
{"contributors":[],"silentsave":false,"ts":1354921474964,"patch":[[{"diffs":[[0,"\" src=\"/"],[-1,"image"],[1,"png"],[0,"s/close."]],"start1":7736,"start2":7736,"length1":21,"length2":19},{"diffs":[[0,"g src=\"/"],[-1,"image"],[1,"png"],[0,"s/downAr"]],"start1":7958,"start2":7958,"length1":21,"length2":19}]],"length":8924,"saved":false}
{"contributors":[],"silentsave":false,"ts":1354926353062,"patch":[[{"diffs":[[0,"tle>"],[-1,"Pho"],[1,"Table"],[0,"to"],[1,"p"],[0," (Be"]],"start1":33,"start2":33,"length1":13,"length2":16}]],"length":8927,"saved":false}
