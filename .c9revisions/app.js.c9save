{"ts":1353959449362,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var express = require('express'),\n\tapp = express(),\n\trest = require('restler'),\n\tejs = require('ejs'),\n\tmongo = require('mongodb'),\n\turl = require(\"url\"),\n\tfs = require('fs'),\n\tsys = require('sys'),\n    MongoStore = require('connect-mongo')(express),\n    nodemailer = require('nodemailer'),\n    crypto = require('crypto'),\n    request = require('request'),\n    config = require('./config.js'),\n\tim = require('imagemagick');\n    \nvar db = new mongo.Db('tabletop', new mongo.Server(config.db.url, config.db.prt, {\n    \tauto_reconnect: true\n\t}), {});\n\n//Configure path to ImageMagick\nim.identify.path = config.im.identify;\nim.convert.path = config.im.convert;\n\napp.use(express.cookieParser());\napp.use(express.session({\n\tsecret: \"thisIsSparta!\",\n    store: new MongoStore({\n      db: 'tabletop',\n      auto_reconnect: true\n    })\n}));\napp.use(express.bodyParser({\n\tuploadDir: __dirname + '/images'\n}));\n\napp.set('view engine', 'ejs');\napp.set('views', __dirname + '/views');\napp.use('/js', express.static(__dirname + '/js'));\napp.use('/css', express.static(__dirname + '/css'));\napp.use('/images', express.static(__dirname + '/images'));\n\napp.get('/:user/:gallery/draw', function(req, res) {\n    res.render('draw', {\n\t\tlayout: false,\n\t\tdata: {}\n\t});\n});\n\napp.post('/:user/:gallery/publish', function(req, res) {\n    console.log('Got publish request for user ' + req.params.user + ' and gallery ' + req.params.gallery);\n    var user = req.params.user.toLowerCase();\n    var gallery = req.params.gallery.toLowerCase();\n    if(req.session.user==user) {\n        db.open(function(err, db) {\n    \t\tdb.collection('users', function(err, collection) {\n    \t\t\tcollection.findOne({\n    \t\t\t\t\"user\": user\n    \t\t\t}, function(err, document) {\n    \t\t\t\tvar gal = document.galleries[gallery];\n        \t\t\tdb.collection('users_public', function(err, collection) {\n                \t\tcollection.findOne({\n            \t\t\t\t\"user\": user\n            \t\t\t}, function(err, document) {\n            \t\t\t\tdocument.galleries[gallery] = gal;\n            \t\t\t\tcollection.update({\n            \t\t\t\t\t\"user\": user\n            \t\t\t\t}, document, {\n            \t\t\t\t\tupsert: true,\n            \t\t\t\t\tsafe: true\n            \t\t\t\t}, function(err, document) {\n                                db.close();\n                                res.send(200, {success:true});\n                                var pp = config.storage.url + user + '-' + gallery + '-bg.png';\n                                var pb = config.storage.url + user + '-' + gallery + '-bg-public.png';\n                                request.get(pp).pipe(request.post(pb));\n            \t\t\t\t});\n            \t\t\t});\n        \t\t\t});\n    \t\t\t});\n    \t\t});\n    \t});\n    } else {\n        res.send(400, 'Sorry, but you do not have access to publish this gallery.');\n    }\n});\n\napp.post('/:user/:gallery/unpublish', function(req, res) {\n    var user = req.params.user.toLowerCase();\n    console.log('Got unpublish request for user ' + req.params.user + ' and gallery ' + req.params.gallery);\n    if(req.session.user==user) {\n        var gallery = req.params.gallery.toLowerCase();\n        db.open(function(err, db) {\n    \t\tdb.collection('users_public', function(err, collection) {\n    \t\t\tcollection.findOne({\n    \t\t\t\t\"user\": user\n    \t\t\t}, function(err, document) {\n    \t\t\t\tvar gals = document.galleries;\n    \t\t\t\tfor (var i in gals) {\n    \t\t\t\t\tif (i == gallery) delete gals[i];\n    \t\t\t\t}\n    \t\t\t\tdocument.galleries = gals;\n    \t\t\t\tcollection.update({\n    \t\t\t\t\t\"user\": user\n    \t\t\t\t}, document, {\n    \t\t\t\t\tupsert: true,\n    \t\t\t\t\tsafe: true\n    \t\t\t\t}, function(err, document) {\n    \t\t\t\t\tdb.close();\n    \t\t\t\t});\n    \t\t\t\tres.send(200, {success:true});\n    \t\t\t});\n    \t\t});\n    \t});\n    } else {\n        res.send(400, 'Sorry, but you do not have access to manage these galleries.');\n    }\n});\n\n//app.get('/:user/:gallery/photos/new', function(req, res) {\n//    console.log('got new photo get');\n//\tres.send('<form method=\"post\" enctype=\"multipart/form-data\">' + '<p>Image: <input type=\"file\" name=\"image\" multiple/></p>' + '<p><input type=\"submit\" value=\"Upload\" /></p>' + '</form>');\n//});\n\nfunction processUpload(req, res) {\n    \n    function saveToDb() {\n        db.open(function(err, db) {\n            db.collection('users', function(err, collection) {\n                collection.findOne({\n                    \"user\": req.params.user\n                }, function(err, document) {\n                    var gal = document.galleries[req.params.gallery];\n                    var p = 0;\n                    for (var i in gal) p += 1;\n                    gal[p] = new Object();\n                    gal[p].source = config.storage.url + req.files.image.path.split('/').pop() + '.jpg';;\n                    gal[p].top = Math.floor(Math.random() * 701);\n                    gal[p].left = Math.floor(Math.random() * 901);\n                    gal[p].link = '';\n                    im.identify(req.files.image.path, function(err, features) {\n                        var ratio = features.width / features.height;\n                        gal[p].width = Math.round(Math.random() * 100) + 150;\n                        gal[p].height = Math.round(gal[p].width / ratio);\n                        document.galleries[req.params.gallery] = gal;\n                        collection.update({\n                            \"user\": req.params.user\n                        }, document, {\n                            upsert: true,\n                            safe: true\n                        }, function(err, document) {\n                            db.close();\n                            res.redirect('back');\n                        });\n                    });\n                });\n            });\n        });\n    }\n    // For tracking the parallel events\n    var parallel = 0;\n    \n    parallel += 1;\n    var mop = req.files.image.path.split('.')[0] + '-medium.jpg';\n    im.convert([req.files.image.path, '-quality', '85', '-resize', '900x900\\>', mop], function(err) {\n    \tif (err) throw err;\n        fs.readFile(mop, function (err, imageData) {\n            if (err) throw err;\n            request.post({\n                    headers: {'Content-Type': 'image/jpeg'},\n                    url: config.storage.url + mop.split('/').pop(),\n                    body: imageData\n                }, function(error, response, body) {\n                    parallel -= 1;\n                    if(parallel===0) saveToDb();\n            });\n        });\n\t});\n    \n    parallel += 1;\n    var sop = req.files.image.path.split('.')[0] + '-small.jpg';\n    im.convert([req.files.image.path, '-quality', '80', '-resize', '400x400\\>', sop], function(err) {\n        if (err) throw err;\n        fs.readFile(sop, function (err, imageData) {\n            if (err) throw err;\n            request.post({\n                    headers: {'Content-Type': 'image/jpeg'},\n                    url: config.storage.url + sop.split('/').pop(),\n                    body: imageData\n                }, function(error, response, body) {\n                    parallel -= 1;\n                    if(parallel===0) saveToDb();\n            });\n        });\n\t});\n    \n    parallel += 1;\n    var lop = req.files.image.path.split('.')[0] + '-large.jpg';\n\tim.convert([req.files.image.path, '-quality', '85', '-resize', '1600x1600\\>', lop], function(err) {\n\t\tif (err) throw err;\n        fs.readFile(lop, function (err, imageData) {\n            if (err) throw err;\n            request.post({\n                    headers: {'Content-Type': 'image/jpeg'},\n                    url: config.storage.url + lop.split('/').pop(),\n                    body: imageData\n                }, function(error, response, body) {\n                    parallel -= 1;\n                    if(parallel===0) saveToDb();\n            });\n        });\n\t});\n}\n\nfunction processUploads(req, res, k) {\n    // For tracking the parallel tasks\n    var parallel = 0;\n        \n    function saveToDb() {\n        db.open(function(err, db) {\n            db.collection('users', function(err, collection) {\n                collection.findOne({\n                    \"user\": req.params.user\n                }, function(err, document) {\n                    var gal = document.galleries[req.params.gallery];\n                    var p = 0;\n                    for (var i in gal) p += 1;\n                    gal[p] = new Object();\n                    gal[p].source = config.storage.url + req.files.image[k].path.split('/').pop() + '.jpg';\n                    gal[p].top = Math.floor(Math.random() * 701);\n                    gal[p].left = Math.floor(Math.random() * 901);\n                    gal[p].link = '';\n                    im.identify(req.files.image[k].path, function(err, features) {\n                        var ratio = features.width / features.height;\n                        gal[p].width = Math.round(Math.random() * 100) + 150;\n                        gal[p].height = Math.round(gal[p].width / ratio);\n                        document.galleries[req.params.gallery] = gal;\n                        collection.update({\n                            \"user\": req.params.user\n                        }, document, {\n                            upsert: true,\n                            safe: true\n                        }, function(err, document) {\n                            db.close();\n                            k += 1;\n                            processUploads(req, res, k);\n                        });\n                    });\n                });\n            });\n        });\n    }\n    \n\tif (req.files.image[k]) {\n        \n        parallel += 1;\n        var mop = req.files.image[k].path.split('.')[0] + '-medium.jpg';\n\t\tim.convert([req.files.image[k].path, '-quality', '85', '-resize', '900x900\\>', mop], function(err) {\n\t\t\tif (err) throw err;\n            fs.readFile(mop, function (err, imageData) {\n                if (err) throw err;\n                request.post({\n                        headers: {'Content-Type': 'image/jpeg'},\n                        url: config.storage.url + mop.split('/').pop(),\n                        body: imageData\n                    }, function(error, response, body) {\n                        parallel -= 1;\n                        if(parallel===0) saveToDb();\n                });\n            });\n\t\t});\n\t\n        parallel += 1;\n        var sop = req.files.image[k].path.split('.')[0] + '-small.jpg';\n\t\tim.convert([req.files.image[k].path, '-quality', '80', '-resize', '400x400\\>', sop], function(err) {\n\t\t\tif (err) throw err;\n            fs.readFile(sop, function (err, imageData) {\n                if (err) throw err;\n                request.post({\n                        headers: {'Content-Type': 'image/jpeg'},\n                        url: config.storage.url + sop.split('/').pop(),\n                        body: imageData\n                    }, function(error, response, body) {\n                        parallel -= 1;\n                        if(parallel===0) saveToDb();\n                });\n            });\n\t\t});\n        \n        parallel += 1;\n        var lop = req.files.image[k].path.split('.')[0] + '-large.jpg';\n\t\tim.convert([req.files.image[k].path, '-quality', '85', '-resize', '1600x1600\\>', lop], function(err) {\n\t\t\tif (err) throw err;\n            fs.readFile(lop, function (err, imageData) {\n                if (err) throw err;\n                request.post({\n                        headers: {'Content-Type': 'image/jpeg'},\n                        url: config.storage.url + lop.split('/').pop(),\n                        body: imageData\n                    }, function(error, response, body) {\n                        parallel -= 1;\n                        if(parallel===0) saveToDb();\n                });\n            });\n\t\t});\n\t}\n\telse {\n\t\tif(parallel===0) res.redirect('back');\n\t}\n}\n\napp.post('/:user/:gallery/photos/new', function(req, res, next) {\n    console.log('Got new photo post');\n    if(req.session.user==req.params.user) {\n    \tif (req.files.image.path) processUpload(req, res);\n    \telse {\n    \t\tprocessUploads(req, res, 0);\n    \t}\n    } else {\n        res.send(400, 'Sorry, but you do not have permission to upload files to this gallery.');\n    }\n});\n\napp.post('/:user/:gallery/photos/drawn/uploadDrawnImage', function(req, res) {\n    console.log('Got uploaded drawn image');\n    if(req.session.user==req.params.user) {\n        var data = req.body.f1.replace(/^data:image\\/\\w+;base64,/, \"\");\n    \tvar buf = new Buffer(data, 'base64');\n        var path = __dirname + '/images/' + Math.round(Math.random()*100000) + '.png';\n        var mop = path.split('.')[0] + '-medium.png';\n    \tfs.writeFile(path, buf, function() {\n            im.convert([path, '-quality', '85', '-resize', '900x900\\>', mop], function(err) {\n                if (err) throw err;\n                fs.readFile(mop, function (err, imageData) {\n                    if (err) throw err;\n                    request.post({\n                            headers: {'Content-Type': 'image/png'},\n                            url: config.storage.url + mop.split('/').pop(),\n                            body: imageData\n                        }, function(error, response, body) {\n                            \n                    });\n                });\n            });\n            \n            var lop = path.split('.')[0] + '-large.png';\n            im.convert([path, '-quality', '85', '-resize', '1600x1600\\>', lop], function(err) {\n                if (err) throw err;\n                fs.readFile(lop, function (err, imageData) {\n                    if (err) throw err;\n                    request.post({\n                            headers: {'Content-Type': 'image/png'},\n                            url: config.storage.url + lop.split('/').pop(),\n                            body: imageData\n                        }, function(error, response, body) {\n                            \n                    });\n                });\n        \t});\n            \n            var sop = path.split('.')[0] + '-small.png';\n        \tim.convert([path, '-quality', '80', '-resize', '400x400\\>', sop], function(err) {\n        \t\tif (err) throw err;\n                fs.readFile(sop, function (err, imageData) {\n                    if (err) throw err;\n                    request.post({\n                            headers: {'Content-Type': 'image/png'},\n                            url: config.storage.url + sop.split('/').pop(),\n                            body: imageData\n                        }, function(error, response, body) {\n                        \tdb.open(function(err, db) {\n                    \t\t\tdb.collection('users', function(err, collection) {\n                    \t\t\t\tcollection.findOne({\n                    \t\t\t\t\t\"user\": req.params.user\n                    \t\t\t\t}, function(err, document) {\n                    \t\t\t\t\tvar gal = document.galleries[req.params.gallery];\n                    \t\t\t\t\tvar p = 0;\n                    \t\t\t\t\tfor (var i in gal) p += 1;\n                    \t\t\t\t\tgal[p] = new Object();\n                    \t\t\t\t\tgal[p].source = config.storage.url + path.split('/').pop();\n                    \t\t\t\t\tgal[p].top = Math.floor(Math.random() * 701);\n                    \t\t\t\t\tgal[p].left = Math.floor(Math.random() * 901);\n                    \t\t\t\t\tgal[p].link = '';\n                    \t\t\t\t\tim.identify(path, function(err, features) {\n                    \t\t\t\t\t\tvar ratio = features.width / features.height;\n                    \t\t\t\t\t\tgal[p].width = Math.round(Math.random() * 100) + 150;\n                    \t\t\t\t\t\tgal[p].height = Math.round(gal[p].width / ratio);\n                    \t\t\t\t\t\tdocument.galleries[req.params.gallery] = gal;\n                    \t\t\t\t\t\tcollection.update({\n                    \t\t\t\t\t\t\t\"user\": req.params.user\n                    \t\t\t\t\t\t}, document, {\n                    \t\t\t\t\t\t\tupsert: true,\n                    \t\t\t\t\t\t\tsafe: true\n                    \t\t\t\t\t\t}, function(err, document) {\n                    \t\t\t\t\t\t\tdb.close();\n                    \t\t\t\t\t\t\tres.redirect('back');\n                    \t\t\t\t\t\t});\n                    \t\t\t\t\t});\n                    \t\t\t\t});\n                    \t\t\t});\n                    \t\t});\n                    });\n                });\n        \t});\n        });\n    } else {\n        res.send(400, 'Sorry, but you do not have access to upload photos to this gallery.');\n    }\n});\n\napp.post('/:user/:gallery/uploadBackground', function(req, res, next) {\n    console.log('got new background');\n    if(req.session.user==req.params.user) {\n    \tvar data = req.body.f1.replace(/^data:image\\/\\w+;base64,/, \"\");\n    \tvar buf = new Buffer(data, 'base64');\n        var p = __dirname + '/images/' + req.params.user + '-' + req.params.gallery + '-bg.png';\n    \tfs.writeFile(p, buf, null, function(err) {\n            res.send(200, {success:true});\n            fs.readFile(p, function (err, imageData) {\n                if (err) throw err;\n                request.post({\n                        headers: {'Content-Type': 'image/png'},\n                        url: config.storage.url + p.split('/').pop(),\n                        body: imageData\n                    }, function(error, response, body) {\n                        \n                });\n            });\n        });\n    } else {\n        res.send(400, 'Sorry, but you do not have access to upload photos to this gallery.');\n    }\n});\n\n//app.post('/:user/:gallery/photos/newlink', function(req, res, next) {\n//    console.log('got new link photo');\n//    if(req.session.user==req.params.user) {\n//        im.convert([req.files.image.path, '-quality', '85', '-resize', '900x900\\>', req.files.image.path.split('.')[0] + '-medium.jpg'], function(err) {\n//            if (err) throw err;\n//    \t});\n//        \n//        im.convert([req.files.image.path, '-quality', '85', '-resize', '1600x1600\\>', req.files.image.path.split('.')[0] + '-large.jpg'], function(err) {\n//            if (err) throw err;\n//    \t});\n//        \n//    \tim.convert([req.files.image.path, '-quality', '50', '-resize', '400x400\\>', req.files.image.path.split('.')[0] + '-small.jpg'], function(err) {\n//    \t\tif (err) throw err;\n//    \t\tdb.open(function(err, db) {\n//    \t\t\tdb.collection('users', function(err, collection) {\n//    \t\t\t\tcollection.findOne({\n//    \t\t\t\t\t\"user\": req.params.user\n//    \t\t\t\t}, function(err, document) {\n//    \t\t\t\t\tvar gal = document.galleries[req.params.gallery];\n//    \t\t\t\t\tvar p = 0;\n//    \t\t\t\t\tfor (var i in gal) p += 1;\n//    \t\t\t\t\tgal[p] = new Object();\n//    \t\t\t\t\tgal[p].source = '/images/' + req.files.image.path.split('/').pop()+'.jpg';;\n//    \t\t\t\t\tgal[p].top = Math.floor(Math.random() * 701);\n//    \t\t\t\t\tgal[p].left = Math.floor(Math.random() * 901);\n//    \t\t\t\t\tgal[p].link = req.body.link;\n//    \t\t\t\t\tim.identify(req.files.image.path, function(err, features) {\n//    \t\t\t\t\t\tvar ratio = features.width / features.height;\n//    \t\t\t\t\t\tgal[p].width = Math.round(Math.random() * 100) + 150;\n//    \t\t\t\t\t\tgal[p].height = Math.round(gal[p].width / ratio);\n//    \t\t\t\t\t\tdocument.galleries[req.params.gallery] = gal;\n//    \t\t\t\t\t\tcollection.update({\n//    \t\t\t\t\t\t\t\"user\": req.params.user\n//    \t\t\t\t\t\t}, document, {\n//    \t\t\t\t\t\t\tupsert: true,\n//    \t\t\t\t\t\t\tsafe: true\n//    \t\t\t\t\t\t}, function(err, document) {\n//    \t\t\t\t\t\t\tdb.close();\n//    \t\t\t\t\t\t\tres.redirect('back');\n//    \t\t\t\t\t\t});\n//    \t\t\t\t\t});\n//    \t\t\t\t});\n//    \t\t\t});\n//    \t\t});\n//    \t});\n//    } else {\n//        res.send('Sorry, but you do not have access to upload photos to this gallery.');\n//    }\n//});\n\napp.get('/home/users', function(req, res) {\n    db.open(function(err, db) {\n        db.collection('users_public', function(err, collection) {\n            var users = new Array();\n            collection.find().toArray(function(err, document) {\n                var j = 0;\n                var k = 0;\n                for (var i = 0; i < document.length; i++) {\n                    users[i] = document[i].user;\n                }\n                var loggedin = false;\n                if(req.session.user) loggedin = true;\n                res.render('users', {\n                    layout: false,\n                    data: {\n                        user: req.session.user,\n                        params: {'user':req.params.user},\n                        users: users,\n                        loggedin: loggedin\n                    }\n                });\n                db.close();\n            });\n        });\n    });\n});\n\napp.get('/:user', function(req, res) {\n    if (req.session.user == req.params.user.toLowerCase()) {\n        db.open(function(err, db) {\n            db.collection('users', function(err, collection) {\n                var users = new Array();\n                collection.find().toArray(function(err, document) {\n                    var j = -1;\n                \tfor (var i = 0; i < document.length; i++) {\n    \t\t\t\t\tusers[i] = document[i].user;\n                        if(document[i].user==req.params.user) j = i;\n    \t\t\t\t}\n                    var loggedin = false;\n                    if(req.session.user) loggedin = true;\n        \t\t\tif (document[j]) {\n        \t\t\t\tres.render('galleries', {\n        \t\t\t\t\tlayout: false,\n        \t\t\t\t\tdata: {\n                                user: req.session.user,\n            \t\t\t\t\tparams: {'user':req.params.user},\n                                galleries: document[j].galleries,\n                                loggedin: loggedin\n        \t\t\t\t\t}\n        \t\t\t\t});\n        \t\t\t} else res.send('User does not exist!');\n        \t\tdb.close();\n    \t\t\t});\n    \t\t});\n    \t});\n    } else {\n        db.open(function(err, db) {\n            db.collection('users_public', function(err, collection) {\n                var users = new Array();\n                collection.find().toArray(function(err, document) {\n                    var j = -1;\n            \t\tfor (var i = 0; i < document.length; i++) {\n    \t\t\t\t\tusers[i] = document[i].user;\n                        if(document[i].user==req.params.user) j = i;\n    \t\t\t\t}\n                    var loggedin = false;\n                    if(req.session.user) loggedin = true;\n        \t\t\tif (document[j]) {\n        \t\t\t\tres.render('galleries', {\n        \t\t\t\t\tlayout: false,\n        \t\t\t\t\tdata: {\n                                user: req.session.user,\n            \t\t\t\t\tparams: {'user':req.params.user},\n                                galleries: document[j].galleries,\n                                loggedin: loggedin\n        \t\t\t\t\t}\n        \t\t\t\t});\n        \t\t\t} else res.send('User does not exist!');\n        \t\tdb.close();\n    \t\t\t});\n    \t\t});\n    \t});\n    }\n});\n\n//app.get('/home/:user', function(req, res) {\n//    if ((req.session.user == 'home') || (req.session.user == req.params.user.toLowerCase())) {\n//        db.open(function(err, db) {\n//            db.collection('users', function(err, collection) {\n//                var users = new Array();\n//                collection.find().toArray(function(err, document) {\n//                    var j = 0;\n//                    var k = 0;\n//        \t\t\tfor (var i = 0; i < document.length; i++) {\n//    \t\t\t\t\tusers[i] = document[i].user;\n//                        if(document[i].user==req.params.user) j = i;\n//                        if((document[i].user=='home')) k = i;\n//    \t\t\t\t}\n//                    var u = req.params.user.toLowerCase();\n//                    var gallery = 'galleries';\n//                    if(req.params.user=='users') gallery = 'users';\n//                    if(req.params.user=='galleries') u = 'galleries';\n//        \t\t\tif (document[k].galleries[gallery]) {\n//                        if (req.session.user == 'home') {\n//            \t\t\t\tres.render('index', {\n//            \t\t\t\t\tlayout: false,\n//            \t\t\t\t\tdata: {\n//            \t\t\t\t\t\timages: document[k].galleries[gallery],\n//            \t\t\t\t\t\tparams: {'user':'home','gallery':gallery, 'u': u},\n//                                    galleries: document[j].galleries,\n//                                    users: users\n//            \t\t\t\t\t}\n//            \t\t\t\t});\n//                        } else {\n//                            res.render('public', {\n//                \t\t\t\tlayout: false,\n//            \t\t\t\t\tdata: {\n//            \t\t\t\t\t\timages: document[k].galleries[gallery],\n//            \t\t\t\t\t\tparams: {'user':'home','gallery':gallery, 'u': u},\n//                                    galleries: document[j].galleries,\n//                                    users: users\n//            \t\t\t\t\t}\n//            \t\t\t\t});\n//                        }\n//        \t\t\t} else res.send('User does not exist!');\n//        \t\tdb.close();\n//    \t\t\t});\n//    \t\t});\n//    \t});\n//    } else {\n//        db.open(function(err, db) {\n//            db.collection('users_public', function(err, collection) {\n//                var users = new Array();\n//                collection.find().toArray(function(err, document) {\n//                    var j = 0;\n//                    var k = 0;\n//            \t\tfor (var i = 0; i < document.length; i++) {\n//    \t\t\t\t\tusers[i] = document[i].user;\n//                        if(document[i].user==req.params.user) j = i;\n//                        if((document[i].user=='home')) k = i;\n//    \t\t\t\t}\n//                    var u = req.params.user.toLowerCase();\n//                    var gallery = 'galleries';\n//                    if(req.params.user=='users') gallery = 'users';\n//                    if(req.params.user=='galleries') u = 'galleries';\n//        \t\t\tif (document[k].galleries[gallery]) {\n//        \t\t\t\tres.render('public', {\n//        \t\t\t\t\tlayout: false,\n//        \t\t\t\t\tdata: {\n//        \t\t\t\t\t\timages: document[k].galleries[gallery],\n//            \t\t\t\t\tparams: {'user':'home','gallery':gallery, 'u': u},\n//                                galleries: document[j].galleries,\n//                                users: users\n//        \t\t\t\t\t}\n//        \t\t\t\t});\n//        \t\t\t}\n//        \t\telse res.send('User does not exist!');\n//        \t\tdb.close();\n//    \t\t\t});\n//    \t\t});\n//    \t});\n//    }\n//});\n\napp.get('/:user/:gallery', function(req, res) {\n    var user = req.params.user.toLowerCase();\n    var gallery = req.params.gallery.toLowerCase();\n    if (req.session.user == user) {\n        var loggedin = false;\n        if(req.session.user) loggedin = true;\n        db.open(function(err, db) {\n    \t\tdb.collection('users', function(err, collection) {\n    \t\t\tcollection.findOne({\n    \t\t\t\t\"user\": user\n    \t\t\t}, function(err, document) {\n    \t\t\t\tif (document) {\n    \t\t\t\t\tif (document.galleries[gallery]) {\n    \t\t\t\t\t\tres.render('index', {\n    \t\t\t\t\t\t\tlayout: false,\n    \t\t\t\t\t\t\tdata: {\n    \t\t\t\t\t\t\t\timages: document.galleries[gallery],\n                                    storage: config.storage.url,\n                                    user: req.session.user,\n    \t\t\t\t\t\t\t\tparams: req.params,\n                                    loggedin: loggedin\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t});\n    \t\t\t\t\t}\n    \t\t\t\t\telse res.send('Gallery does not exist!');\n    \t\t\t\t}\n    \t\t\t\telse res.send('User does not exist!');\n    \t\t\t\tdb.close();\n    \t\t\t});\n    \t\t});\n    \t});\n    } else {\n        db.open(function(err, db) {\n        \tdb.collection('users_public', function(err, collection) {\n    \t\t\tcollection.findOne({\n    \t\t\t\t\"user\": user\n    \t\t\t}, function(err, document) {\n    \t\t\t\tif (document) {\n    \t\t\t\t\tif (document.galleries[gallery]) {\n    \t\t\t\t\t\tres.render('public', {\n    \t\t\t\t\t\t\tlayout: false,\n    \t\t\t\t\t\t\tdata: {\n    \t\t\t\t\t\t\t\timages: document.galleries[gallery],\n                                    storage: config.storage.url,\n                                    user: req.session.user,\n    \t\t\t\t\t\t\t\tparams: req.params\n    \t\t\t\t\t\t\t}\n    \t\t\t\t\t\t});\n    \t\t\t\t\t}\n    \t\t\t\t\telse res.send('Gallery does not exist!');\n    \t\t\t\t}\n    \t\t\t\telse res.send('User does not exist!');\n    \t\t\t\tdb.close();\n    \t\t\t});\n    \t\t});\n    \t});\n    }\n});\n\napp.post('/:user/:gallery/upsert', function(req, res) {\n    console.log('Coords update');\n    var user = req.params.user.toLowerCase();\n    if(req.session.user==user) {\n    \tdb.open(function(err, db) {\n    \t\tdb.collection('users', function(err, collection) {\n    \t\t\tcollection.findOne({\n    \t\t\t\t\"user\": user\n    \t\t\t}, function(err, document) {\n    \t\t\t\tvar gal = document.galleries[req.params.gallery];\n    \t\t\t\tvar p = 0;\n    \t\t\t\tfor (var i in gal) {\n    \t\t\t\t\tif (gal[p].source.split('/').pop().replace('.jpg', '').replace('.png', '') == req.body.image.replace('.jpg', '').replace('.png', '')) {\n    \t\t\t\t\t\tbreak;\n    \t\t\t\t\t}\n    \t\t\t\t\telse {\n    \t\t\t\t\t\tp += 1;\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t\t//gal[p].source = '/images/' + req.body.image;\n    \t\t\t\tgal[p].top = req.body.top;\n    \t\t\t\tgal[p].left = req.body.side;\n    \t\t\t\tgal[p].width = req.body.width;\n    \t\t\t\tgal[p].height = req.body.height;\n    \t\t\t\tgal[p].z = req.body.z;\n    \t\t\t\tdocument.galleries[req.params.gallery] = gal;\n    \t\t\t\tcollection.update({\n    \t\t\t\t\t\"user\": user\n    \t\t\t\t}, document, {\n    \t\t\t\t\tupsert: true,\n    \t\t\t\t\tsafe: true\n    \t\t\t\t}, function(err, document) {\n    \t\t\t\t\tdb.close();\n    \t\t\t\t});\n    \t\t\t\tres.send(200, {success:true});\n    \t\t\t});\n    \t\t});\n    \t});\n    } else {\n        res.send(400, 'Sorry, but you do not have access to update coordinates for this gallery.');\n    }\n});\n\napp.post('/:user/:gallery/updateLink', function(req, res) {\n    console.log('Link update');\n    console.log(req.body.link);\n    var user = req.params.user.toLowerCase();\n    if((req.session.user==user) && (req.body.link!='null')) {\n        db.open(function(err, db) {\n    \t\tdb.collection('users', function(err, collection) {\n    \t\t\tcollection.findOne({\n    \t\t\t\t\"user\": user\n    \t\t\t}, function(err, document) {\n    \t\t\t\tvar gal = document.galleries[req.params.gallery];\n    \t\t\t\tvar p = 0;\n    \t\t\t\tfor (var i in gal) {\n    \t\t\t\t\tif (gal[p].source.split('/').pop() == req.body.file) {\n    \t\t\t\t\t\tbreak;\n    \t\t\t\t\t}\n    \t\t\t\t\telse {\n    \t\t\t\t\t\tp += 1;\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t\tgal[p].link = req.body.link;\n    \t\t\t\tdocument.galleries[req.params.gallery] = gal;\n    \t\t\t\tcollection.update({\n    \t\t\t\t\t\"user\": user\n    \t\t\t\t}, document, {\n    \t\t\t\t\tupsert: true,\n    \t\t\t\t\tsafe: true\n    \t\t\t\t}, function(err, document) {\n    \t\t\t\t\tdb.close();\n    \t\t\t\t});\n    \t\t\t\tres.redirect('back');\n    \t\t\t});\n    \t\t});\n    \t});\n    } else {\n        res.redirect('back');\n    }\n});\n\napp.post('/:user/:gallery/photos/delete', function(req, res) {\n    console.log('delete photo ' + req.body.file + ' by ' + req.params.user + ' from gallery ' + req.params.gallery);\n    var user = req.params.user.toLowerCase();\n    if(req.session.user==user) {\n    \tdb.open(function(err, db) {\n    \t\tdb.collection('users', function(err, collection) {\n    \t\t\tcollection.findOne({\n    \t\t\t\t\"user\": user\n    \t\t\t}, function(err, document) {\n    \t\t\t\tvar gal = document.galleries[req.params.gallery];\n    \t\t\t\tvar p = 0;\n    \t\t\t\tfor (var i in gal) {\n    \t\t\t\t\tif (gal[p].source.split('/').pop().replace('.jpg', '').replace('.png', '') == req.body.file.replace('.jpg', '').replace('.png', '')) {\n    \t\t\t\t\t\tbreak;\n    \t\t\t\t\t}\n    \t\t\t\t\telse {\n    \t\t\t\t\t\tp += 1;\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t\tvar pp = 0;\n    \t\t\t\twhile (true) {\n    \t\t\t\t\tif (pp >= p) {\n    \t\t\t\t\t\tif (gal[pp + 1]) {\n    \t\t\t\t\t\t\tgal[pp] = gal[pp + 1];\n    \t\t\t\t\t\t\tdelete gal[pp + 1];\n    \t\t\t\t\t\t\tpp += 1;\n    \t\t\t\t\t\t}\n    \t\t\t\t\t\telse {\n    \t\t\t\t\t\t\tif (pp == p) delete gal[pp];\n    \t\t\t\t\t\t\tbreak;\n    \t\t\t\t\t\t}\n    \t\t\t\t\t}\n    \t\t\t\t\telse {\n    \t\t\t\t\t\tpp += 1;\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t\tdocument.galleries[req.params.gallery] = gal;\n    \t\t\t\tcollection.update({\n    \t\t\t\t\t\"user\": user\n    \t\t\t\t}, document, {\n    \t\t\t\t\tupsert: true,\n    \t\t\t\t\tsafe: true\n    \t\t\t\t}, function(err, document) {\n    \t\t\t\t\tdb.close();\n    \t\t\t\t});\n    \t\t\t\tres.redirect('back');\n    \t\t\t});\n    \t\t});\n    \t});\n    } else {\n        res.send(400, 'Sorry, but you do not have access to delete photos from this gallery.');\n    }\n});\n\napp.get('/:user/:gallery/delete', function(req, res) {\n    var user = req.session.user.toLowerCase();\n    if(req.session.user==user) {\n        var gallery = req.params.gallery.toLowerCase();\n    \tdb.open(function(err, db) {\n    \t\tdb.collection('users', function(err, collection) {\n    \t\t\tcollection.findOne({\n    \t\t\t\t\"user\": user\n    \t\t\t}, function(err, document) {\n    \t\t\t\tvar gals = document.galleries;\n    \t\t\t\tfor (var i in gals) {\n    \t\t\t\t\tif (i == gallery) delete gals[i];\n    \t\t\t\t}\n    \t\t\t\tdocument.galleries = gals;\n    \t\t\t\tcollection.update({\n    \t\t\t\t\t\"user\": user\n    \t\t\t\t}, document, {\n    \t\t\t\t\tupsert: true,\n    \t\t\t\t\tsafe: true\n    \t\t\t\t}, function(err, document) {\n                    \tdb.collection('users_public', function(err, collection) {\n                    \t\tcollection.findOne({\n                    \t\t\t\"user\": user\n                    \t\t}, function(err, document) {\n                    \t\t\tvar gals = document.galleries;\n                    \t\t\tfor (var i in gals) {\n                    \t\t\t\tif (i == gallery) delete gals[i];\n                    \t\t\t}\n                    \t\t\tdocument.galleries = gals;\n                    \t\t\tcollection.update({\n                    \t\t\t\t\"user\": user\n                    \t\t\t}, document, {\n                    \t\t\t\tupsert: true,\n                    \t\t\t\tsafe: true\n                    \t\t\t}, function(err, document) {\n                    \t\t\t\tdb.close();\n                    \t\t\t});\n                    \t\t\tres.send(200, {success:true});\n                    \t\t});\n                    \t});\n    \t\t\t\t});\n    \t\t\t});\n    \t\t});\n    \t});\n    } else {\n        res.send(400, 'Sorry, but it looks like you are not logged in.');\n    }\n});\n\n//app.get('/:user/galleries/list', function(req, res) {\n//\tdb.open(function(err, db) {\n//\t\tdb.collection('users', function(err, collection) {\n//\t\t\tcollection.findOne({\n//\t\t\t\t\"user\": req.params.user\n//\t\t\t}, function(err, document) {\n//\t\t\t\tvar galleries = new Array();\n//\t\t\t\tvar c = 0;\n//\t\t\t\tfor (var i in document.galleries) {\n//\t\t\t\t\tgalleries[c] = '/' + req.params.user + '/' + i;\n//\t\t\t\t\tc += 1;\n//\t\t\t\t}\n//\t\t\t\tres.render('galleries', {\n//\t\t\t\t\tlayout: false,\n//\t\t\t\t\tdata: {\n//\t\t\t\t\t\t\"galleries\": galleries,\n//\t\t\t\t\t\t\"user\": req.params.user\n//\t\t\t\t\t}\n//\t\t\t\t});\n//\t\t\t\tdb.close();\n//\t\t\t});\n//\t\t});\n//\t});\n//});\n\napp.get('/users/list/account/delete/:user', function(req, res) {\n    console.log('delete user ' + req.params.user);\n    var user = req.params.user.toLowerCase();\n    if(req.session.user==user) {\n        db.open(function(err, db) {\n    \t\tdb.collection('users', function(err, collection) {\n    \t\t\tcollection.findOne({\n    \t\t\t\t\"user\": user\n    \t\t\t}, function(err, document) {\n    \t\t\t\tcollection.remove({\n        \t\t\t\t\"user\": user\n    \t\t\t\t}, function(err, document) {\n                    \tdb.collection('users_public', function(err, collection) {\n                \t\t\tcollection.findOne({\n                \t\t\t\t\"user\": user\n                \t\t\t}, function(err, document) {\n                \t\t\t\tcollection.remove({\n                    \t\t\t\t\"user\": user\n                \t\t\t\t}, function(err, document) {\n                                \tdb.close();\n                                    res.send(200, {success:true});\n                \t\t\t\t});\n                \t\t\t});\n                \t\t});\n    \t\t\t\t});\n    \t\t\t});\n    \t\t});\n    \t});\n    } else {\n        res.send(400, 'Sorry, but you do not have access to delete this user account.');\n    }\n});\n\napp.post('/:user/galleries/new', function(req, res) {\n    console.log('new gallery');\n    var gallery = req.body.gallery.toLowerCase();\n    if(req.session.user) {\n    \tdb.open(function(err, db) {\n    \t\tdb.collection('users', function(err, collection) {\n    \t\t\tcollection.findOne({\n    \t\t\t\t\"user\": req.session.user\n    \t\t\t}, function(err, document) {\n    \t\t\t\tif (!document.galleries[gallery]) {\n    \t\t\t\t\tvar data = 'iVBORw0KGgoAAAANSUhEUgAABp0AAAQfCAYAAADhpCFVAABAAElEQVR4AezZsQ0AIAwEMWCl7D8bSKxwrelJYX13e2bu8ggQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgEgRP++kqAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEDgC4hOhkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zovolSXwAAQABJREFUAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCQBUSnTOgAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6GQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECWUB0yoQOECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIiE42QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgkAVEp0zoAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAgOhkAwQIECBAgAABAgQIECBAgAABAgQIECBAgAABAllAdMqEDhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhONkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIJAFRKdM6AABAgQIECBAgAABAgQIECBAgAABAgQIECBAgIDoZAMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQJZQHTKhA4QIECAAAECBAgQIECAAAECBAgQIECAAAECBAiITjZAgAABAgQIECBAgACB154d0gAAADAM8+96IkZr4KA5GwECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAATKI1iAAAALxSURBVAIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AKi0yY0QIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgIDr5AAECBAgQIECAAAECBAgQIECAAAECBAgQIECAwBYQnTahAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAdHJBwgQIECAAAECBAgQIECAAAECBAgQIECAAAECBLaA6LQJDRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECIhOPkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQILAFRKdNaIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQEB08gECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEtIDptQgMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQKikw8QIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsAdFpExogQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAQnXyAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4hOm9AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQICA6OQDBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECW0B02oQGCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIERCcfIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQ2AIBO78J1qeCFMMAAAAASUVORK5CYII=';\n    \t\t\t\t\tvar buf = new Buffer(data, 'base64');\n                        var p = __dirname + '/images/' + req.params.user + '-' + gallery + '-bg.png';\n    \t\t\t\t\tfs.writeFile(p, buf, null, function(err) {\n                            fs.readFile(p, function (err, imageData) {\n                                if (err) throw err;\n                                request.post({\n                                        headers: {'Content-Type': 'image/png'},\n                                        url: config.storage.url + p.split('/').pop(),\n                                        body: imageData\n                                    }, function(error, response, body) {\t\n\t\t\t\t\t\n                                });\n                            });\n                        });\n    \t\t\t\t\tvar gal = new Object();\n    \t\t\t\t\tdocument.galleries[gallery] = gal;\n    \t\t\t\t\tcollection.update({\n    \t\t\t\t\t\t\"user\": req.session.user\n    \t\t\t\t\t}, document, {\n    \t\t\t\t\t\tupsert: true,\n    \t\t\t\t\t\tsafe: true\n    \t\t\t\t\t}, function(err, document) {\n    \t\t\t\t\t\tdb.close();\n    \t\t\t\t\t});\n    \t\t\t\t}\n    \t\t\t\tres.send(200, {success:true});\n    \t\t\t});\n    \t\t});\n    \t});\n    } else {\n        res.send(400, 'Sorry, but it appears you are not logged in.');\n    }\n});\n\napp.post('/users/list/new', function(req, res) {\n    console.log('New user ' + req.body.user);\n    var user = req.body.user.toLowerCase();\n\tdb.open(function(err, db) {\n\t\tdb.collection('users', function(err, collection) {\n\t\t\tcollection.findOne({\n\t\t\t\t\"user\": user\n\t\t\t}, function(err, document) {\n\t\t\t\tif (!document) {\n\t\t\t\t\tdocument = new Object();\n\t\t\t\t\tdocument.user = user;\n                    document.email = req.body.email;\n                    document.password = crypto.createHash('md5').update(req.body.password).digest(\"hex\");\n\t\t\t\t\tdocument.galleries = {};\n\t\t\t\t\tcollection.update({\n\t\t\t\t\t\t\"user\": user\n\t\t\t\t\t}, document, {\n\t\t\t\t\t\tupsert: true,\n\t\t\t\t\t\tsafe: true\n\t\t\t\t\t}, function(err, document) {\n                        db.collection('users_public', function(err, collection) {\n                    \t\tcollection.findOne({\n                \t\t\t\t\"user\": user\n                \t\t\t}, function(err, document) {\n                \t\t\t\tif (!document) {\n                \t\t\t\t\tdocument = new Object();\n                \t\t\t\t\tdocument.user = user;\n                                    document.email = req.body.email;\n                                    document.password = req.body.password;\n                \t\t\t\t\tdocument.galleries = {};\n                \t\t\t\t\tcollection.update({\n                \t\t\t\t\t\t\"user\": user\n                \t\t\t\t\t}, document, {\n                \t\t\t\t\t\tupsert: true,\n                \t\t\t\t\t\tsafe: true\n                \t\t\t\t\t}, function(err, document) {\n                                        req.session.user = user;\n                                        //req.session.password = req.body.password;\n                \t\t\t\t\t\tdb.close();\n                                        res.send(200, {success:true});\n                \t\t\t\t\t});\n                \t\t\t\t} else {\n                                    res.redirect(400, 'User already exists!');\n                \t\t\t\t}\n                \t\t\t});\n                \t\t});\n\t\t\t\t\t});\n\t\t\t\t} else {\n                    res.send(400, 'User already exists!');\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t});\n    //Send e-mail to admin\n    // create reusable transport method (opens pool of SMTP connections)\n    var smtpTransport = nodemailer.createTransport(\"SMTP\",{\n        service: \"Gmail\",\n        auth: {\n            user: config.email.username,\n            pass: config.email.password\n        }\n    });\n    // setup e-mail data with unicode symbols\n    var mailOptions = {\n        from: \"Photo Admin <kristsauders@gmail.com>\", // sender address\n        to: \"kristsauders@gmail.com\", // list of receivers\n        subject: \"New User Signed Up\", // Subject line\n        text: \"A new user named \" + user + \" signed up at photo.kristsauders.com with the email \" + req.body.email, // plaintext body\n    }\n    // send mail with defined transport object\n    smtpTransport.sendMail(mailOptions, function(error, response){\n        if(error){\n            console.log(error);\n        }else{\n            console.log(\"Message sent: \" + response.message);\n        }\n    \n        smtpTransport.close(); // shut down the connection pool, no more messages\n    });\n});\n\napp.post('/users/list/login', function(req, res) {\n    console.log('Login by ' + req.body.user);\n    var user = req.body.user.toLowerCase();\n    if(user.length>0) {\n        db.open(function(err, db) {\n    \t\tdb.collection('users', function(err, collection) {\n    \t\t\tcollection.findOne({\n    \t\t\t\t\"user\": user\n    \t\t\t}, function(err, document) {\n    \t\t\t\tif(document.password == crypto.createHash('md5').update(req.body.password).digest(\"hex\")) {\n                        req.session.user = user;\n                        //req.session.password = req.body.password;\n                        if(req.body.form) res.redirect('back');\n    \t                else res.send(200, {success:true});\n                        console.log('Correct Password');\n    \t\t\t\t} else {\n                        console.log('Wrong Password');\n                        if(req.body.form) res.redirect('back');\n                        else res.send(400, 'Wrong password!');\n    \t\t\t\t}\n    \t\t\t\tdb.close();\n    \t\t\t});\n    \t\t});\n    \t});\n    }\n});\n\napp.post('/users/list/password', function(req, res) {\n    console.log('Password change by ' + req.body.user);\n    var user = req.body.user.toLowerCase();\n    if(user.length>0) {\n        db.open(function(err, db) {\n        \tdb.collection('users', function(err, collection) {\n    \t\t\tcollection.findOne({\n    \t\t\t\t\"user\": user\n    \t\t\t}, function(err, document) {\n    \t\t\t\tif(document.password == crypto.createHash('md5').update(req.body.password).digest(\"hex\")) {\n                        document.password = crypto.createHash('md5').update(req.body.newPassword).digest(\"hex\");\n                        //req.session.password = req.body.password;\n                        collection.update({\n                        \t\t\"user\": user\n                    \t\t}, document, {\n                    \t\t\tupsert: true,\n                    \t\t\tsafe: true\n                    \t\t}, function(err, document) {\n                                req.session.user = user;\n                                res.send(200);\n                                //req.session.password = req.body.password;\n                    \t\t\tdb.close();\n                \t\t});\n    \t\t\t\t} else {\n                        console.log('Wrong Password');\n                        res.send(400, 'Wrong password!');\n    \t\t\t\t}\n    \t\t\t\t//db.close();\n    \t\t\t});\n    \t\t});\n    \t});\n    }\n});\n\napp.post('/users/list/logout', function(req, res) {\n    console.log('Logout by ' + req.session.user);\n    req.session.user = '';\n    req.session.password = '';\n    if(req.body.form) res.redirect('/');\n    else res.send(200, {success:true});\n});\n\napp.get('/', function(req, res) {\n    res.redirect('/home/users');\n});\n\n//app.get('/admin', function(req, res) {\n//\tdb.open(function(err, db) {\n//\t\tdb.collection('users', function(err, collection) {\n//\t\t\tcollection.find().toArray(function(err, document) {\n//\t\t\t\tvar users = new Array();\n//\t\t\t\tfor (var i = 0; i < document.length; i++) {\n//\t\t\t\t\tusers[i] = document[i].user;\n//\t\t\t\t}\n//\t\t\t\tres.render('users', {\n//\t\t\t\t\tlayout: false,\n//\t\t\t\t\tdata: users\n//\t\t\t\t});\n//\t\t\t\tdb.close();\n//\t\t\t});\n//\t\t});\n//\t});\n//});\n\napp.get('/fbauth', function(req, res) {\n    console.log('Got request');\n\tvar appId = \"151679494937877\";\n\tvar appSecret = \"1e919b67ac456f708d5827576e3dd2fa\";\n\tvar myUrl = \"http://code.kristsauders.com:8085/fbauth\";\n\n\tvar code = url.parse(req.url, true).query.code;\n\n\t\n\tif (!code) {\n\t\tvar dialogUrl = \"http://www.facebook.com/dialog/oauth?scope=user_photos&client_id=\" + appId + \"&redirect_uri=\" + encodeURIComponent(myUrl);\n        console.log('Redirecting to FBauth at ' + dialogUrl);\n        res.redirect(dialogUrl);\n\t\treturn;\n\t}\n\n    console.log('Got request with code ' + code);\n\trest.get(\"https://graph.facebook.com/oauth/access_token?client_id=\" + appId + \"&redirect_uri=\" + encodeURIComponent(myUrl) + \"&client_secret=\" + appSecret + \"&code=\" + code).on('complete', function(data) {\n\t\tconsole.log('Got response from Facebook: ' + data);\n        req.session.token = data;\n\t\tres.redirect('/fbphotos');\n\t});\n});\n\napp.get('/fbphotos', function(req, res) {\n\trest.get(\"https://graph.facebook.com/me?\" + req.session.token).on('complete', function(data) {\n        console.log(data[0]);\n        console.log('User name is ' + data[0].name + ' and user ID is ' + data[0].id);\n        rest.get(\"https://graph.facebook.com/\" + data.id + \"/albums?\" + req.session.token).on('complete', function(data) {\n            console.log(data);\n//\t\tvar b = \"\";\n//\t\tfor (var i in data) {\n//\t\t\tb += '<br/>' + data[i].name + ' ' + data[i].id + ' <img src=\"' + data[i]['cover_photo'] + '\"/>';\n//\t\t}\n            res.send(data);\n        });\n//\t\tres.render('index', {\n//            layout: false,\n//            data: photos\n//            });\n\t});\n});\n\napp.get('/fbtest', function(req, res) {\n    rest.get(\"https://graph.facebook.com/me?access_token=AAACJ86JqXRUBAPzXmsaCNiZBttPxVLOtbw9P5zTJDpHjzUgu7vMS9zHpvbVE4FFXAPBVsEXFnK4DSF6uYEZCBZCbaSTIgZA9GzPgs9DoqlEBWYE63UhE\").on('complete', function(data) {\n        var r = JSON.parse(data);\n        //console.log(r);\n        console.log('User name is ' + r.name + ' and user ID is ' + r.id);\n        rest.get(\"https://graph.facebook.com/\" + r.id + \"/albums?access_token=AAACJ86JqXRUBAPzXmsaCNiZBttPxVLOtbw9P5zTJDpHjzUgu7vMS9zHpvbVE4FFXAPBVsEXFnK4DSF6uYEZCBZCbaSTIgZA9GzPgs9DoqlEBWYE63UhE\").on('complete', function(data) {\n            var p = JSON.parse(data);\n            var b = \"\";\n            for (var i in p.data) {\n            \tb += '<br/>' + p.data[i].name + ' ' + p.data[i].id + ' <img src=\"https://graph.facebook.com/' + p.data[i].id + '/picture?type=small&access_token=AAACJ86JqXRUBAPzXmsaCNiZBttPxVLOtbw9P5zTJDpHjzUgu7vMS9zHpvbVE4FFXAPBVsEXFnK4DSF6uYEZCBZCbaSTIgZA9GzPgs9DoqlEBWYE63UhE\">';\n            }\n            res.send(b);\n        });\n\t});\n});\n\napp.get('/fbtest2', function(req, res) {\n    rest.get(\"https://graph.facebook.com/me?access_token=AAACJ86JqXRUBAPzXmsaCNiZBttPxVLOtbw9P5zTJDpHjzUgu7vMS9zHpvbVE4FFXAPBVsEXFnK4DSF6uYEZCBZCbaSTIgZA9GzPgs9DoqlEBWYE63UhE\").on('complete', function(data) {\n        var r = JSON.parse(data);\n        //console.log(r);\n        console.log('User name is ' + r.name + ' and user ID is ' + r.id);\n        rest.get(\"https://graph.facebook.com/\" + r.id + \"/albums?access_token=AAACJ86JqXRUBAPzXmsaCNiZBttPxVLOtbw9P5zTJDpHjzUgu7vMS9zHpvbVE4FFXAPBVsEXFnK4DSF6uYEZCBZCbaSTIgZA9GzPgs9DoqlEBWYE63UhE\").on('complete', function(data) {\n            var p = JSON.parse(data);\n            rest.get(\"https://graph.facebook.com/\" + p.data[0].id + \"/photos?access_token=AAACJ86JqXRUBAPzXmsaCNiZBttPxVLOtbw9P5zTJDpHjzUgu7vMS9zHpvbVE4FFXAPBVsEXFnK4DSF6uYEZCBZCbaSTIgZA9GzPgs9DoqlEBWYE63UhE\").on('complete', function(data) {\n                var k = JSON.parse(data);\n                var b = \"\";\n                for (var i in k.data) {\n                    console.log(k.data[i].images[0].source);\n                    b += '<br/><img src=\"' + k.data[i].images[0].source + '\">';\n                }\n                res.send(b);\n            });\n        });\n\t});\n});\n\napp.listen(config.app.prt);\nconsole.log('Started up successfully.');\n"]],"start1":0,"start2":0,"length1":0,"length2":91474}]],"length":91474}
{"contributors":[],"silentsave":false,"ts":1353959551032,"patch":[[{"diffs":[[0,"age.path.split('"],[-1,".')[0]"],[1,"/').pop()"],[0," + '-medium.jpg'"]],"start1":5793,"start2":5793,"length1":38,"length2":41},{"diffs":[[0,"age.path.split('"],[-1,".')[0]"],[1,"/').pop()"],[0," + '-small.jpg';"]],"start1":6460,"start2":6460,"length1":38,"length2":41},{"diffs":[[0,"age.path.split('"],[-1,".')[0]"],[1,"/').pop()"],[0," + '-large.jpg';"]],"start1":7129,"start2":7129,"length1":38,"length2":41},{"diffs":[[0,"[k].path.split('"],[-1,".')[0]"],[1,"/').pop()"],[0," + '-medium.jpg'"]],"start1":9554,"start2":9554,"length1":38,"length2":41},{"diffs":[[0,"[k].path.split('"],[-1,".')[0]"],[1,"/').pop()"],[0," + '-small.jpg';"]],"start1":10273,"start2":10273,"length1":38,"length2":41},{"diffs":[[0,"[k].path.split('"],[-1,".')[0]"],[1,"/').pop()"],[0," + '-large.jpg';"]],"start1":10998,"start2":10998,"length1":38,"length2":41}]],"length":91492,"saved":false}
{"contributors":[],"silentsave":false,"ts":1354842965608,"patch":[[{"diffs":[[0,"ngo.Db('"],[-1,"t"],[1,"af_T"],[0,"abletop"],[1,"-kristsauders"],[0,"', new m"]],"start1":444,"start2":444,"length1":24,"length2":40},{"diffs":[[0,"geMagick"],[1,", should be unnecessary"],[0,"\nim.iden"]],"start1":588,"start2":588,"length1":16,"length2":39},{"diffs":[[0,"eParser());\n"],[1,"//"],[0,"app.use(expr"]],"start1":718,"start2":718,"length1":24,"length2":26},{"diffs":[[0,"ssion({\n"],[1,"//"],[0,"\tsecret:"]],"start1":750,"start2":750,"length1":16,"length2":18},{"diffs":[[0,"arta!\",\n"],[1,"//"],[0,"    stor"]],"start1":778,"start2":778,"length1":16,"length2":18},{"diffs":[[0,"ongoStore({\n"],[1,"//"],[0,"      db: 't"]],"start1":804,"start2":804,"length1":24,"length2":26},{"diffs":[[0,"letop',\n"],[1,"//"],[0,"      au"]],"start1":832,"start2":832,"length1":16,"length2":18},{"diffs":[[0,"rue\n"],[1,"//"],[0,"    })\n"],[1,"//"],[0,"}));"]],"start1":865,"start2":865,"length1":15,"length2":19}]],"length":91545,"saved":false}
{"ts":1354843220460,"patch":[[{"diffs":[[0,"ser());\n"],[-1,"//"],[0,"app.use("]],"start1":722,"start2":722,"length1":18,"length2":16},{"diffs":[[0,"ssion({\n"],[-1,"//"],[0,"\tsecret:"]],"start1":748,"start2":748,"length1":18,"length2":16},{"diffs":[[0,"arta!\",\n"],[-1,"//"],[0,"    stor"]],"start1":774,"start2":774,"length1":18,"length2":16},{"diffs":[[0,"ongoStore({\n"],[-1,"//"],[0,"      db: 't"]],"start1":798,"start2":798,"length1":26,"length2":24},{"diffs":[[0,"b: '"],[-1,"tabletop',\n//"],[1,"af_Tabletop-kristsauders',\n      host: config.db.url,\n      port: config.db.prt,\n      username: 'af_Tabletop-kristsauders',\n      password: 'ajsuekibvhopn3kl56ir43jjp',\n"],[0,"    "]],"start1":817,"start2":817,"length1":21,"length2":178},{"diffs":[[0,"rue\n"],[-1,"//"],[0,"    })\n"],[-1,"//"],[0,"}));"]],"start1":1014,"start2":1014,"length1":19,"length2":15}]],"length":91690,"saved":false}
{"ts":1354843775034,"patch":[[{"diffs":[[0,"tion(err, db) {\n"],[1,"        db.authenticate('af_Tabletop-kristsauders', 'ajsuekibvhopn3kl56ir43jjp', function(err, result) {\n"],[0,"        db.colle"]],"start1":19610,"start2":19610,"length1":32,"length2":137},{"diffs":[[0,"        });\n"],[1,"        });\n"],[0,"    });\n});\n"]],"start1":20545,"start2":20545,"length1":24,"length2":36}]],"length":91807,"saved":false}
{"ts":1354844199468,"patch":[[{"diffs":[[0,");\n\n"],[-1,"app.get('/home/users', function(req, res) {\n   "],[1,"\nvar dbo ="],[0," db."]],"start1":19546,"start2":19546,"length1":55,"length2":18},{"diffs":[[0,", result) {\n"],[1,"            console.log('Opened connection and will keep open');\n        });\n    });\n\napp.get('/home/users', function(req, res) {\n"],[0,"        db.c"]],"start1":19682,"start2":19682,"length1":24,"length2":154},{"diffs":[[0,"es) {\n        db"],[1,"o"],[0,".collection('use"]],"start1":19818,"start2":19818,"length1":32,"length2":33},{"diffs":[[0,"    "],[-1,"            db.close();\n            });\n        });\n"],[0,"    "]],"start1":20595,"start2":20595,"length1":60,"length2":8}]],"length":91849,"saved":false}
{"ts":1354844291942,"patch":[[{"diffs":[[0,";\n\n\n"],[-1,"var dbo ="],[1,"   "],[0," db."]],"start1":19547,"start2":19547,"length1":17,"length2":11},{"diffs":[[0," fun"],[-1,"ction(req, res) {\n        dbo"],[0,".col"]],"start1":19796,"start2":19796,"length1":37,"length2":8},{"diffs":[[0,"users = new "],[-1,"Array();"],[0,"\n           "]],"start1":19872,"start2":19872,"length1":32,"length2":24},{"diffs":[[0,"se,\n"],[-1,"                    data: {\n"],[0,"    "]],"start1":20291,"start2":20291,"length1":36,"length2":8}]],"length":91778,"saved":false}
{"ts":1354844310132,"patch":[[{"diffs":[[0,"rs', fun"],[1,"ction(req, res) {\n        db"],[0,".collect"]],"start1":19792,"start2":19792,"length1":16,"length2":44},{"diffs":[[0,"s = new "],[1,"Array();"],[0,"\n       "]],"start1":19904,"start2":19904,"length1":16,"length2":24},{"diffs":[[0," layout: false,\n"],[1,"                    data: {\n"],[0,"                "]],"start1":20315,"start2":20315,"length1":32,"length2":60}]],"length":91842,"saved":false}
{"ts":1354844669077,"patch":[[{"diffs":[[0,");\n\n"],[-1,"\n    db.open(function(err, db) {\n        db.authenticate('af_Tabletop-kristsauders', 'ajsuekibvhopn3kl56ir43jjp"],[1,"app.get('/home/users"],[0,"', f"]],"start1":19546,"start2":19546,"length1":119,"length2":28},{"diffs":[[0,"ion("],[-1,"err"],[1,"req"],[0,", res"],[-1,"ult"],[0,") {\n    "],[-1,"        console.log('Opened connection and will keep open');\n        });\n    });\n\napp.get('/home/users', "],[1,"db.open("],[0,"func"]],"start1":19578,"start2":19578,"length1":132,"length2":32},{"diffs":[[0,"en(function("],[-1,"req, res"],[1,"err, db"],[0,") {\n        "]],"start1":19603,"start2":19603,"length1":32,"length2":31},{"diffs":[[0,"        });\n    "],[1,"            db.close();\n            });\n"],[0,"        });\n    "]],"start1":20384,"start2":20384,"length1":32,"length2":72}]],"length":91690,"saved":false}
{"ts":1354844919200,"patch":[[{"diffs":[[0,", {});\n\n"],[1,"\n    db.open(function(err, db) {\n        db.authenticate('af_Tabletop-kristsauders', 'ajsuekibvhopn3kl56ir43jjp', function(err, result) {\n        });\n    });\n\n"],[0,"//Config"]],"start1":557,"start2":557,"length1":16,"length2":175},{"diffs":[[0,"arta!\",\n"],[1,"//"],[0,"    stor"]],"start1":933,"start2":933,"length1":16,"length2":18},{"diffs":[[0,"ongoStore({\n"],[1,"//"],[0,"      db: 'a"]],"start1":959,"start2":959,"length1":24,"length2":26},{"diffs":[[0,"stsauders',\n"],[1,"//"],[0,"      host: "]],"start1":999,"start2":999,"length1":24,"length2":26},{"diffs":[[0,"fig.db.url,\n"],[1,"//"],[0,"      port: "]],"start1":1028,"start2":1028,"length1":24,"length2":26},{"diffs":[[0,"db.prt,\n"],[1,"//"],[0,"      us"]],"start1":1061,"start2":1061,"length1":16,"length2":18},{"diffs":[[0,"uders',\n"],[1,"//"],[0,"      pa"]],"start1":1107,"start2":1107,"length1":16,"length2":18},{"diffs":[[0,"43jjp',\n"],[1,"//"],[0,"      au"]],"start1":1154,"start2":1154,"length1":16,"length2":18},{"diffs":[[0,"nnect: true\n"],[1,"//"],[0,"    })\n}));\n"]],"start1":1179,"start2":1179,"length1":24,"length2":26}]],"length":91865,"saved":false}
{"ts":1354844975685,"patch":[[{"diffs":[[0,"req, res) {\n"],[1,"//"],[0,"    db.open("]],"start1":19757,"start2":19757,"length1":24,"length2":26},{"diffs":[[0,"            });\n"],[1,"//"],[0,"                "]],"start1":20557,"start2":20557,"length1":32,"length2":34},{"diffs":[[0,"});\n        });\n"],[1,"//"],[0,"    });\n});\n\napp"]],"start1":20615,"start2":20615,"length1":32,"length2":34}]],"length":91871,"saved":false}
{"ts":1354845005536,"patch":[[{"diffs":[[0,"req, res) {\n"],[1,"    console.log('home users list');\n"],[0,"//    db.ope"]],"start1":19757,"start2":19757,"length1":24,"length2":60}]],"length":91907,"saved":false}
{"ts":1354845193713,"patch":[[{"diffs":[[0,"ion(req, res) {\n"],[1,"    console.log('user gallery retrieve');\n"],[0,"    var user = r"]],"start1":26212,"start2":26212,"length1":32,"length2":74}]],"length":91949,"saved":false}
{"ts":1354845262730,"patch":[[{"diffs":[[0,"req, res) {\n"],[1,"    console.log('get user');\n"],[0,"    if (req."]],"start1":20709,"start2":20709,"length1":24,"length2":53}]],"length":91978,"saved":false}
{"ts":1354845314500,"patch":[[{"diffs":[[0,"get user"],[-1,"'"],[1,": ' + req.params.user"],[0,");\n    i"]],"start1":20738,"start2":20738,"length1":17,"length2":37}]],"length":91998,"saved":false}
{"ts":1354845366495,"patch":[[{"diffs":[[0,"\n//    });\n});\n\n"],[1,"app.get('/favicon.ico'), function(req, res) {\n    res.send(200);\n});\n\n"],[0,"app.get('/:user'"]],"start1":20666,"start2":20666,"length1":32,"length2":102}]],"length":92068,"saved":false}
{"ts":1354845388690,"patch":[[{"diffs":[[0,"con.ico'"],[-1,")"],[0,", functi"]],"start1":20696,"start2":20696,"length1":17,"length2":16}]],"length":92067,"saved":false}
{"ts":1354845417839,"patch":[[{"diffs":[[0,") {\n"],[-1,"    console.log('home users list');\n"],[0,"//  "]],"start1":19765,"start2":19765,"length1":44,"length2":8},{"diffs":[[0,") {\n"],[-1,"    console.log('get user: ' + req.params.user);\n"],[0,"    "]],"start1":20750,"start2":20750,"length1":57,"length2":8}]],"length":91982,"saved":false}
{"ts":1354845467180,"patch":[[{"diffs":[[0,", {});\n\n"],[-1,"\n    "],[0,"db.open("]],"start1":557,"start2":557,"length1":21,"length2":16},{"diffs":[[0,"(err, db) {\n"],[-1,"    "],[0,"    db.authe"]],"start1":581,"start2":581,"length1":28,"length2":24},{"diffs":[[0,"sult) {\n        "],[-1,"}"],[1,"console.log('Successfully opened database connection and authenticated.'"],[0,");\n    });\n\n//Co"]],"start1":686,"start2":686,"length1":33,"length2":104},{"diffs":[[0,"\n    });"],[1,"\n});"],[0,"\n\n//Conf"]],"start1":776,"start2":776,"length1":16,"length2":20}]],"length":92048,"saved":false}
{"ts":1354845473857,"patch":[[{"diffs":[[0,"arta!\",\n"],[-1,"//"],[0,"    stor"]],"start1":999,"start2":999,"length1":18,"length2":16},{"diffs":[[0,"ongoStore({\n"],[-1,"//"],[0,"      db: 'a"]],"start1":1023,"start2":1023,"length1":26,"length2":24},{"diffs":[[0,"stsauders',\n"],[-1,"//"],[0,"      host: "]],"start1":1061,"start2":1061,"length1":26,"length2":24},{"diffs":[[0,"db.url,\n"],[-1,"//"],[0,"      po"]],"start1":1092,"start2":1092,"length1":18,"length2":16},{"diffs":[[0,"db.prt,\n"],[-1,"//"],[0,"      us"]],"start1":1119,"start2":1119,"length1":18,"length2":16},{"diffs":[[0,"uders',\n"],[-1,"//"],[0,"      pa"]],"start1":1163,"start2":1163,"length1":18,"length2":16},{"diffs":[[0,"43jjp',\n"],[-1,"//"],[0,"      au"]],"start1":1208,"start2":1208,"length1":18,"length2":16},{"diffs":[[0,"nnect: true\n"],[-1,"//"],[0,"    })\n}));\n"]],"start1":1231,"start2":1231,"length1":26,"length2":24}]],"length":92032,"saved":false}
{"ts":1354845771774,"patch":[[{"diffs":[[0,"n.user==user) {\n"],[1,"//"],[0,"        db.open("]],"start1":1954,"start2":1954,"length1":32,"length2":34},{"diffs":[[0,"tion(err, db) {\n"],[-1,""],[0,"    \t\tdb.collect"]],"start1":1992,"start2":1992,"length1":32,"length2":32},{"diffs":[[0,"rr, document) {\n"],[1,"//"],[0,"                "]],"start1":2614,"start2":2614,"length1":32,"length2":34},{"diffs":[[0,"    db.close();\n"],[-1,""],[0,"                "]],"start1":2660,"start2":2660,"length1":32,"length2":32},{"diffs":[[0,"\t\t});\n    \t\t});\n"],[1,"//"],[0,"    \t});\n    } e"]],"start1":3069,"start2":3069,"length1":32,"length2":34},{"diffs":[[0,"\t});\n//    \t});\n"],[-1,""],[0,"    } else {\n   "]],"start1":3080,"start2":3080,"length1":32,"length2":32},{"diffs":[[0,"owerCase();\n"],[1,"//"],[0,"        db.o"]],"start1":3496,"start2":3496,"length1":24,"length2":26},{"diffs":[[0,"tion(err, db) {\n"],[-1,""],[0,"    \t\tdb.collect"]],"start1":3530,"start2":3530,"length1":32,"length2":32},{"diffs":[[0,"rr, document) {\n"],[1,"//"],[0,"    \t\t\t\t\tdb.clos"]],"start1":3989,"start2":3989,"length1":32,"length2":34},{"diffs":[[0,"\t\t\t\tdb.close();\n"],[-1,""],[0,"    \t\t\t\t});\n    "]],"start1":4012,"start2":4012,"length1":32,"length2":32},{"diffs":[[0,"\t\t});\n    \t\t});\n"],[1,"//"],[0,"    \t});\n    } e"]],"start1":4084,"start2":4084,"length1":32,"length2":34},{"diffs":[[0,"\t});\n//    \t});\n"],[-1,""],[0,"    } else {\n   "]],"start1":4095,"start2":4095,"length1":32,"length2":32},{"diffs":[[0,"on saveToDb() {\n"],[1,"//"],[0,"        db.open("]],"start1":4570,"start2":4570,"length1":32,"length2":34},{"diffs":[[0,"tion(err, db) {\n"],[-1,""],[0,"            db.c"]],"start1":4608,"start2":4608,"length1":32,"length2":32},{"diffs":[[0,"rr, document) {\n"],[1,"//"],[0,"                "]],"start1":5906,"start2":5906,"length1":32,"length2":34},{"diffs":[[0,"    db.close();\n"],[-1,""],[0,"                "]],"start1":5948,"start2":5948,"length1":32,"length2":32},{"diffs":[[0,"            });\n"],[1,"//"],[0,"        });\n    "]],"start1":6086,"start2":6086,"length1":32,"length2":34},{"diffs":[[0,";\n//        });\n"],[-1,""],[0,"    }\n    // For"]],"start1":6100,"start2":6100,"length1":32,"length2":32},{"diffs":[[0,"aveToDb() {\n"],[1,"//"],[0,"        db.o"]],"start1":8308,"start2":8308,"length1":24,"length2":26},{"diffs":[[0,"tion(err, db) {\n"],[-1,""],[0,"            db.c"]],"start1":8342,"start2":8342,"length1":32,"length2":32},{"diffs":[[0,"rr, document) {\n"],[1,"//"],[0,"                "]],"start1":9645,"start2":9645,"length1":32,"length2":34},{"diffs":[[0,"    db.close();\n"],[-1,""],[0,"                "]],"start1":9687,"start2":9687,"length1":32,"length2":32},{"diffs":[[0,"            });\n"],[1,"//"],[0,"        });\n    "]],"start1":9868,"start2":9868,"length1":32,"length2":34},{"diffs":[[0,";\n//        });\n"],[-1,""],[0,"    }\n    \n\tif ("]],"start1":9882,"start2":9882,"length1":32,"length2":32},{"diffs":[[0,"sponse, body) {\n"],[1,"//"],[0,"                "]],"start1":14848,"start2":14848,"length1":32,"length2":34},{"diffs":[[0,"tion(err, db) {\n"],[-1,""],[0,"                "]],"start1":14903,"start2":14903,"length1":32,"length2":32},{"diffs":[[0,"rr, document) {\n"],[1,"//"],[0,"                "]],"start1":16247,"start2":16247,"length1":32,"length2":34},{"diffs":[[0,"\t\t\t\tdb.close();\n"],[-1,""],[0,"                "]],"start1":16288,"start2":16288,"length1":32,"length2":32},{"diffs":[[0,"         \t\t\t});\n"],[1,"//"],[0,"                "]],"start1":16451,"start2":16451,"length1":32,"length2":34},{"diffs":[[0,"          \t\t});\n"],[-1,""],[0,"                "]],"start1":16479,"start2":16479,"length1":32,"length2":32},{"diffs":[[0,"erCase()) {\n"],[1,"//"],[0,"        db.o"]],"start1":20883,"start2":20883,"length1":24,"length2":26},{"diffs":[[0,"tion(err, db) {\n"],[-1,""],[0,"            db.c"]],"start1":20917,"start2":20917,"length1":32,"length2":32},{"diffs":[[0,"s not exist!');\n"],[1,"//"],[0,"        \t\tdb.clo"]],"start1":21823,"start2":21823,"length1":32,"length2":34},{"diffs":[[0,"  \t\tdb.close();\n"],[-1,""],[0,"    \t\t\t});\n    \t"]],"start1":21847,"start2":21847,"length1":32,"length2":32},{"diffs":[[0,"\t\t});\n    \t\t});\n"],[1,"//"],[0,"    \t});\n    } e"]],"start1":21868,"start2":21868,"length1":32,"length2":34},{"diffs":[[0,"\t});\n//    \t});\n"],[-1,""],[0,"    } else {\n   "]],"start1":21879,"start2":21879,"length1":32,"length2":32},{"diffs":[[0,");\n    } else {\n"],[1,"//"],[0,"        db.open("]],"start1":21892,"start2":21892,"length1":32,"length2":34},{"diffs":[[0,"tion(err, db) {\n"],[-1,""],[0,"            db.c"]],"start1":21930,"start2":21930,"length1":32,"length2":32},{"diffs":[[0,"t exist!');\n"],[1,"//"],[0,"        \t\tdb"]],"start1":22844,"start2":22844,"length1":24,"length2":26},{"diffs":[[0,"  \t\tdb.close();\n"],[-1,""],[0,"    \t\t\t});\n    \t"]],"start1":22864,"start2":22864,"length1":32,"length2":32},{"diffs":[[0,"\t\t});\n    \t\t});\n"],[1,"//"],[0,"    \t});\n    }\n}"]],"start1":22885,"start2":22885,"length1":32,"length2":34},{"diffs":[[0,"\t});\n//    \t});\n"],[-1,""],[0,"    }\n});\n\n//app"]],"start1":22896,"start2":22896,"length1":32,"length2":32},{"diffs":[[0,"oggedin = true;\n"],[1,"//"],[0,"        db.open("]],"start1":26589,"start2":26589,"length1":32,"length2":34},{"diffs":[[0,"tion(err, db) {\n"],[-1,""],[0,"    \t\tdb.collect"]],"start1":26627,"start2":26627,"length1":32,"length2":32},{"diffs":[[0,"s not exist!');\n"],[1,"//"],[0,"    \t\t\t\tdb.close"]],"start1":27321,"start2":27321,"length1":32,"length2":34},{"diffs":[[0,"\t\t\t\tdb.close();\n"],[-1,""],[0,"    \t\t\t});\n    \t"]],"start1":27343,"start2":27343,"length1":32,"length2":32},{"diffs":[[0,"\t\t});\n    \t\t});\n"],[1,"//"],[0,"    \t});\n    } e"]],"start1":27364,"start2":27364,"length1":32,"length2":34},{"diffs":[[0,"\t});\n//    \t});\n"],[-1,""],[0,"    } else {\n   "]],"start1":27375,"start2":27375,"length1":32,"length2":32},{"diffs":[[0,");\n    } else {\n"],[1,"//"],[0,"        db.open("]],"start1":27388,"start2":27388,"length1":32,"length2":34},{"diffs":[[0,"tion(err, db) {\n"],[-1,""],[0,"        \tdb.coll"]],"start1":27426,"start2":27426,"length1":32,"length2":32},{"diffs":[[0,"s not exist!');\n"],[1,"//"],[0,"    \t\t\t\tdb.close"]],"start1":28075,"start2":28075,"length1":32,"length2":34},{"diffs":[[0,"\t\t\t\tdb.close();\n"],[-1,""],[0,"    \t\t\t});\n    \t"]],"start1":28097,"start2":28097,"length1":32,"length2":32},{"diffs":[[0,"\t\t});\n    \t\t});\n"],[1,"//"],[0,"    \t});\n    }\n}"]],"start1":28118,"start2":28118,"length1":32,"length2":34},{"diffs":[[0,"\t});\n//    \t});\n"],[-1,""],[0,"    }\n});\n\napp.p"]],"start1":28129,"start2":28129,"length1":32,"length2":32},{"diffs":[[0,"n.user==user) {\n"],[1,"//"],[0,"    \tdb.open(fun"]],"start1":28309,"start2":28309,"length1":32,"length2":34},{"diffs":[[0,"tion(err, db) {\n"],[-1,""],[0,"    \t\tdb.collect"]],"start1":28344,"start2":28344,"length1":32,"length2":32},{"diffs":[[0,"rr, document) {\n"],[1,"//"],[0,"    \t\t\t\t\tdb.clos"]],"start1":29265,"start2":29265,"length1":32,"length2":34},{"diffs":[[0,"\t\t\t\tdb.close();\n"],[-1,""],[0,"    \t\t\t\t});\n    "]],"start1":29288,"start2":29288,"length1":32,"length2":32},{"diffs":[[0,"\t\t});\n    \t\t});\n"],[1,"//"],[0,"    \t});\n    } e"]],"start1":29360,"start2":29360,"length1":32,"length2":34},{"diffs":[[0,"\t});\n//    \t});\n"],[-1,""],[0,"    } else {\n   "]],"start1":29371,"start2":29371,"length1":32,"length2":32},{"diffs":[[0,"='null')) {\n"],[1,"//"],[0,"        db.o"]],"start1":29731,"start2":29731,"length1":24,"length2":26},{"diffs":[[0,"tion(err, db) {\n"],[-1,""],[0,"    \t\tdb.collect"]],"start1":29765,"start2":29765,"length1":32,"length2":32},{"diffs":[[0,"rr, document) {\n"],[1,"//"],[0,"    \t\t\t\t\tdb.clos"]],"start1":30404,"start2":30404,"length1":32,"length2":34},{"diffs":[[0,"\t\t\t\tdb.close();\n"],[-1,""],[0,"    \t\t\t\t});\n    "]],"start1":30427,"start2":30427,"length1":32,"length2":32},{"diffs":[[0,"\t\t});\n    \t\t});\n"],[1,"//"],[0,"    \t});\n    } e"]],"start1":30490,"start2":30490,"length1":32,"length2":34},{"diffs":[[0,"\t});\n//    \t});\n"],[-1,""],[0,"    } else {\n   "]],"start1":30501,"start2":30501,"length1":32,"length2":32},{"diffs":[[0,"n.user==user) {\n"],[1,"//"],[0,"    \tdb.open(fun"]],"start1":30814,"start2":30814,"length1":32,"length2":34},{"diffs":[[0,"tion(err, db) {\n"],[-1,""],[0,"    \t\tdb.collect"]],"start1":30849,"start2":30849,"length1":32,"length2":32},{"diffs":[[0,"rr, document) {\n"],[1,"//"],[0,"    \t\t\t\t\tdb.clos"]],"start1":31878,"start2":31878,"length1":32,"length2":34},{"diffs":[[0,"\t\t\t\tdb.close();\n"],[-1,""],[0,"    \t\t\t\t});\n    "]],"start1":31901,"start2":31901,"length1":32,"length2":32},{"diffs":[[0,"\t\t});\n    \t\t});\n"],[1,"//"],[0,"    \t});\n    } e"]],"start1":31964,"start2":31964,"length1":32,"length2":34},{"diffs":[[0,"\t});\n//    \t});\n"],[-1,""],[0,"    } else {\n   "]],"start1":31975,"start2":31975,"length1":32,"length2":32},{"diffs":[[0,"owerCase();\n"],[1,"//"],[0,"    \tdb.open"]],"start1":32290,"start2":32290,"length1":24,"length2":26},{"diffs":[[0,"tion(err, db) {\n"],[-1,""],[0,"    \t\tdb.collect"]],"start1":32321,"start2":32321,"length1":32,"length2":32},{"diffs":[[0,"rr, document) {\n"],[1,"//"],[0,"                "]],"start1":33457,"start2":33457,"length1":32,"length2":34},{"diffs":[[0,"\t\t\t\tdb.close();\n"],[-1,""],[0,"                "]],"start1":33495,"start2":33495,"length1":32,"length2":32},{"diffs":[[0,"\t\t});\n    \t\t});\n"],[1,"//"],[0,"    \t});\n    } e"]],"start1":33660,"start2":33660,"length1":32,"length2":34},{"diffs":[[0,"\t});\n//    \t});\n"],[-1,""],[0,"    } else {\n   "]],"start1":33671,"start2":33671,"length1":32,"length2":32},{"diffs":[[0,"n.user==user) {\n"],[1,"//"],[0,"        db.open("]],"start1":34569,"start2":34569,"length1":32,"length2":34},{"diffs":[[0,"tion(err, db) {\n"],[-1,""],[0,"    \t\tdb.collect"]],"start1":34607,"start2":34607,"length1":32,"length2":32},{"diffs":[[0,"rr, document) {\n"],[1,"//"],[0,"                "]],"start1":35165,"start2":35165,"length1":32,"length2":34},{"diffs":[[0,"   \tdb.close();\n"],[-1,""],[0,"                "]],"start1":35212,"start2":35212,"length1":32,"length2":32},{"diffs":[[0,"\t\t});\n    \t\t});\n"],[1,"//"],[0,"    \t});\n    } e"]],"start1":35381,"start2":35381,"length1":32,"length2":34},{"diffs":[[0,"\t});\n//    \t});\n"],[-1,""],[0,"    } else {\n   "]],"start1":35392,"start2":35392,"length1":32,"length2":32},{"diffs":[[0,"ion.user) {\n"],[1,"//"],[0,"    \tdb.open"]],"start1":35672,"start2":35672,"length1":24,"length2":26},{"diffs":[[0,"rr, document) {\n"],[1,"//"],[0,"    \t\t\t\t\t\tdb.clo"]],"start1":81746,"start2":81746,"length1":32,"length2":34},{"diffs":[[0,"\t\t\t\tdb.close();\n"],[-1,""],[0,"    \t\t\t\t\t});\n   "]],"start1":81770,"start2":81770,"length1":32,"length2":32},{"diffs":[[0,"\t\t});\n    \t\t});\n"],[1,"//"],[0,"    \t});\n    } e"]],"start1":81853,"start2":81853,"length1":32,"length2":34},{"diffs":[[0,"\t});\n//    \t});\n"],[-1,""],[0,"    } else {\n   "]],"start1":81864,"start2":81864,"length1":32,"length2":32},{"diffs":[[0,"Case();\n"],[1,"//"],[0,"\tdb.open"]],"start1":82106,"start2":82106,"length1":16,"length2":18},{"diffs":[[0,", db) {\n"],[-1,""],[0,"\t\tdb.col"]],"start1":82137,"start2":82137,"length1":16,"length2":16},{"diffs":[[0,".body.password;\n"],[1,"//"],[0,"                "]],"start1":83559,"start2":83559,"length1":32,"length2":34},{"diffs":[[0,"\t\t\t\tdb.close();\n"],[-1,""],[0,"                "]],"start1":83595,"start2":83595,"length1":32,"length2":32},{"diffs":[[0,"\t\t});\n\t\t});\n"],[1,"//"],[0,"\t});\n"],[-1,""],[0,"    //Send e"]],"start1":83970,"start2":83970,"length1":29,"length2":31},{"diffs":[[0,"ser.length>0) {\n"],[1,"//"],[0,"        db.open("]],"start1":85187,"start2":85187,"length1":32,"length2":34},{"diffs":[[0,"tion(err, db) {\n"],[-1,""],[0,"    \t\tdb.collect"]],"start1":85225,"start2":85225,"length1":32,"length2":32},{"diffs":[[0,"rr, document) {\n"],[1,"                    if(document) {\n    "],[0,"    \t\t\t\tif(docum"]],"start1":85367,"start2":85367,"length1":32,"length2":71},{"diffs":[[0,"                "],[1,"  "],[1,"  "],[0,"req.session.user"]],"start1":85530,"start2":85530,"length1":32,"length2":36},{"diffs":[[0,"on.user = user;\n"],[1,"    "],[0,"                "]],"start1":85559,"start2":85559,"length1":32,"length2":36},{"diffs":[[0,"                "],[1,"    "],[0,"if(req.body.form"]],"start1":85655,"start2":85655,"length1":32,"length2":36},{"diffs":[[0,"');\n    "],[1,"   "],[1," "],[0,"\t       "]],"start1":85711,"start2":85711,"length1":16,"length2":20},{"diffs":[[0,"                "],[1,"    "],[0,"console.log('Cor"]],"start1":85784,"start2":85784,"length1":32,"length2":36},{"diffs":[[0,"word');\n    "],[1,"  "],[1,"  "],[0,"\t\t\t\t} else {"]],"start1":85829,"start2":85829,"length1":24,"length2":28},{"diffs":[[0,"   \t\t\t\t} else {\n"],[1,"    "],[0,"                "]],"start1":85842,"start2":85842,"length1":32,"length2":36},{"diffs":[[0,"                "],[1," "],[1,"   "],[0,"if(req.body.form"]],"start1":85925,"start2":85925,"length1":32,"length2":36},{"diffs":[[0,"direct('back');\n"],[1,"    "],[0,"                "]],"start1":85969,"start2":85969,"length1":32,"length2":36},{"diffs":[[0,"ng password!');\n"],[1,"    "],[0,"    \t\t\t\t}\n    \t\t"]],"start1":86036,"start2":86036,"length1":32,"length2":36},{"diffs":[[0,";\n        \t\t\t\t}\n"],[1,"    //"],[0,"    \t\t\t\tdb.close"]],"start1":86050,"start2":86050,"length1":32,"length2":38},{"diffs":[[0,"\t\t\t\tdb.close();\n"],[1,"                    }\n"],[0,"    \t\t\t});\n    \t"]],"start1":86076,"start2":86076,"length1":32,"length2":54},{"diffs":[[0,"\t\t});\n    \t\t});\n"],[1,"//"],[0,"    \t});\n    }\n}"]],"start1":86119,"start2":86119,"length1":32,"length2":34},{"diffs":[[0,"\t});\n//    \t});\n"],[-1,""],[0,"    }\n});\n\napp.p"]],"start1":86130,"start2":86130,"length1":32,"length2":32},{"diffs":[[0,"length>0) {\n"],[1,"//"],[0,"        db.o"]],"start1":86323,"start2":86323,"length1":24,"length2":26},{"diffs":[[0,"tion(err, db) {\n"],[-1,""],[0,"        \tdb.coll"]],"start1":86357,"start2":86357,"length1":32,"length2":32},{"diffs":[[0,".body.password;\n"],[1,"//"],[0,"                "]],"start1":87205,"start2":87205,"length1":32,"length2":34},{"diffs":[[0," \t\t\tdb.close();\n"],[-1,""],[0,"                "]],"start1":87242,"start2":87242,"length1":32,"length2":32},{"diffs":[[0,";\n    \t\t});\n"],[1,"//"],[0,"    \t});\n   "]],"start1":87451,"start2":87451,"length1":24,"length2":26}]],"length":92245,"saved":false}
{"ts":1354845845661,"patch":[[{"diffs":[[0,"\t\t\t\tdb.close();\n"],[1,"                    } else {\n                        res.send(400, 'Wrong password, or incorrect user!');\n                    }\n"],[0,"                "]],"start1":86076,"start2":86076,"length1":32,"length2":160}]],"length":92373,"saved":false}
{"ts":1354845873508,"patch":[[{"diffs":[[0,"      }\n"],[-1,"                    }\n"],[0,"    \t\t\t}"]],"start1":86212,"start2":86212,"length1":38,"length2":16}]],"length":92351,"saved":false}
{"ts":1354845931958,"patch":[[{"diffs":[[0,"res."],[-1,"send(400, 'Wrong password, or incorrect user!"],[1,"redirect('back"],[0,"');\n"]],"start1":86145,"start2":86145,"length1":53,"length2":22}]],"length":92320,"saved":false}
{"contributors":[],"silentsave":false,"ts":1354917855795,"patch":[[{"diffs":[[0,"+ '/css'));\n"],[1,"//"],[0,"app.use('/im"]],"start1":1487,"start2":1487,"length1":24,"length2":26},{"diffs":[[0,"images'));\n\n"],[1,"// Serve images out of MongoDB\napp.get('/images/:name', function(req, res) {\n    db.collection('images', function(err, collection) {\n        collection.findOne({\n            \"name\": req.params.image\n        }, function(err, document) {\n            db.close();\n            res.send(\"data:image/jpg;base64,\" + document.image);\n        });\n    });\n});\n\n"],[0,"app.get('/:u"]],"start1":1549,"start2":1549,"length1":24,"length2":374}]],"length":92672,"saved":false}
{"ts":1354918402771,"patch":[[{"diffs":[[0,"            "],[-1,"db.close();\n"],[1,"if(document) {\n    "],[0,"            "]],"start1":1797,"start2":1797,"length1":36,"length2":43},{"diffs":[[0,"end("],[-1,"\"data:image/jpg;base64,\" + document.image);"],[1,"document.data);\n            } else {\n                res.send(404);\n            }"],[0,"\n   "]],"start1":1845,"start2":1845,"length1":51,"length2":89},{"diffs":[[0,"l = "],[-1,"0"],[1,"3"],[0,";\n"],[-1,"    \n    parallel += 1;"],[0,"\n   "]],"start1":6574,"start2":6574,"length1":34,"length2":11},{"diffs":[[0,"edium.jpg';\n"],[1,"//"],[0,"    im.conve"]],"start1":6639,"start2":6639,"length1":24,"length2":26},{"diffs":[[0,"tion(err) {\n"],[1,"//"],[0,"    \tif (err"]],"start1":6743,"start2":6743,"length1":24,"length2":26},{"diffs":[[0,"err) throw err;\n"],[1,"//"],[0,"        fs.readF"]],"start1":6766,"start2":6766,"length1":32,"length2":34},{"diffs":[[0,"r, imageData) {\n"],[1,"//"],[0,"            if ("]],"start1":6821,"start2":6821,"length1":32,"length2":34},{"diffs":[[0,"err) throw err;\n"],[1,"//"],[0,"            requ"]],"start1":6855,"start2":6855,"length1":32,"length2":34},{"diffs":[[0," request.post({\n"],[1,"//"],[0,"                "]],"start1":6884,"start2":6884,"length1":32,"length2":34},{"diffs":[[0," 'image/jpeg'},\n"],[1,"//"],[0,"                "]],"start1":6947,"start2":6947,"length1":32,"length2":34},{"diffs":[[0,"lit('/').pop(),\n"],[1,"//"],[0,"                "]],"start1":7017,"start2":7017,"length1":32,"length2":34},{"diffs":[[0,"body: imageData\n"],[1,"//"],[0,"                "]],"start1":7055,"start2":7055,"length1":32,"length2":34},{"diffs":[[0,"sponse, body) {\n"],[1,"//"],[0,"                "]],"start1":7110,"start2":7110,"length1":32,"length2":34},{"diffs":[[0," parallel -= 1;\n"],[1,"//"],[0,"                "]],"start1":7147,"start2":7147,"length1":32,"length2":34},{"diffs":[[0,"=0) saveToDb();\n"],[1,"//"],[0,"            });\n"]],"start1":7198,"start2":7198,"length1":32,"length2":34},{"diffs":[[0,"            });\n"],[1,"//"],[0,"        });\n\t});"]],"start1":7216,"start2":7216,"length1":32,"length2":34},{"diffs":[[0,"});\n"],[1,"//"],[0,"\t});\n"],[1,"\n"],[0,"    "],[-1,"\n    parallel += 1;"],[1,"im.convert([req.files.image.path, '-quality', '85', '-resize', '900x900\\>', mop], function(err) {\n        if (err) throw err;\n        fs.readFile(mop, function(err, imageData) {\n            if (err) throw err;\n            db.collection('images', function(err, collection) {\n                var b64 = new Buffer(imageData).toString('base64');\n                b64 = \"data:image/jpg;base64,\" + b64;\n                collection.update({\n                    \"name\": mop\n                }, {\n                    \"name\": mop,\n                    \"data\": b64\n                }, {\n                    upsert: true,\n                    safe: true\n                }, function(err, document) {\n                    parallel -= 1;\n                    if (parallel === 0) saveToDb();\n                });\n            });\n        });\n    });\n"],[0,"\n   "]],"start1":7242,"start2":7242,"length1":36,"length2":844},{"diffs":[[0,"});\n"],[-1,"    \n    parallel += 1;"],[0,"\n   "]],"start1":8724,"start2":8724,"length1":31,"length2":8}]],"length":93505,"saved":false}
{"ts":1354918927575,"patch":[[{"diffs":[[0,"gick');\n"],[-1,"    "],[1,"\nif(process.env.MONGOLAB_URI) {\n    var mu = process.env.MONGOLAB_URI;\n    config.db.url = mu.split(':')[2].split('@')[1];\n    config.db.prt = parseInt(mu.split(':')[3].split('/')[0]);\n    config.db.name = mu.split('/').pop();\n    config.db.username = mu.split(':')[1].replace('/', '').replace('/', '');\n    config.db.pwd = mu.split(':')[2].split('@')[0];\n}\n"],[0,"\nvar db "]],"start1":416,"start2":416,"length1":20,"length2":374}]],"length":93859,"saved":false}
{"ts":1354918979559,"patch":[[{"diffs":[[0,"OLAB_URI) {\n"],[1,"    console.log('Found MongoLab URI environment variable, using its settings.');\n"],[0,"    var mu ="]],"start1":444,"start2":444,"length1":24,"length2":105},{"diffs":[[0,".Db("],[-1,"'af_Tabletop-kristsauders'"],[1,"config.db.name"],[0,", ne"]],"start1":882,"start2":882,"length1":34,"length2":22},{"diffs":[[0,"ate("],[-1,"'af_Tabletop-kristsauders', 'ajsuekibvhopn3kl56ir43jjp'"],[1,"config.db.username, config.db.pwd"],[0,", fu"]],"start1":1032,"start2":1032,"length1":63,"length2":41}]],"length":93906,"saved":false}
{"ts":1354919174928,"patch":[[{"diffs":[[0,") {\n"],[-1,"    console.log('user gallery retrieve');\n"],[0,"    "]],"start1":27935,"start2":27935,"length1":50,"length2":8}]],"length":93864,"saved":false}
{"ts":1354919278521,"patch":[[{"diffs":[[0,"                "],[1,"// This is only when using Riak\n                    //"],[0,"gal[p].source = "]],"start1":5806,"start2":5806,"length1":32,"length2":86},{"diffs":[[0," '.jpg';"],[1,"\n                    gal[p].source = '/images' + req.files.image.path.split('/').pop() + '.jpg'"],[0,";\n      "]],"start1":5952,"start2":5952,"length1":16,"length2":111}]],"length":94013,"saved":false}
{"ts":1354919376564,"patch":[[{"diffs":[[0,"'/images"],[1,"/"],[0,"' + req."]],"start1":5997,"start2":5997,"length1":16,"length2":17}]],"length":94014,"saved":false}
{"ts":1354919468221,"patch":[[{"diffs":[[0,"function(err) {\n"],[1,"        console.log('saving ' + mop + ' to db');\n"],[0,"        if (err)"]],"start1":7891,"start2":7891,"length1":32,"length2":81},{"diffs":[[0,"     collection."],[-1,"update"],[1,"insert"],[0,"({\n             "]],"start1":8265,"start2":8265,"length1":38,"length2":38}]],"length":94063,"saved":false}
{"ts":1354919480141,"patch":[[{"diffs":[[0,"ion."],[-1,"insert"],[1,"update"],[0,"({\n "]],"start1":8277,"start2":8277,"length1":14,"length2":14}]],"length":94063,"saved":false}
{"ts":1354919558637,"patch":[[{"diffs":[[0,".params."],[-1,"imag"],[1,"nam"],[0,"e\n      "]],"start1":2147,"start2":2147,"length1":20,"length2":19},{"diffs":[[0," if(document) {\n"],[1,"                console.log('serving image ' + document.name);\n"],[0,"                "]],"start1":2208,"start2":2208,"length1":32,"length2":95}]],"length":94125,"saved":false}
{"ts":1354919711443,"patch":[[{"diffs":[[0,"    "],[-1,"res.send(document.data"],[1,"var im = new Buffer(document.data.replace(\"data:audio/x-wav;\",\"\"), 'base64');\n                res.send(im"],[0,");\n "]],"start1":2299,"start2":2299,"length1":30,"length2":113}]],"length":94208,"saved":false}
{"ts":1354919819610,"patch":[[{"diffs":[[0,"        res."],[-1,"s"],[1,"writeHead(200, {\n                  'Content-Type': 'image/jpg',\n                  'Content-Length': im.length\n                });\n                res."],[0,"end(im);\n   "]],"start1":2389,"start2":2389,"length1":25,"length2":174}]],"length":94357,"saved":false}
{"ts":1354919880880,"patch":[[{"diffs":[[0,"ata:"],[-1,"audio/x-wav;"],[1,"image/jpg;base64,"],[0,"\",\"\""]],"start1":2347,"start2":2347,"length1":20,"length2":25}]],"length":94362,"saved":false}
{"ts":1354919914998,"patch":[[{"diffs":[[0,"data"],[-1,".replace(\"data:image/jpg;base64,\",\"\")"],[0,", 'b"]],"start1":2332,"start2":2332,"length1":45,"length2":8}]],"length":94325,"saved":false}
{"ts":1354919932591,"patch":[[{"diffs":[[0,"64 ="],[-1," \"data:image/jpg;base64,\" +"],[0," b64"]],"start1":8479,"start2":8479,"length1":35,"length2":8}]],"length":94298,"saved":false}
{"ts":1354920210622,"patch":[[{"diffs":[[0,"    "],[-1,"console.log('saving ' + mop + ' to db');\n        "],[0,""],[1,""],[0,"if ("]],"start1":8173,"start2":8173,"length1":57,"length2":8},{"diffs":[[0,"small.jpg';\n"],[1,"//"],[0,"    im.conve"]],"start1":8925,"start2":8925,"length1":24,"length2":26},{"diffs":[[0,"function(err) {\n"],[1,"//"],[0,"        if (err)"]],"start1":9025,"start2":9025,"length1":32,"length2":34},{"diffs":[[0,"err) throw err;\n"],[1,"//"],[0,"        fs.readF"]],"start1":9055,"start2":9055,"length1":32,"length2":34},{"diffs":[[0,"r, imageData) {\n"],[1,"//"],[0,"            if ("]],"start1":9110,"start2":9110,"length1":32,"length2":34},{"diffs":[[0,"err) throw err;\n"],[1,"//"],[0,"            requ"]],"start1":9144,"start2":9144,"length1":32,"length2":34},{"diffs":[[0," request.post({\n"],[1,"//"],[0,"                "]],"start1":9173,"start2":9173,"length1":32,"length2":34},{"diffs":[[0," 'image/jpeg'},\n"],[1,"//"],[0,"                "]],"start1":9236,"start2":9236,"length1":32,"length2":34},{"diffs":[[0,"lit('/').pop(),\n"],[1,"//"],[0,"                "]],"start1":9306,"start2":9306,"length1":32,"length2":34},{"diffs":[[0,"body: imageData\n"],[1,"//"],[0,"                "]],"start1":9344,"start2":9344,"length1":32,"length2":34},{"diffs":[[0,"sponse, body) {\n"],[1,"//"],[0,"                "]],"start1":9399,"start2":9399,"length1":32,"length2":34},{"diffs":[[0," parallel -= 1;\n"],[1,"//"],[0,"                "]],"start1":9436,"start2":9436,"length1":32,"length2":34},{"diffs":[[0,"=0) saveToDb();\n"],[1,"//            });\n//        });\n//\t});\n\n    im.convert([req.files.image.path, '-quality', '80', '-resize', '400x400\\>', sop], function(err) {\n        if (err) throw err;\n        fs.readFile(sop, function(err, imageData) {\n            if (err) throw err;\n            db.collection('images', function(err, collection) {\n                var b64 = new Buffer(imageData).toString('base64');\n                b64 = b64;\n                collection.update({\n                    \"name\": sop\n                }, {\n                    \"name\": sop,\n                    \"data\": b64\n                }, {\n                    upsert: true,\n                    safe: true\n                }, function(err, document) {\n                    parallel -= 1;\n                    if (parallel === 0) saveToDb();\n                });\n"],[0,"            });\n"]],"start1":9487,"start2":9487,"length1":32,"length2":837},{"diffs":[[0,"        });\n"],[-1,"\t"],[1,"    "],[0,"});\n\n    var"]],"start1":10324,"start2":10324,"length1":25,"length2":28},{"diffs":[[0,"e.jpg';\n"],[1,"//"],[0,"\tim.conv"]],"start1":10405,"start2":10405,"length1":16,"length2":18},{"diffs":[[0,"(err) {\n"],[1,"//"],[0,"\t\tif (er"]],"start1":10508,"start2":10508,"length1":16,"length2":18},{"diffs":[[0,"err) throw err;\n"],[1,"//"],[0,"        fs.readF"]],"start1":10524,"start2":10524,"length1":32,"length2":34},{"diffs":[[0,"r, imageData) {\n"],[1,"//"],[0,"            if ("]],"start1":10579,"start2":10579,"length1":32,"length2":34},{"diffs":[[0,"err) throw err;\n"],[1,"//"],[0,"            requ"]],"start1":10613,"start2":10613,"length1":32,"length2":34},{"diffs":[[0," request.post({\n"],[1,"//"],[0,"                "]],"start1":10642,"start2":10642,"length1":32,"length2":34},{"diffs":[[0," 'image/jpeg'},\n"],[1,"//"],[0,"                "]],"start1":10705,"start2":10705,"length1":32,"length2":34},{"diffs":[[0,"lit('/').pop(),\n"],[1,"//"],[0,"                "]],"start1":10775,"start2":10775,"length1":32,"length2":34},{"diffs":[[0,"body: imageData\n"],[1,"//"],[0,"                "]],"start1":10813,"start2":10813,"length1":32,"length2":34},{"diffs":[[0,"sponse, body) {\n"],[1,"//"],[0,"                "]],"start1":10868,"start2":10868,"length1":32,"length2":34},{"diffs":[[0," parallel -= 1;\n"],[1,"//"],[0,"                "]],"start1":10905,"start2":10905,"length1":32,"length2":34},{"diffs":[[0,"=0) saveToDb();\n"],[1,"//            });\n//        });\n//\t});\n\n    im.convert([req.files.image.path, '-quality', '85', '-resize', '1600x1600\\>', lop], function(err) {\n        if (err) throw err;\n        fs.readFile(lop, function(err, imageData) {\n            if (err) throw err;\n            db.collection('images', function(err, collection) {\n                var b64 = new Buffer(imageData).toString('base64');\n                b64 = b64;\n                collection.update({\n                    \"name\": lop\n                }, {\n                    \"name\": lop,\n                    \"data\": b64\n                }, {\n                    upsert: true,\n                    safe: true\n                }, function(err, document) {\n                    parallel -= 1;\n                    if (parallel === 0) saveToDb();\n                });\n"],[0,"            });\n"]],"start1":10956,"start2":10956,"length1":32,"length2":839},{"diffs":[[0,"    });\n"],[-1,"\t});"],[1,"    });\n    "],[0,"\n}\n\nfunc"]],"start1":11799,"start2":11799,"length1":20,"length2":28},{"diffs":[[0,"allel = "],[-1,"0"],[1,"3"],[0,";\n      "]],"start1":11912,"start2":11912,"length1":17,"length2":17},{"diffs":[[0,"       \n"],[-1,"        parallel += 1;\n"],[0,"        "]],"start1":13575,"start2":13575,"length1":39,"length2":16},{"diffs":[[0,"edium.jpg';\n"],[1,"//"],[0,"\t\tim.convert"]],"start1":13647,"start2":13647,"length1":24,"length2":26},{"diffs":[[0,"function(err) {\n"],[1,"//"],[0,"\t\t\tif (err) thro"]],"start1":13748,"start2":13748,"length1":32,"length2":34},{"diffs":[[0,"err) throw err;\n"],[1,"//"],[0,"            fs.r"]],"start1":13773,"start2":13773,"length1":32,"length2":34},{"diffs":[[0,"r, imageData) {\n"],[1,"//"],[0,"                "]],"start1":13832,"start2":13832,"length1":32,"length2":34},{"diffs":[[0,"err) throw err;\n"],[1,"//"],[0,"                "]],"start1":13870,"start2":13870,"length1":32,"length2":34},{"diffs":[[0," request.post({\n"],[1,"//"],[0,"                "]],"start1":13903,"start2":13903,"length1":32,"length2":34},{"diffs":[[0," 'image/jpeg'},\n"],[1,"//"],[0,"                "]],"start1":13970,"start2":13970,"length1":32,"length2":34},{"diffs":[[0,"lit('/').pop(),\n"],[1,"//"],[0,"                "]],"start1":14044,"start2":14044,"length1":32,"length2":34},{"diffs":[[0,"body: imageData\n"],[1,"//"],[0,"                "]],"start1":14086,"start2":14086,"length1":32,"length2":34},{"diffs":[[0,"sponse, body) {\n"],[1,"//"],[0,"                "]],"start1":14145,"start2":14145,"length1":32,"length2":34},{"diffs":[[0," parallel -= 1;\n"],[1,"//"],[0,"                "]],"start1":14186,"start2":14186,"length1":32,"length2":34},{"diffs":[[0,"=0) saveToDb();\n"],[1,"//                });\n//            });\n//\t\t});\n\n        im.convert([req.files.image.path, '-quality', '85', '-resize', '900x900\\>', mop], function(err) {\n            if (err) throw err;\n            fs.readFile(mop, function(err, imageData) {\n                if (err) throw err;\n                db.collection('images', function(err, collection) {\n                    var b64 = new Buffer(imageData).toString('base64');\n                    b64 = b64;\n                    collection.update({\n                        \"name\": mop\n                    }, {\n                        \"name\": mop,\n                        \"data\": b64\n                    }, {\n                        upsert: true,\n                        safe: true\n                    }, function(err, document) {\n                        parallel -= 1;\n                        if (parallel === 0) saveToDb();\n                    });\n"],[0,"                "]],"start1":14241,"start2":14241,"length1":32,"length2":922},{"diffs":[[0,"});\n"],[-1,"\t\t});\n\t\n        parallel += 1;"],[1,"        });\n\t"],[0,"\n   "]],"start1":15179,"start2":15179,"length1":38,"length2":21},{"diffs":[[0,"small.jpg';\n"],[1,"//"],[0,"\t\tim.convert"]],"start1":15260,"start2":15260,"length1":24,"length2":26},{"diffs":[[0,"function(err) {\n"],[1,"//"],[0,"\t\t\tif (err) thro"]],"start1":15361,"start2":15361,"length1":32,"length2":34},{"diffs":[[0,"err) throw err;\n"],[1,"//"],[0,"            fs.r"]],"start1":15386,"start2":15386,"length1":32,"length2":34},{"diffs":[[0,"r, imageData) {\n"],[1,"//"],[0,"                "]],"start1":15445,"start2":15445,"length1":32,"length2":34},{"diffs":[[0,"err) throw err;\n"],[1,"//"],[0,"                "]],"start1":15483,"start2":15483,"length1":32,"length2":34},{"diffs":[[0," request.post({\n"],[1,"//"],[0,"                "]],"start1":15516,"start2":15516,"length1":32,"length2":34},{"diffs":[[0," 'image/jpeg'},\n"],[1,"//"],[0,"                "]],"start1":15583,"start2":15583,"length1":32,"length2":34},{"diffs":[[0,"lit('/').pop(),\n"],[1,"//"],[0,"                "]],"start1":15657,"start2":15657,"length1":32,"length2":34},{"diffs":[[0,"body: imageData\n"],[1,"//"],[0,"                "]],"start1":15699,"start2":15699,"length1":32,"length2":34},{"diffs":[[0,"sponse, body) {\n"],[1,"//"],[0,"                "]],"start1":15758,"start2":15758,"length1":32,"length2":34},{"diffs":[[0," parallel -= 1;\n"],[1,"//"],[0,"                "]],"start1":15799,"start2":15799,"length1":32,"length2":34},{"diffs":[[0,"=0) saveToDb();\n"],[1,"//"],[0,"                "]],"start1":15854,"start2":15854,"length1":32,"length2":34},{"diffs":[[0,"            });\n"],[1,"//"],[0,"            });\n"]],"start1":15876,"start2":15876,"length1":32,"length2":34},{"diffs":[[0,"});\n"],[1,"//"],[0,"\t\t});\n"],[1,"\n"],[0,"        "],[-1,"\n        parallel += 1;"],[1,"im.convert([req.files.image.path, '-quality', '80', '-resize', '400x400\\>', sop], function(err) {\n            if (err) throw err;\n            fs.readFile(sop, function(err, imageData) {\n                if (err) throw err;\n                db.collection('images', function(err, collection) {\n                    var b64 = new Buffer(imageData).toString('base64');\n                    b64 = b64;\n                    collection.update({\n                        \"name\": sop\n                    }, {\n                        \"name\": sop,\n                        \"data\": b64\n                    }, {\n                        upsert: true,\n                        safe: true\n                    }, function(err, document) {\n                        parallel -= 1;\n                        if (parallel === 0) saveToDb();\n                    });\n                });\n            });\n        });\n        "],[0,"\n   "]],"start1":15906,"start2":15906,"length1":45,"length2":914},{"diffs":[[0,"e.jpg';\n"],[1,"//"],[0,"\t\tim.con"]],"start1":16884,"start2":16884,"length1":16,"length2":18},{"diffs":[[0,"(err) {\n"],[1,"//"],[0,"\t\t\tif (e"]],"start1":16991,"start2":16991,"length1":16,"length2":18},{"diffs":[[0,"err) throw err;\n"],[1,"//"],[0,"            fs.r"]],"start1":17008,"start2":17008,"length1":32,"length2":34},{"diffs":[[0,"r, imageData) {\n"],[1,"//"],[0,"                "]],"start1":17067,"start2":17067,"length1":32,"length2":34},{"diffs":[[0,"err) throw err;\n"],[1,"//"],[0,"                "]],"start1":17105,"start2":17105,"length1":32,"length2":34},{"diffs":[[0," request.post({\n"],[1,"//"],[0,"                "]],"start1":17138,"start2":17138,"length1":32,"length2":34},{"diffs":[[0,"age/jpeg'},\n"],[1,"//"],[0,"            "]],"start1":17209,"start2":17209,"length1":24,"length2":26},{"diffs":[[0,"lit('/').pop(),\n"],[1,"//"],[0,"                "]],"start1":17279,"start2":17279,"length1":32,"length2":34},{"diffs":[[0,"body: imageData\n"],[1,"//"],[0,"                "]],"start1":17321,"start2":17321,"length1":32,"length2":34},{"diffs":[[0,"sponse, body) {\n"],[1,"//"],[0,"                "]],"start1":17380,"start2":17380,"length1":32,"length2":34},{"diffs":[[0," parallel -= 1;\n"],[1,"//"],[0,"                "]],"start1":17421,"start2":17421,"length1":32,"length2":34},{"diffs":[[0,"=0) saveToDb();\n"],[1,"//                });\n//            });\n//\t\t});\n\n        im.convert([req.files.image.path, '-quality', '85', '-resize', '1600x1600\\>', lop], function(err) {\n            if (err) throw err;\n            fs.readFile(lop, function(err, imageData) {\n                if (err) throw err;\n                db.collection('images', function(err, collection) {\n                    var b64 = new Buffer(imageData).toString('base64');\n                    b64 = b64;\n                    collection.update({\n                        \"name\": lop\n                    }, {\n                        \"name\": lop,\n                        \"data\": b64\n                    }, {\n                        upsert: true,\n                        safe: true\n                    }, function(err, document) {\n                        parallel -= 1;\n                        if (parallel === 0) saveToDb();\n                    });\n"],[0,"                "]],"start1":17476,"start2":17476,"length1":32,"length2":924},{"diffs":[[0,"    });\n"],[-1,"\t\t});"],[1,"        });\n    "],[0,"\n\t}\n\tels"]],"start1":18412,"start2":18412,"length1":21,"length2":32}]],"length":98608,"saved":false}
{"ts":1354920264200,"patch":[[{"diffs":[[0,"db: "],[-1,"'af_Tabletop-kristsauders'"],[1,"config.db.name"],[0,",\n  "]],"start1":1442,"start2":1442,"length1":34,"length2":22},{"diffs":[[0,"me: "],[-1,"'af_Tabletop-kristsauders',\n      password: 'ajsuekibvhopn3kl56ir43jjp'"],[1,"config.db.username,\n      password: config.db.pwd"],[0,",\n  "]],"start1":1528,"start2":1528,"length1":79,"length2":57}]],"length":98574,"saved":false}
{"ts":1354920519708,"patch":[[{"diffs":[[0,"success:true});\n"],[1,"//"],[0,"                "]],"start1":3749,"start2":3749,"length1":32,"length2":34},{"diffs":[[0," '-bg.png';\n"],[1,"//"],[0,"            "]],"start1":3851,"start2":3851,"length1":24,"length2":26},{"diffs":[[0,"ublic.png';\n"],[1,"//"],[0,"            "]],"start1":3956,"start2":3956,"length1":24,"length2":26},{"diffs":[[0,"t(pb));\n"],[1,"                                    db.collection('images', function(err, collection) {\n                                        collection.findOne({\n                                            \"name\": user + '-' + gallery + '-bg.png'\n                                        }, function(err, document) {\n                                            if(document) {\n                                                    collection.update({\n                                                        \"name\": user + '-' + gallery + '-bg-public.png'\n                                                    }, {\n                                                        \"name\": user + '-' + gallery + '-bg-public.png',\n                                                        \"data\": document.data\n                                                    }, {\n                                                        upsert: true,\n                                                        safe: true\n                                                    }, function(err, document) {\n                                                        parallel -= 1;\n                                                        if (parallel === 0) saveToDb();\n                                                    });\n                                            } else {\n                                                res.send(404);\n                                            }\n                                        });\n                                    });\n"],[0,"        "]],"start1":4034,"start2":4034,"length1":16,"length2":1530}]],"length":100094,"saved":false}
{"ts":1354920562951,"patch":[[{"diffs":[[0,"();\n"],[-1,"                                res.send(200, {success:true});\n"],[0,"//  "]],"start1":3698,"start2":3698,"length1":71,"length2":8},{"diffs":[[0,"    "],[-1,"parallel -= 1;\n                                                        if (parallel === 0) saveToDb("],[1,"res.send(200, {success:true}"],[0,");\n "]],"start1":5084,"start2":5084,"length1":108,"length2":36}]],"length":99959,"saved":false}
{"ts":1354920612722,"patch":[[{"diffs":[[0,"();\n    "],[-1,"\t\t\t\t});\n    \t\t\t\t"],[1,"                    "],[0,"res.send"]],"start1":6435,"start2":6435,"length1":32,"length2":36},{"diffs":[[0,"success:true});\n"],[1,"    \t\t\t\t});\n"],[0,"    \t\t\t});\n    \t"]],"start1":6478,"start2":6478,"length1":32,"length2":44}]],"length":99975,"saved":false}
{"ts":1354921211649,"patch":[[{"diffs":[[0,"err) throw err;\n"],[1,"//"],[0,"                "]],"start1":20923,"start2":20923,"length1":32,"length2":34},{"diffs":[[0," request.post({\n"],[1,"//"],[0,"                "]],"start1":20960,"start2":20960,"length1":32,"length2":34},{"diffs":[[0,": 'image/png'},\n"],[1,"//"],[0,"                "]],"start1":21030,"start2":21030,"length1":32,"length2":34},{"diffs":[[0,"lit('/').pop(),\n"],[1,"//"],[0,"                "]],"start1":21108,"start2":21108,"length1":32,"length2":34},{"diffs":[[0,"body: imageData\n"],[1,"//"],[0,"                "]],"start1":21154,"start2":21154,"length1":32,"length2":34},{"diffs":[[0,"sponse, body) {\n"],[1,"//                            \n//                    });\n                    db.collection('images', function(err, collection) {\n                        var b64 = new Buffer(imageData).toString('base64');\n                        b64 = b64;\n                        collection.update({\n                            \"name\": mop\n                        }, {\n                            \"name\": mop,\n                            \"data\": b64\n                        }, {\n                            upsert: true,\n                            safe: true\n                        }, function(err, document) {\n"],[0,"                "]],"start1":21217,"start2":21217,"length1":32,"length2":629},{"diffs":[[0,"               \n"],[1,"                        });\n"],[0,"                "]],"start1":21843,"start2":21843,"length1":32,"length2":60},{"diffs":[[0,"err) throw err;\n"],[1,"//"],[0,"                "]],"start1":22234,"start2":22234,"length1":32,"length2":34},{"diffs":[[0," request.post({\n"],[1,"//"],[0,"                "]],"start1":22271,"start2":22271,"length1":32,"length2":34},{"diffs":[[0,": 'image/png'},\n"],[1,"//"],[0,"                "]],"start1":22341,"start2":22341,"length1":32,"length2":34},{"diffs":[[0,"lit('/').pop(),\n"],[1,"//"],[0,"                "]],"start1":22419,"start2":22419,"length1":32,"length2":34},{"diffs":[[0,"body: imageData\n"],[1,"//"],[0,"                "]],"start1":22465,"start2":22465,"length1":32,"length2":34},{"diffs":[[0,"sponse, body) {\n"],[1,"//                            \n//                    });\n                    db.collection('images', function(err, collection) {\n                        var b64 = new Buffer(imageData).toString('base64');\n                        b64 = b64;\n                        collection.update({\n                            \"name\": lop\n                        }, {\n                            \"name\": lop,\n                            \"data\": b64\n                        }, {\n                            upsert: true,\n                            safe: true\n                        }, function(err, document) {\n"],[0,"                "]],"start1":22528,"start2":22528,"length1":32,"length2":629},{"diffs":[[0,"               \n"],[1,"                        });\n"],[0,"                "]],"start1":23154,"start2":23154,"length1":32,"length2":60},{"diffs":[[0,"err) throw err;\n"],[1,"//"],[0,"                "]],"start1":23531,"start2":23531,"length1":32,"length2":34},{"diffs":[[0," request.post({\n"],[1,"//"],[0,"                "]],"start1":23568,"start2":23568,"length1":32,"length2":34},{"diffs":[[0,": 'image/png'},\n"],[1,"//"],[0,"                "]],"start1":23638,"start2":23638,"length1":32,"length2":34},{"diffs":[[0,"lit('/').pop(),\n"],[1,"//"],[0,"                "]],"start1":23716,"start2":23716,"length1":32,"length2":34},{"diffs":[[0,"body: imageData\n"],[1,"//"],[0,"                "]],"start1":23762,"start2":23762,"length1":32,"length2":34},{"diffs":[[0,"sponse, body) {\n"],[1,"                    db.collection('images', function(err, collection) {\n                        var b64 = new Buffer(imageData).toString('base64');\n                        b64 = b64;\n                        collection.update({\n                            \"name\": sop\n                        }, {\n                            \"name\": sop,\n                            \"data\": b64\n                        }, {\n                            upsert: true,\n                            safe: true\n                        }, function(err, document) {\n"],[0,"//              "]],"start1":23825,"start2":23825,"length1":32,"length2":572},{"diffs":[[0,"= new Object();\n"],[1,"                                        // Only for Riak\n"],[0,"                "]],"start1":24852,"start2":24852,"length1":32,"length2":89},{"diffs":[[0,"           \t\t\t\t\t"],[1,"//"],[0,"gal[p].source = "]],"start1":24934,"start2":24934,"length1":32,"length2":34},{"diffs":[[0,"'/').pop();\n"],[1,"                                        gal[p].source = '/images/' + path.split('/').pop();\n"],[0,"            "]],"start1":25000,"start2":25000,"length1":24,"length2":116},{"diffs":[[0,"     \t\t\t});\n"],[1,"                                \n                            });\n                        });\n"],[0,"//          "]],"start1":26123,"start2":26123,"length1":24,"length2":117},{"diffs":[[0,"          \t\t});\n"],[1,"//"],[0,"                "]],"start1":26240,"start2":26240,"length1":32,"length2":34},{"diffs":[[0,"            });\n"],[-1,""],[0,"                "]],"start1":26266,"start2":26266,"length1":32,"length2":32},{"diffs":[[0,"err) throw err;\n"],[1,"//"],[0,"                "]],"start1":26975,"start2":26975,"length1":32,"length2":34},{"diffs":[[0," request.post({\n"],[1,"//"],[0,"                "]],"start1":27008,"start2":27008,"length1":32,"length2":34},{"diffs":[[0,": 'image/png'},\n"],[1,"//"],[0,"                "]],"start1":27074,"start2":27074,"length1":32,"length2":34},{"diffs":[[0,"lit('/').pop(),\n"],[1,"//"],[0,"                "]],"start1":27146,"start2":27146,"length1":32,"length2":34},{"diffs":[[0,"body: imageData\n"],[1,"//"],[0,"                "]],"start1":27188,"start2":27188,"length1":32,"length2":34},{"diffs":[[0,"sponse, body) {\n"],[1,"//"],[0,"                "]],"start1":27247,"start2":27247,"length1":32,"length2":34},{"diffs":[[0,"               \n"],[1,"//                });\n\n                    db.collection('images', function(err, collection) {\n                        var b64 = new Buffer(imageData).toString('base64');\n                        b64 = b64;\n                        collection.update({\n                            \"name\": p.split('/').pop()\n                        }, {\n                            \"name\": p.split('/').pop(),\n                            \"data\": b64\n                        }, {\n                            upsert: true,\n                            safe: true\n                        }, function(err, document) {\n                            \n                        });\n    "],[0,"                "]],"start1":27274,"start2":27274,"length1":32,"length2":686},{"diffs":[[0," '-bg.png';\n"],[1,"//"],[0,"    \t\t\t\t\tfs."]],"start1":91269,"start2":91269,"length1":24,"length2":26},{"diffs":[[0,"function(err) {\n"],[1,"//"],[0,"                "]],"start1":91319,"start2":91319,"length1":32,"length2":34},{"diffs":[[0,"r, imageData) {\n"],[1,"//"],[0,"                "]],"start1":91392,"start2":91392,"length1":32,"length2":34},{"diffs":[[0,"err) throw err;\n"],[1,"//"],[0,"                "]],"start1":91446,"start2":91446,"length1":32,"length2":34},{"diffs":[[0,".post({\n"],[1,"//"],[0,"        "]],"start1":91503,"start2":91503,"length1":16,"length2":18},{"diffs":[[0,"/png'},\n"],[1,"//"],[0,"        "]],"start1":91585,"start2":91585,"length1":16,"length2":18},{"diffs":[[0,"lit('/').pop(),\n"],[1,"//"],[0,"                "]],"start1":91665,"start2":91665,"length1":32,"length2":34},{"diffs":[[0,": imageData\n"],[1,"//"],[0,"            "]],"start1":91727,"start2":91727,"length1":24,"length2":26},{"diffs":[[0," {\t\n"],[1,"//"],[0,"\t\t\t\t\t\n"],[1,"//"],[0,"    "]],"start1":91811,"start2":91811,"length1":14,"length2":18},{"diffs":[[0,"            });\n"],[1,"//                            });\n//                        });\n                        db.collection('images', function(err, collection) {\n                            collection.update({\n                                \"name\": p.split('/').pop()\n                            }, {\n                                \"name\": p.split('/').pop(),\n                                \"data\": data\n                            }, {\n                                upsert: true,\n                                safe: true\n                            }, function(err, document) {\n                                \n"],[0,"                "]],"start1":91845,"start2":91845,"length1":32,"length2":629}]],"length":103324,"saved":false}
{"ts":1354921272525,"patch":[[{"diffs":[[0,"image/jp"],[1,"e"],[0,"g',\n    "]],"start1":2387,"start2":2387,"length1":16,"length2":17}]],"length":103325,"saved":false}
{"ts":1354921369944,"patch":[[{"diffs":[[0,"    "],[-1,"gal[p].source = config.storage.url"],[1,"//Only for Riak use\n                    //gal[p].source = config.storage.url + req.files.image[k].path.split('/').pop() + '.jpg';\n                    gal[p].source = '/images/'"],[0," + r"]],"start1":13760,"start2":13760,"length1":42,"length2":184}]],"length":103467,"saved":false}
{"ts":1354921632801,"patch":[[{"diffs":[[0,"css'));\n"],[1,"app.use('/pngs', express.static(__dirname + '/pngs'));\n"],[0,"//app.us"]],"start1":1858,"start2":1858,"length1":16,"length2":71}]],"length":103522,"saved":false}
{"contributors":[],"silentsave":false,"ts":1354922270796,"patch":[[{"diffs":[[0,") {\n"],[-1,"                console.log('serving image ' + document.name);\n"],[0,"    "]],"start1":2241,"start2":2241,"length1":71,"length2":8}]],"length":103459,"saved":false}
{"ts":1354922417429,"patch":[[{"diffs":[[0,";\n\n    var mop ="],[1," '/images' +"],[0," req.files.image"]],"start1":8752,"start2":8752,"length1":32,"length2":44},{"diffs":[[0,"edium.jpg';\n"],[-1,""],[0,"//    im.con"]],"start1":8824,"start2":8824,"length1":24,"length2":24},{"diffs":[[0,";\n\n    var sop ="],[1," '/images' +"],[0," req.files.image"]],"start1":10238,"start2":10238,"length1":32,"length2":44},{"diffs":[[0,";\n\n    var lop ="],[1," '/images' +"],[0," req.files.image"]],"start1":11726,"start2":11726,"length1":32,"length2":44},{"diffs":[[0,"   var mop ="],[1," '/images' +"],[0," req.files.i"]],"start1":15126,"start2":15126,"length1":24,"length2":36},{"diffs":[[0,"   var sop ="],[1," '/images' +"],[0," req.files.i"]],"start1":16752,"start2":16752,"length1":24,"length2":36},{"diffs":[[0,"   });\n        \n"],[-1,""],[0,"        var lop "]],"start1":18363,"start2":18363,"length1":32,"length2":32},{"diffs":[[0,"   var lop ="],[1," '/images' +"],[0," req.files.i"]],"start1":18384,"start2":18384,"length1":24,"length2":36}]],"length":103531,"saved":false}
{"ts":1354922584829,"patch":[[{"diffs":[[0,"  var mop = "],[-1,"'/images' + "],[0,""],[1,""],[0,"req.files.im"]],"start1":8757,"start2":8757,"length1":36,"length2":24},{"diffs":[[0,"e', '900x900\\>',"],[1," __dirname + '/images/' +"],[0," mop], function("]],"start1":9490,"start2":9490,"length1":32,"length2":57},{"diffs":[[0,"    fs.readFile("],[1,"__dirname + '/images/' + "],[0,"mop, function(er"]],"start1":9586,"start2":9586,"length1":32,"length2":57},{"diffs":[[0,"  var sop = "],[-1,"'/images' + "],[0,""],[1,""],[0,"req.files.im"]],"start1":10281,"start2":10281,"length1":36,"length2":24},{"diffs":[[0,"e', '400x400\\>',"],[1," __dirname + '/images/' +"],[0," sop], function("]],"start1":11016,"start2":11016,"length1":32,"length2":57},{"diffs":[[0,"    fs.readFile("],[1,"__dirname + '/images/' + "],[0,"sop, function(er"]],"start1":11112,"start2":11112,"length1":32,"length2":57},{"diffs":[[0,"  var lop = "],[-1,"'/images' + "],[0,""],[1,""],[0,"req.files.im"]],"start1":11807,"start2":11807,"length1":36,"length2":24},{"diffs":[[0,", '1600x1600\\>',"],[1," __dirname + '/images/' +"],[0," lop], function("]],"start1":12537,"start2":12537,"length1":32,"length2":57},{"diffs":[[0,"    fs.readFile("],[1,"__dirname + '/images/' + "],[0,"lop, function(er"]],"start1":12633,"start2":12633,"length1":32,"length2":57},{"diffs":[[0,"  var mop = "],[-1,"'/images' + "],[0,""],[1,""],[0,"req.files.im"]],"start1":15241,"start2":15241,"length1":36,"length2":24},{"diffs":[[0,"e', '900x900\\>',"],[1," __dirname + '/images/' +"],[0," mop], function("]],"start1":16025,"start2":16025,"length1":32,"length2":57},{"diffs":[[0,"    fs.readFile("],[1,"__dirname + '/images/' + "],[0,"mop, function(er"]],"start1":16129,"start2":16129,"length1":32,"length2":57},{"diffs":[[0,"  var sop = "],[-1,"'/images' + "],[0,""],[1,""],[0,"req.files.im"]],"start1":16905,"start2":16905,"length1":36,"length2":24},{"diffs":[[0,"e', '400x400\\>',"],[1," __dirname + '/images/' +"],[0," sop], function("]],"start1":17688,"start2":17688,"length1":32,"length2":57},{"diffs":[[0,"    fs.readFile("],[1,"__dirname + '/images/' + "],[0,"sop, function(er"]],"start1":17792,"start2":17792,"length1":32,"length2":57},{"diffs":[[0,"p = "],[-1,"'/images' + "],[0,""],[1,""],[0,"req."]],"start1":18583,"start2":18583,"length1":20,"length2":8},{"diffs":[[0,", '1600x1600\\>',"],[1," __dirname + '/images/' +"],[0," lop], function("]],"start1":19362,"start2":19362,"length1":32,"length2":57},{"diffs":[[0,"    fs.readFile("],[1,"__dirname + '/images/' + "],[0,"lop, function(er"]],"start1":19466,"start2":19466,"length1":32,"length2":57}]],"length":103759,"saved":false}
{"ts":1354924939896,"patch":[[{"diffs":[[0,"ettings.');\n"],[1,"    console.log('MongoLab URI: ' + process.env.MONGOLAB_URI);\n"],[0,"    var mu ="]],"start1":525,"start2":525,"length1":24,"length2":86}]],"length":103821,"saved":false}
{"ts":1354924981265,"patch":[[{"diffs":[[0,"ctions)\n"],[1,"    var epwd = process.env.EMAIL_PWD || config.email.password;\n"],[0,"    var "]],"start1":95582,"start2":95582,"length1":16,"length2":79},{"diffs":[[0,"  pass: "],[-1,"config.email.passwor"],[1,"epw"],[0,"d\n      "]],"start1":95806,"start2":95806,"length1":36,"length2":19}]],"length":103867,"saved":false}
{"ts":1354925227356,"patch":[[{"diffs":[[0,"[req.files.image"],[1,"[k]"],[0,".path, '-quality"]],"start1":16039,"start2":16039,"length1":32,"length2":35},{"diffs":[[0,"[req.files.image"],[1,"[k]"],[0,".path, '-quality"]],"start1":17705,"start2":17705,"length1":32,"length2":35},{"diffs":[[0,"[req.files.image"],[1,"[k]"],[0,".path, '-quality"]],"start1":19380,"start2":19380,"length1":32,"length2":35}]],"length":103876,"saved":false}
